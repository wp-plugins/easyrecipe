/*! EasyRecipe 3.3.2998 Copyright (c) 2015 BoxHill LLC */
window.EASYRECIPE=window.EASYRECIPE||{},EASYRECIPE.widget=EASYRECIPE.widget||jQuery.widget,EASYRECIPE.button=EASYRECIPE.button||jQuery.fn.button,function(e){function t(e,t){var i;switch(Pe.show(),ut.hide(),Me.show(),i=t.newTab?t.newTab.index():t.index){case 0:ut.css("right","10px"),ut.show();break;case 3:ut.css("right","inherit"),Me.hide(),ut.show();break;case 4:Pe.hide()}}function i(){Et.off("change",i),si=!0}function n(e){return e?(e+="",e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," ")):""}function a(t){return t?e("<div />").text(t).html():""}function r(t){return e.trim(a(t.val()))||!1}function s(e,t){var i=Ae.tabs("option","active");Ae.tabs("option","active",++i)}function o(e){var t,i=/\[img +(.*?) *\/?]/i,n=/\[url ([^\]]+)](.*?\[\/url])/i,a=/\[cap ([^\]]+)](.*])(.*?)\[\/cap]/i;if(""!==e){for(t=i.exec(e);null!==t;)Dt.push(t[1].replace(/</g,"&lt;").replace(/>/g,"&gt;")),e=e.replace(i,"[img:"+Dt.length+"]"),t=i.exec(e);for(t=n.exec(e);null!==t;)Lt.push(t[1]),e=e.replace(n,"[url:"+Lt.length+"]$2"),t=n.exec(e);for(t=a.exec(e);null!==t;)Ot.push(t[1]),Ht.push(t[3].replace(/</g,"&lt;").replace(/>/g,"&gt;")),e=e.replace(a,"[cap:"+Ot.length+"]$2[/cap]"),t=a.exec(e)}return e}function l(e){var t,i,n,a=/\[img:(\d+)]/i,r=/\[url:(\d+)](.*?)\[\/url]/i,s=/\[cap:(\d+)](.*])\[\/cap]/i;if(e){for(n=a.exec(e);null!==n;)t=Dt[n[1]-1].replace(/&quot;/g,"&amp;quot;"),e=e.replace(a,"[img "+t+"]"),n=a.exec(e);for(n=r.exec(e);null!==n;)t=Lt[n[1]-1],e=e.replace(r,"[url "+t+"]$2[/url]"),n=r.exec(e);for(n=s.exec(e);null!==n;)t=Ot[n[1]-1],i=Ht[n[1]-1],e=e.replace(s,"[cap "+t+"]$2"+i+"[/cap]"),n=r.exec(e)}return e}function c(e,t){var i,n,a,r,s,o,l,p,d,u,h,v,f,g,m,E,y,R,b,w,C,T,S,N,x,I=0,k=1,_=2,A=0,P="",M="<!-- START REPEAT ",U="<!-- START INCLUDEIF ",L="<!-- END INCLUDEIF ";for(i=e,t=t||{};;){if(s=i.length,o=i.indexOf("#",A),-1!==o&&(s=o,l=I),p=i.indexOf(M,A),-1!==p&&s>p&&(s=p,l=k),d=i.indexOf(U,A),-1!==d&&s>d&&(s=d,l=_),s===i.length)return P+i.substr(A);switch(u=s-A,P+=i.substr(A,u),A=s,l){case _:if(a=i.substr(A,44),r=bt.exec(a),null===r)break;if(h=r[1],v="!"!==h,f=r[2],g=L+h+f+" -->",m=g.length,E=i.indexOf(g),-1===E){A++;break}y=typeof t[f]!==Qt&&t[f]!==!1,y===v?(R="<!-- START INCLUDEIF "+h+f+" -->",b=R.length,i=i.substr(0,A)+i.substr(A+b,E-A-b)+i.substr(E+m)):i=i.substr(0,A)+i.substr(E+m);break;case I:if(a=i.substr(A,22),r=wt.exec(a),null===r){P+="#",A++;continue}if(w=r[1],""!==t[w]&&!t[w]){P+="#"+w+"#",A+=w.length+2;continue}P+=t[w],A+=w.length+2;break;case k:if(a=i.substr(A,45),r=Ct.exec(a),null===r){P+="<",A++;continue}if(C=r[1],!(t[C]&&t[C]instanceof Array)){P+="<",A++;continue}if(A+=C.length+22,T=i.indexOf("<!-- END REPEAT "+C+" -->",A),-1===T){P+="<!-- START REPEAT "+C+" -->";continue}for(S=T-A,N=i.substr(A,S),x=t[C],n=0;n<x.length;n++)P+=c(N,x[n]);A+=C.length+S+20}}}function p(t){var i,n,a=e.trim(t.val()),r=0,s=0;if(le.hide(),""===a)return!0;if(_e=St.exec(a),null===_e){if(_e=Nt.exec(a),null===_e)return le.show(),!1;r=0,s=_e[1]}else r=_e[1]?parseInt(_e[1],10):0,s=_e[2]?parseInt(_e[2],10):0;return 0===r&&0===s?t.val(""):(i=r>0?r+" hour":"",r>1&&(i+="s"),n=s>0?s+" min":"",s>1&&(n+="s"),t.val(e.trim(i+" "+n))),!0}function d(t){var i,n,a,r="";for(i=0;i<t.length;i++)n=t[i],3!==n.nodeType?1===n.nodeType&&n.childNodes.length>0&&(r+=d(n.childNodes)):(a=e.trim(n.nodeValue),""!==a&&(r+=a+"\n"));return r}function u(){var t;if(e(Yt,Bt).remove(),t=q.selection.getNode(),"#document"===t.nodeName&&(t=Ie[0]),"BODY"===t.nodeName.toUpperCase())e(t).hasClass("mceContentBody")||(t=Ie[0]),/^<p><br[^>]*><\/p>$/.test(t.innerHTML)?e(t).prepend($t):e(t).append("&nbsp;"+$t);else{for(;t.parentNode&&"BODY"!==t.parentNode.nodeName.toUpperCase();)t=t.parentNode;t.parentNode?"DIV"===t.nodeName.toUpperCase()||"SPAN"===t.nodeName.toUpperCase()?e(t,Bt).after($t):e(t,Bt).before($t):(t=Ie[0],e(t).append("&nbsp;"+$t))}return ot=-1,e(Yt,Bt)}function h(e,t,i){}function v(t){switch(t.type){case"js":e("head").append(e('<script type="text/javascript">'+t.js+"</script>")),Ce[t.f]();break;case"html":e(t.dest).html(t.html)}}function f(){He.unbind(Jt),ze.unbind(Jt),xe.dialog(Gt),Rt=!0,ge()}function g(t,i){var a,r,s,o="";for(r=t.recipe,"success"!==i&&(xe.dialog(Gt),Rt=!0,ge()),Q.val(n(r.recipe_title)),r.rating&&e.isNumeric(r.rating)&&J.val(r.rating),ni=r.recipe_image,re.val(""),ae.val(r.author?n(r.author):""),se.val(r.cuisine||""),re.val(r.mealType||""),oe.val(""),Z.val(n(r.summary)),_e=_t.exec(r.prep_time),null!==_e?(a=_e[1]?_e[1]+"h ":"",ee.val(a+_e[2]+"m")):ee.val(n(r.prep_time)),_e=_t.exec(r.cook_time),null!==_e?(a=_e[1]?_e[1]+"h ":"",te.val(a+_e[2]+"m")):te.val(n(r.cook_time)),ie.val(n(r["yield"])),qe.val(n(r.serving_size)),r.nutrition?(s=r.nutrition,Ge.val(n(s.calories)),Je.val(n(s.totalFat)),Qe.val(n(s.saturatedFat)),Ze.val(n(s.unsaturatedFat)),Ke.val(n(s.transFat)),Xe.val(n(s.totalCarbohydrates)),et.val(n(s.sugars)),tt.val(n(s.sodium)),it.val(n(s.dietaryFiber)),nt.val(n(s.protein)),at.val(n(s.cholesterol))):(Ge.val(n(r.calories)),Je.val(n(r.fat))),a=0;a<t.ingredients.length;a++)o+=yt(n(t.ingredients[a]))+"\n";K.val(o),X.val(n(r.instructions.replace("\r",""))),rt.val(n(r.notes)),Se.easyrecipeDialog("option","title","Update Recipe"),xe.dialog(Gt),Fe.hide(),je.show(),De.hide(),""!==ni&&gt(ni,Ue.length,!0),pe=u(),Se.easyrecipeDialog(Zt)}function m(){var t;Oe.show(),He.unbind(Jt),ze.unbind(Jt),t={action:"easyrecipeConvert",id:ve,type:fe},e.post(ajaxurl,t,g,"json")}function E(t){var i,n,a,r,s,o,l,c,p,u,h,v,f,g=0,m="",E="",y="",R="",b=["instruction","method","cooking method","procedure","direction"],w=["ingredients?"],C=["note","cooking note"];for(h=e.parseJSON(Ce.ingredients),v=e.parseJSON(Ce.instructions),f=e.parseJSON(Ce.notes),-1===e.inArray(h,w)&&w.push(h),o="^\\s*(?:"+w.join("|")+")",p=new RegExp(o,"i"),-1===e.inArray(v,b)&&w.push(v),s="^\\s*(?:"+b.join("|")+")",c=new RegExp(s,"i"),-1===e.inArray(f,C)&&C.push(f),l="^\\s*(?:"+C.join("|")+")\\s*$",u=new RegExp(l,"i"),r=e("<div>"+t+"</div>"),i=d(r[0].childNodes),i=i.split("\n"),n=0;n<i.length;n++)if(a=e.trim(i[n]),""!==a)if(c.test(a))g=2;else if(p.test(a))g=1;else if(u.test(a))g=3;else switch(g){case 0:m+=a+"\n";break;case 1:E+=a+"\n";break;case 2:y+=a+"\n";break;case 3:R+=a+"\n"}return{summary:m,ingredients:E,instructions:y,notes:R}}function y(){Ne.dialog(Zt)}function R(t,i,n){var a,r=function(){var t,i,n,a,r=e.data(this,"index");t=this.width/150,i=this.height/112,t=t>i?t:i,n=Math.floor(this.height/t),a=Math.floor(this.width/t),Ue[r].height(n),Ue[r].width(a),Ue[r].css("top",(112-n)/2),Ue[r].attr("src",this.src),0===r&&e("#ERDTabs").find(".divERNoPhotos").remove()};Le.append('<div class="ERPhoto"><img style="position:relative" id="ERPhoto_'+i+'" /></div>'),Ue[i]=e("#ERPhoto_"+i,Le),Ue[i].data("src",t),n&&(e(".ERPhoto",Le).removeClass(Kt),Ue[i].parent().addClass(Kt),pt=i,ni=t),""===vt&&(vt=t),a=new Image,e.data(a,"index",i),a.onload=r,a.src=t}function b(){R(ct.val(),Ue.length,!0),ct.val(""),lt.hide(),e(".divERNoPhotos").remove()}function w(e,t){var i,n=!1;for(i=0;i<Ue.length;i++)if(Ue[i].data("src")===e){n=!0;break}n||R(e,Ue.length,t)}function C(t,a){var r,s,l,c,p,d,g,b,C,T,S,N,x,I,k,_,A,P,M=!1,U=!1,L={},D="",O="",H="",z="";if(!t||1===t.which){if(a===ti&&0!==Vt)return void y();if(t&&t.data===ii&&(a=ii,t=t.delegateTarget),typeof a===Qt&&typeof t===Qt&&(ot=0),Vt=1,ot=0,pe=e(".easyrecipe:first",Bt),a!==ti&&pe.length>1&&(pe=e(pe[a]),ot=a),l=0,N=e.support.cors?"json":"jsonp",e.ajax(Xt,{dataType:N,data:{v:Ce.version,p:l,u:Ce.wpurl},success:v,error:h}),G=!1,typeof tinyMCE!==Qt&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()&&(G=!0),!G)return void alert("You must use the Visual Editor to add or update an EasyRecipe");if(Q.val(""),re.val(""),se.val(""),oe.val(""),ae.val(""),Z.val(""),ee.val(""),te.val(""),ie.val(""),K.val(""),X.val(""),qe.val(""),Ge.val(""),Je.val(""),Qe.val(""),Ze.val(""),Ke.val(""),Xe.val(""),et.val(""),tt.val(""),it.val(""),nt.val(""),at.val(""),rt.val(""),a!==ti&&1===pe.length)Se.easyrecipeDialog("option","title","Update Recipe"),De.hide(),Fe.hide(),je.show(),de=!0;else{if(ce=q.getContent(),!Rt&&(T=xt.exec(ce)||It.exec(ce)||kt.exec(ce),T||(M=e("#hasRecipe").is(":checked")),T||M||(s=Bt.find(".hrecipe").filter(".f1",".f2"),s.length>0&&(U=-1!==s.text().indexOf("recipage.com"))),T||M||U))return M?(fe="recipress",ve=Ce.postID):U?(fe="recipage",ve=Ce.postID):(fe=T[2],ve=T[3]),Oe.hide(),He.click(f),ze.click(m),g=Ut[fe],C=e("#txtERCNVText1",xe),C.html(C.html().replace("#plugin#",g)),Le.html(""),pt=-1,Ue=[],Le.html(ei),void xe.dialog(Zt);Ce.isGuest&&(_=e("#inpERAuthor").val()||"",ae.val(_)),Fe.show(),je.hide(),De.show(),Se.easyrecipeDialog("option","title","Add a New Recipe"),de=!1,Ee!==!1?L=E(Ee):(k=q.selection.getContent(),k.length>20&&(L=E(k))),L.summary&&(D=L.summary),L.ingredients&&(O=L.ingredients),L.instructions&&(H=L.instructions),L.notes&&(z=L.notes),pe=u()}for(A=pe,pe=e("<div>"+pe.html()+"</div>"),e("#inpERCuisine").autocomplete({source:e.parseJSON(Ce.cuisines)}).autocomplete("widget").wrap('<div class="easyrecipeUI" />'),e("#inpERType").autocomplete({source:e.parseJSON(Ce.recipeTypes)}).autocomplete("widget").wrap('<div class="easyrecipeUI" />'),si=!1,Et.off("change",i).on("change",i),ht=a!==ti?pe.find(".endeasyrecipe").text():Ce.version,""===ht&&(ht="2.2"),r=!!pe.find("div.endeasyrecipe").attr("title"),ni=e('link[itemprop="image"]',pe).attr("href")||"",Le.html(""),pt=-1,vt="",Ue=[],Bt.find("img").each(function(t){var i=!1;"3">ht?e(this).hasClass("photo")&&(i=!0):i=this.src===ni,R(this.src,t,i)}),d=Bt.contents().text(),T=At.exec(d),x=Ue.length;null!==T;)p=Mt.exec(T[0]),null!==p&&(c=p[1],R(c,x),ht>"3"?ni===c&&(Ue[x].parent().addClass(Kt),pt=x):Pt.test(T[0])&&(Ue[x].parent().addClass(Kt),pt=x,ni=c),x++),T=At.exec(d);""!==ni&&w(ni,!0),he=e("#set-post-thumbnail").find("img").attr("src"),he&&w(he,-1===pt),-1===pt&&Ue.length>0&&(pt=0,ni=vt,Ue[0].parent().addClass(Kt)),Le.click(function(){Ne.dialog(Zt)}),0===Ue.length?Le.html(ei):-1===pt&&Ue[0].parent().addClass(Kt),Dt=[],Lt=[],I=pe.find(".ERName .fn").html()||pe.find(".ERName").html(),Q.val(I&&""!==I?o(n(I)):o(n(e("#title").val()))),re.val(o(n(pe.find(".type").html()))),ae.val(o(n(pe.find(".author").html()))),""===ae.val()&&ae.val(o(e.parseJSON(Ce.author))),se.val(o(n(pe.find(".cuisine").html()))),Z.val(o(D+n(pe.find(".summary").html()))),r&&Z.val(o(n(pe.find(".ERSSummary").html()))),ht>"3"?(S=pe.find('time[itemprop="prepTime"]').html()||"",ee.val(n(S)),S=pe.find('time[itemprop="cookTime"]').html()||"",te.val(n(S))):(S=pe.find(".preptime").html()||"",T=Tt.exec(S),ee.val(null!==T?n(T[1]):""),S=pe.find(".cooktime").html()||"",T=Tt.exec(S),te.val(null!==T?n(T[1]):"")),ie.val(n(pe.find(".yield").html())),pe.find(".ingredients li").each(function(t,i){O+=e(i).hasClass(Wt)?"!"+o(n(i.innerHTML))+"\n":o(n(i.innerHTML))+"\n"}),r&&""===O&&pe.find(".ingredient,.ERSIngredients .ERSSectionHead").each(function(t,i){O+=e(i).hasClass("ERSSectionHead")?"!"+o(n(i.innerHTML))+"\n":o(n(i.innerHTML))+"\n"}),K.val(O),pe.find(".instructions li, .instructions .ERSeparator").each(function(t,i){b=e.trim(i.innerHTML.replace(/^[ 0-9.]*(.*)$/gi,"$1")),H+=e(i).hasClass(Wt)?"!"+b+"\n":b+"\n"}),r&&""===H&&pe.find(".instruction,.ERSInstructions .ERSSectionHead").each(function(t,i){b=e.trim(i.innerHTML.replace(/^[ 0-9.]*(.*)$/gi,"$1")),H+=e(i).hasClass("ERSSectionHead")?"!"+b+"\n":b+"\n"}),X.val(o(n(H))),qe.val(n(pe.find(".servingSize").html())),Ge.val(n(pe.find(".calories").html())),Je.val(n(pe.find(".fat").html())),Qe.val(n(pe.find(".saturatedFat").html())),Ze.val(n(pe.find(".unsaturatedFat").html())),Ke.val(n(pe.find(".transFat").html())),Xe.val(n(pe.find(".carbohydrates").html())),et.val(n(pe.find(".sugar").html())),tt.val(n(pe.find(".sodium").html())),it.val(n(pe.find(".fiber").html())),nt.val(n(pe.find(".protein").html())),at.val(n(pe.find(".cholesterol").html())),P=A.parent().prop("data-rating"),J.val(e.isNumeric(P)?P:"5"),b=(n(pe.find(".ERNotes").html())||"").replace(/<\/p>\n*<p>/gi,"\n\n").replace(/(?:<p>|<\/p>)/gi,"").replace(/<br *\/?>/gi,"\n"),""===b&&""!==z&&(b=z),b=o(b),b=b.replace(/\[br(?: ?\/)?]/gi,"\n"),rt.val(o(b)),r&&""===b&&(b=(n(pe.find(".ERSNotes").html())||"").replace(/<\/p>\n*<p>/gi,"\n\n").replace(/(?:<p>|<\/p>)/gi,"").replace(/<br *\/?>/gi,"\n"),""===b&&""!==z&&(b=z),b=o(b),b=b.replace(/\[br(?: ?\/)?]/gi,"\n"),b=b.replace(/ data-mce-href="[^"]+?"/gi,""),b=b.replace(/<a ([^>]+?)>([^<]+?)<\/a>/gi,"[url $1]$2[/url]"),rt.val(o(b))),mt&&(mt.name&&Q.val(o(n(mt.name))),mt.author&&ae.val(o(mt.author)),mt.summary&&Z.val(o(mt.summary)),mt["yield"]&&ie.val(n(mt["yield"])),mt.type&&re.val(o(n(mt.type))),mt.cuisine&&se.val(o(n(mt.cuisine))),mt.prepTime&&ee.val(n(mt.prepTime)),mt.cookTime&&te.val(n(mt.cookTime)),mt.summary&&Z.val(o(mt.summary))),pe=A,Se.easyrecipeDialog(Zt),Se.easyrecipeDialog("option","position","center")}}function T(t){return Vt=e(".easyrecipe",Bt).length,qt||0===Vt?void C(t,ti):void Ne.dialog(Zt)}function S(){Se.easyrecipeDialog(Gt)}function N(){var e=confirm("Are you sure you want to delete this recipe?");e&&(pe.remove(),pe=!1,si=!1),Se.easyrecipeDialog(Gt)}function x(){var t,i=e("#inpERPaste"),n=i.val();t=E(n),(0!==t.ingredients.length||0!==t.instructions.length)&&(Ee=n,i.val(""),mt={name:l(a(Q.val())),author:l(r(ae)),"yield":r(ie),type:l(r(re)),cuisine:l(r(se)),summary:l(r(Z)),servesize:r(qe),prepTime:ee.val(),cookTime:te.val()},si=!1,Se.easyrecipeDialog(Gt),T(null))}function I(t){var i=e(t.target).parent(),n=i.parent();i.hasClass("easyrecipeAbove")?n.before(ai):n.after(ai),i.remove(),k()}function k(){var t,i,n;i=e("<div>"+q.getContent()+"</div>"),i.find(".easyrecipeAbove,.easyrecipeBelow").remove(),t=i.find(".easyrecipe"),t.each(function(){var t=e(this);t.parent().hasClass("easyrecipeWrapper")&&t.unwrap(),ft(t)}),n=i.html(),q.setContent(n),t=Bt.find(".easyrecipe"),t.on("mousedown",null,ii,C),Bt.find(".ERInsertLine").on(Jt,I)}function _(e){var t,i,n,a,r;if(a=e.prev(),r=e.next(),i=0===a.length||a.hasClass("easyrecipe")||a.hasClass("easyrecipeWrapper"))try{i=!(e[0].previousSibling&&3===e[0].previousSibling.nodeType)}catch(s){}if(n=0===r.length||r.hasClass("easyrecipe")||r.hasClass("easyrecipeWrapper"))try{n=!(e[0].nextSibling&&3===e[0].nextSibling.nodeType)}catch(s){}(i||n)&&(e.wrap('<div class="easyrecipeWrapper mceNonEditable" />'),t=e.parent(),i&&(t.prepend('<div class="easyrecipeAbove mceNonEditable"><input class="ERInsertLine mceNonEditable" type="button" value="Insert line above" /></div>'),t.find("input").on(Jt,I),ri.push(t.find(".easyrecipeAbove")[0])),n&&(t.append('<div class="easyrecipeBelow mceNonEditable"><input class="ERInsertLine mceNonEditable" type="button" value="Insert line below" /></div>'),t.find("input").on(Jt,I)))}function A(t){e(".easyrecipeAbove,.easyrecipeBelow",t).remove(),e(".easyrecipe",t).unwrap()}function P(){var t=e(".easyrecipe",Bt);0!==t.length&&(t.on("mousedown",null,ii,C),k())}function M(){var t,i,n,s,o,d,u,h,v,f,g,m,E,y,R="",b="",w=0,C="",T=[];if(p(ee)&&p(te)){for(i=e.trim(ee.val()),""!==i?(_e=St.exec(i),n=_e[1]?parseInt(_e[1],10):0,s=_e[2]?parseInt(_e[2],10):0,w=60*n+s,o=n>0?n+"H":"",d=s>0?s+"M":"",b="PT"+o+d):i=!1,t=e.trim(te.val()),""!==t?(_e=St.exec(t),n=_e[1]?parseInt(_e[1],10):0,s=_e[2]?parseInt(_e[2],10):0,o=n>0?n+"H":"",d=s>0?s+"M":"",w+=60*n+s,R="PT"+o+d):t=!1,w>0?(n=Math.floor(w/60),s=w%60,o=n>0?n+" hour":"",n>1&&(o+="s"),d=s>0?s+" min":"",s>1&&(d+="s"),w=e.trim(o+" "+d),o=n>0?n+"H":"",d=s>0?s+"M":"",C="PT"+o+d):w=!1,u=K.val().split("\n"),v=0;v<u.length;v++)h=u[v],""!==h&&("!"===h.charAt(0)?(f=!0,h=h.substr(1)):f=!1,T.push({ingredient:l(a(h)),hasHeading:f}));for(u=X.val().split("\n"),m=[],g={INSTRUCTIONS:[]},v=0;v<u.length;v++)h=e.trim(u[v].replace(/^[ 0-9\.]*(.*)$/gi,"$1")),""!==h&&("!"===h.charAt(0)?((g.INSTRUCTIONS.length>0||g.heading)&&m.push(g),h=h.substr(1),g={},g.INSTRUCTIONS=[],g.heading=l(a(h))):g.INSTRUCTIONS.push({instruction:l(a(h))}));(g.INSTRUCTIONS.length>0||g.heading)&&m.push(g),h=r(rt),h&&(h=h.replace(/\n/g,"[br]")),E={version:Ce.version,hasPhoto:""!==ni,photoURL:ni,name:l(a(Q.val())),author:l(r(ae)),preptime:i,cooktime:t,totaltime:w,preptimeISO:b,cooktimeISO:R,totaltimeISO:C,"yield":r(ie),type:l(r(re)),cuisine:l(r(se)),summary:l(r(Z)),servesize:r(qe),calories:r(Ge),fat:r(Je),satfat:r(Qe),unsatfat:r(Ze),transfat:r(Ke),carbs:r(Xe),sugar:r(et),sodium:r(tt),fiber:r(it),protein:r(nt),cholesterol:r(at),notes:l(h),rating:J.length?J.val():"0",INGREDIENTS:T,STEPS:m},""===E.name&&(E.name=!1),y=c(Ce.recipeTemplate,E),-1===ot?pe=e(Yt,Bt):(pe=e(".easyrecipe",Bt),pe.length>0&&(pe=e(pe[ot]))),pe.before(y),pe.remove(),pe=!1,st.css("display","inline-block"),si=!1,Se.easyrecipeDialog(Gt),Vt=e(".easyrecipe",Bt).length,P()}}function U(t,i,n){var a,r,s;if(mt=!1,tinymce.majorVersion>"3"){if(!ne[i.id]&&"wp_mce_fullscreen"!==i.id)return e("#"+i.controlManager.buttons.easyrecipeTest._id).hide(),e("#"+i.controlManager.buttons.easyrecipeEdit._id).hide(),void e("#"+i.controlManager.buttons.easyrecipeAdd._id).hide();ne[i.id]?(Bt=e("#"+i.id+"_ifr").contents(),ke=1e4,r=e("#"+i.controlManager.buttons.easyrecipeTest._id),st=e("#"+i.controlManager.buttons.easyrecipeEdit._id)):(Bt=e("#wp_mce_fullscreen_ifr").contents(),ke=200001,r=e("#mce_fullscreen_easyrecipeTest"),st=e("#mce_fullscreen_easyrecipeEdit"))}else{if(!ne[i.editorId]&&"wp_mce_fullscreen"!==i.editorId)return e("#"+i.editorId+"_easyrecipeTest").hide(),e("#"+i.editorId+"_easyrecipeEdit").hide(),void e("#"+i.editorId+"_easyrecipeAdd").hide();ne[i.editorId]?(Bt=e("#"+i.editorId+"_ifr").contents(),ke=1e4,r=e("#"+i.editorId+"_easyrecipeTest"),st=e("#"+i.editorId+"_easyrecipeEdit")):(Bt=e("#wp_mce_fullscreen_ifr").contents(),ke=200001,r=e("#mce_fullscreen_easyrecipeTest"),st=e("#mce_fullscreen_easyrecipeEdit"))}Ie=e("body",Bt),s=e(".easyrecipe",Bt),q=tinyMCE.activeEditor,s.each(function(){var t=e(this);t.addClass("mceNonEditable"),t.find(".ERRatingOuter").remove(),t.find(".ERHDPrint").remove(),t.find(".ERLinkback").remove(),t.find(".endeasyrecipe").attr("title")}),Vt=s.length,Vt>0&&""!==Ce.testURL?r.show():r.hide(),Vt>0?st.css("display","inline-block"):st.hide(),Bt.hasERCSS||(a=Ce.isDebug?"":"-min",e("head",Bt).append('<link rel="stylesheet" type="text/css" href="'+Ce.easyrecipeURL+"/css/easyrecipe-entry"+a+".css?ver="+Ce.version+'" />'),Bt.hasERCSS=!0),P()}function L(){Ye.toggleClass("ERNone"),We.toggleClass("ERContract")}function D(){Be.toggleClass("ERNone"),Ve.toggleClass("ERContract")}function O(t){var i,n,a,r;i=e("#ertmp_"+jt,Bt),n=t.title?' title="'+t.title+'"':"",a=t.target?' target="'+t.target+'"':"",r='href="'+t.href+'"'+a+n,Lt.push(r),we.val(be.substring(0,ye)+"[url:"+Lt.length+"]"+be.substring(ye,Re)+"[/url]"+be.substring(Re)),we[0].focus(),i.remove()}function H(t){var i,n,a,r,s,o;Ce.isEntryDialog&&(i=e("#ertmp_"+jt,Bt),"string"==typeof t?a=e(t):(o=i.html(),"link"===o?(a=i.parent("a"),i=a):a=e(i.html())),a.is("a")&&(n=a.attr("href"),r=a.attr("title"),s=a.attr("target"),r=r?' title="'+r+'"':"",s=s?' target="'+s+'"':"",t='href="'+n+'"'+s+r,Lt.push(t),we.val(be.substring(0,ye)+"[url:"+Lt.length+"]"+be.substring(ye,Re)+"[/url]"+be.substring(Re))),we[0].focus(),i.remove())}function z(t,i){var n,a,r,s,o,l,c,p,d,u,h,v,f,g,m;a=t.sizes[i.size],r=a.url,l=a.width,c=a.height,R(r,Ue.length),p=tinymce.html.Entities.encodeAllRaw(e.trim(t.title)),p=p.replace(/&quot;/g,"&amp;quot;"),d=tinymce.html.Entities.encodeAllRaw(e.trim(t.alt)),d=d.replace(/&quot;/g,"&amp;quot;"),u=tinymce.html.Entities.encodeAllRaw(e.trim(t.caption)),p=""!==p?' title="'+p+'"':"",d=""!==d?' alt="'+d+'"':"",h="align"+i.align,o=t.uploadedTo?'id="attachment_'+t.uploadedTo+'" ':"",n=be.substring(0,ye),""!==u?(Ot.push(o+'align="'+h+'" width="'+l+'"'),Ht.push(u),v="[cap:"+Ot.length+"]",f="[/cap]",h=""):v=f="","none"===i.link?s=g=m="":"file"===i.link?s=r:"post"===i.link?s=t.link:"custom"===i.link&&(s=i.linkUrl),""!==s&&(Lt.push('href="'+s+'"'),g="[url:"+Lt.length+"]",m="[/url]"),Dt.push('src="'+r+'" width="'+l+'" height="'+c+'" class="'+h+" size-"+i.size+'"'+p+d),n+=v+g+"[img:"+Dt.length+"]"+m+f,n+=be.substring(Re),we.val(n),we[0].focus()}function F(e){e.stopPropagation(),y()}function j(){mt=!1,T()}function $(){mt=!1,C()}function Y(){Vt>0&&!Ce.noHTMLWarn&&(Ce.noHTMLWarn=!0,Te.dialog(Zt))}function W(t){var i,n,a,r,s=e("#wp-preview",t.target).val();return"dopreview"===s?!0:0===Vt?!0:(a=tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden(),a?n=e("<div>"+q.getContent()+"</div>"):(r=e("#wp-content-editor-container").find("textarea"),n=e("<div>"+r.val()+"</div>")),A(e(".easyrecipeWrapper",n)),e(".easyrecipe",n).removeClass("mceNonEditable"),i=e.trim(n.html()),a?q.setContent(i):r.val(i),!0)}function B(t){var i;""!=t.target.innerHTML&&(i=e(t.target).find("img").attr("src"),i&&w(i,!1))}function V(t){var i,n,a,r;for(i=t[0],n=0;n<i.addedNodes.length;n++)if(a=e(i.addedNodes[n].innerHTML),r=a.find("img").attr("src")){w(r,!1);break}}var q,G,J,Q,Z,K,X,ee,te,ie,ne,ae,re,se,oe,le,ce,pe,de,ue,he,ve,fe,ge,me,Ee,ye,Re,be,we,Ce,Te,Se,Ne,xe,Ie,ke,_e,Ae,Pe,Me,Ue,Le,De,Oe,He,ze,Fe,je,$e,Ye,We,Be,Ve,qe,Ge,Je,Qe,Ze,Ke,Xe,et,tt,it,nt,at,rt,st,ot,lt,ct,pt,dt,ut,ht,vt,ft,gt,mt,Et,yt=jQuery.trim,Rt=!1,bt=/<!-- START INCLUDEIF (!?)([_a-z][_0-9a-z]{0,19}) -->/i,wt=/^#([_a-z][_0-9a-z]{0,19})#/im,Ct=/<!-- START REPEAT ([_a-zA-Z][_0-9a-zA-Z]{0,19}) -->/m,Tt=/^([^<]*)/,St=/^(?:([0-9]+) *(?:h|hr|hrs|hour|hours))? *(?:([0-9]+) *(?:m|mn|mns|min|mins|minute|minutes))?$/i,Nt=/^([0-9]+)$/,xt=/(.*)\[amd-(recipeseo|zlrecipe)-recipe:([0-9]+)](.*)/,It=/(.*)\[(yumprint)-recipe\s+id='(\d+)'](.*)/i,kt=/(.*)\[(gmc)_recipe\s+([0-9]+)](.*)/,_t=/PT(?:([0-9]*)+H)?([0-9]+)+M/i,At=/\[(?:img) +(?:[^\]]+?)]/gi,Pt=/class\s*=\s*"(?:[^"]+ )?photo[ "]/i,Mt=/src\s*=\s*" *([^"]+?) *"/i,Ut={recipeseo:"Recipe SEO",ziplist:"ZipList",zlrecipe:"ZipList",yumprint:"Yumprint Recipe Card",recipress:"ReciPress",gmc:"GetMeCooking",recipage:"ReciPage"},Lt=[],Dt=[],Ot=[],Ht=[],zt="Switch to the Visual Editor to add or edit an EasyRecipe",Ft=null,jt=0,$t='<div class="easyrecipeholder">EasyRecipe</div>',Yt=".easyrecipeholder",Wt="ERSeparator",Bt=null,Vt=0,qt=!0,Gt="close",Jt="click",Qt="undefined",Zt="open",Kt="ERPhotoSelected",Xt="http://www.easyrecipeplugin.com/checkUpdates.php",ei='<div class="divERNoPhotos">There are no photos in this post<br />Add photos anywhere in the post</div>',ti=-1,ii=-2,ni="",ai="&nbsp;",ri=[],si=!1;e(function(){var i,n,a,r=null;Ce=EASYRECIPE,Ce.dialogs=e("<div>").addClass("easyrecipeUI").prop("id","easyrecipeUI").appendTo("body"),Ce.isGuest&&Ce.dialogs.addClass("easyrecipeDlgAbsolute"),e.widget("custom.easyrecipeDialog",e.ui.dialog,{_allowInteraction:function(t){return this._super(t)||!!e(t.target).parents(".media-modal-content, #wp-link").length}}),Ce.button!==e.fn.button&&(r=e.fn.button,e.fn.button=Ce.button),Se=e("#easyrecipeEntry"),Ne=e("#easyrecipeUpgrade"),Te=e("#easyrecipeHTMLWarn"),ne=Ce.isGuest?{guestpost:1}:{content:1,aviaTBcontent:1},Se.easyrecipeDialog({autoOpen:!1,width:655,modal:!0,appendTo:Ce.dialogs,dialogClass:"easyrecipeEntry",beforeClose:function(){if(si){if(!window.confirm("Are you sure you want to close without saving the recipe?"))return!1;si=!1}return!0},close:function(){Ce.isEntryDialog=!1,pe&&!de&&pe.remove(),pe=!1,e(".easyrecipeEntry").filter(function(){return""===e(this).text()}).remove()},open:function(){Ce.isEntryDialog=!0,Ae.tabs({active:0,beforeActivate:t}),setTimeout(function(){var t=e(".easyrecipeEntry"),i=t.offset();i.top<dt&&(i.top=dt,t.offset(i))},250)}}),Et=e("#divERContainer").show(),Te.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyrecipeHTMLWarn",appendTo:Ce.dialogs,close:function(){e(".easyrecipeHTMLWarn").filter(function(){return""===e(this).text()}).remove()}}),e(".divERHTMLWarnContainer").show(),Ne.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyrecipeUpgrade",appendTo:Ce.dialogs,close:function(){e(".easyrecipeUpgrade").filter(function(){return""===e(this).text()}).remove()}}),e(".divERUPGContainer").show(),xe=e("#easyrecipeConvert"),Oe=e("#divERCNVSpinner"),He=e("#btnERCNVCancel"),ze=e("#btnERCNVOK"),Oe.hide(),xe.dialog({autoOpen:!1,width:390,modal:!0,dialogClass:"easyrecipeConvert",appendTo:Ce.dialogs,close:function(){e(".easyrecipeConvert").filter(function(){return""===e(this).text()}).remove()}}),e("#divERCNVContainer").show(),e(window).bind("easyrecipeadd",j),e(window).bind("easyrecipeedit",$),e(window).bind("easyrecipeload",U),Me=e("#divERNext"),Pe=e("#btnERButtons"),Ae=e("#ERDTabs"),Le=e("#divERPhotos"),e("input:submit",".easyrecipeUI").button(),ue=e("#ed_toolbar"),J=e("#inpERRating"),Q=e("#inpERName"),ae=e("#inpERAuthor"),re=e("#inpERType"),se=e("#inpERCuisine"),oe=e("#inpERTags"),Z=e("textarea#taERSummary"),K=e("textarea#taERIngredients"),X=e("textarea#taERInstructions"),ee=e("#inpERPrepTime"),te=e("#inpERCookTime"),ie=e("#inpERYield"),qe=e("#inpERServeSize"),Ge=e("#inpERCalories"),Je=e("#inpERFat"),Qe=e("#inpERSatFat"),Ze=e("#inpERUnsatFat"),Ke=e("#inpERTransFat"),Xe=e("#inpERCarbs"),et=e("#inpERSugar"),tt=e("#inpERSodium"),it=e("#inpERFiber"),nt=e("#inpERProtein"),at=e("#inpERCholesterol"),rt=e("textarea#taERNotes"),lt=e("#divERAddImageURL"),a=e("#lnkERPhotoURL"),le=e(".ERTimeError"),Fe=e("#divERAdd"),je=e("#divERChange"),$e=e("#divERHeader"),Ye=e("#divEROther"),We=e("#divEROtherLabel"),Be=e("#divERNotes"),Ve=e("#divERNotesLabel"),De=e("#ERDPasteTab"),ct=e("#fldERAPUImageURL"),e("#btnERAdd").click(M),e("#btnERNext").click(s),e("#btnERChange").click(M),e("#btnERDelete").click(N),e("#btnERCancel").click(S),a.click(function(){Ne.dialog(Zt)}),e("#btnERAIUCancel").click(function(){lt.hide()}),e("#btnERAIUOK").click(b),We.click(L),Ve.click(D),ee.change(function(t){p(e(t.target))}),te.change(function(t){p(e(t.target))}),e("#btnERPaste").click(x),dt=e("#wpadminbar").height(),ut=e("#divEREditBtns").on("mousedown","li",F),Et.find('input[type="text"], textarea').on("blur",function(){Ft=null}).on("focus",function(){Ft=e(this)}),e("#wp-link").bind("wpdialogclose",H),Ce.insertLink=O,ge=T,me=C,Ee=!1,Ce.insertUploadedImage=z,ft=_,gt=R,Ce.addListener=P,Te.find("input").on(Jt,function(){Te.dialog(Gt)}),e("#wp-content-editor-tools").on(Jt,"#content-html",Y),e("#post").on("submit",W),null!==r&&(e.fn.button=r),i=e("#postimagediv").find(".inside"),window.MutationObserver&&i.length>0?(n=new MutationObserver(V),n.observe(i[0],{childList:!0})):i.on("DOMSubtreeModified",B),window.QTags&&QTags.addButton("easyrecipe","EasyRecipe",function(){alert(zt)},"","","",900)})}(jQuery);