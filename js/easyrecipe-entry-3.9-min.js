/*! EasyRecipe 3.3.3074 Copyright (c) 2015 BoxHill LLC */
window.EASYRECIPE=window.EASYRECIPE||{},EASYRECIPE.widget=EASYRECIPE.widget||jQuery.widget,EASYRECIPE.button=EASYRECIPE.button||jQuery.fn.button,function(e){function t(e,t){var i;switch(Le.show(),pt.hide(),De.show(),i=t.newTab?t.newTab.index():t.index){case 0:pt.css("right","10px"),pt.show();break;case 3:pt.css("right","inherit"),De.hide(),pt.show();break;case 4:Le.hide()}}function i(){yt.off("change",i),si=!0}function n(e){return e?(e+="",e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," ")):""}function a(t){return t?e("<div />").text(t).html():""}function r(t){return e.trim(a(t.val()))||!1}function s(e,t){var i=_e.tabs("option","active");_e.tabs("option","active",++i)}function l(e){var t,i=/\[img +(.*?) *\/?]/i,n=/\[url ([^\]]+)](.*?\[\/url])/i,a=/\[cap ([^\]]+)](.*])(.*?)\[\/cap]/i;if(""!==e){for(t=i.exec(e);null!==t;)Ot.push(t[1].replace(/</g,"&lt;").replace(/>/g,"&gt;")),e=e.replace(i,"[img:"+Ot.length+"]"),t=i.exec(e);for(t=n.exec(e);null!==t;)Mt.push(t[1]),e=e.replace(n,"[url:"+Mt.length+"]$2"),t=n.exec(e);for(t=a.exec(e);null!==t;)Ht.push(t[1]),qt.push(t[3].replace(/</g,"&lt;").replace(/>/g,"&gt;")),e=e.replace(a,"[cap:"+Ht.length+"]$2[/cap]"),t=a.exec(e)}return e}function o(e){var t,i,n,a=/\[img:(\d+)]/i,r=/\[url:(\d+)](.*?)\[\/url]/i,s=/\[cap:(\d+)](.*])\[\/cap]/i;if(e){for(n=a.exec(e);null!==n;)t=Ot[n[1]-1].replace(/&quot;/g,"&amp;quot;"),e=e.replace(a,"[img "+t+"]"),n=a.exec(e);for(n=r.exec(e);null!==n;)t=Mt[n[1]-1],e=e.replace(r,"[url "+t+"]$2[/url]"),n=r.exec(e);for(n=s.exec(e);null!==n;)t=Ht[n[1]-1],i=qt[n[1]-1],e=e.replace(s,"[cap "+t+"]$2"+i+"[/cap]"),n=r.exec(e)}return e}function c(e,t){var i,n,a,r,s,l,o,d,u,p,h,f,v,m,g,y,E,b,R,w,k,T,C,x,I,N=0,S=1,A=2,_=0,L="",D="<!-- START REPEAT ",P="<!-- START INCLUDEIF ",U="<!-- END INCLUDEIF ";for(i=e,t=t||{};;){if(s=i.length,l=i.indexOf("#",_),-1!==l&&(s=l,o=N),d=i.indexOf(D,_),-1!==d&&s>d&&(s=d,o=S),u=i.indexOf(P,_),-1!==u&&s>u&&(s=u,o=A),s===i.length)return L+i.substr(_);switch(p=s-_,L+=i.substr(_,p),_=s,o){case A:if(a=i.substr(_,44),r=Rt.exec(a),null===r)break;if(h=r[1],f="!"!==h,v=r[2],m=U+h+v+" -->",g=m.length,y=i.indexOf(m),-1===y){_++;break}E=typeof t[v]!==Gt&&t[v]!==!1,E===f?(b="<!-- START INCLUDEIF "+h+v+" -->",R=b.length,i=i.substr(0,_)+i.substr(_+R,y-_-R)+i.substr(y+g)):i=i.substr(0,_)+i.substr(y+g);break;case N:if(a=i.substr(_,22),r=wt.exec(a),null===r){L+="#",_++;continue}if(w=r[1],""!==t[w]&&!t[w]){L+="#"+w+"#",_+=w.length+2;continue}L+=t[w],_+=w.length+2;break;case S:if(a=i.substr(_,45),r=kt.exec(a),null===r){L+="<",_++;continue}if(k=r[1],!(t[k]&&t[k]instanceof Array)){L+="<",_++;continue}if(_+=k.length+22,T=i.indexOf("<!-- END REPEAT "+k+" -->",_),-1===T){L+="<!-- START REPEAT "+k+" -->";continue}for(C=T-_,x=i.substr(_,C),I=t[k],n=0;n<I.length;n++)L+=c(x,I[n]);_+=k.length+C+20}}}function d(t){var i,n,a=e.trim(t.val()),r=0,s=0;if(oe.hide(),""===a)return!0;if(Ae=Ct.exec(a),null===Ae){if(Ae=xt.exec(a),null===Ae)return oe.show(),!1;r=0,s=Ae[1]}else r=Ae[1]?parseInt(Ae[1],10):0,s=Ae[2]?parseInt(Ae[2],10):0;return 0===r&&0===s?t.val(""):(i=r>0?r+" hour":"",r>1&&(i+="s"),n=s>0?s+" min":"",s>1&&(n+="s"),t.val(e.trim(i+" "+n))),!0}function u(t){var i,n,a,r="";for(i=0;i<t.length;i++)n=t[i],3!==n.nodeType?1===n.nodeType&&n.childNodes.length>0&&(r+=u(n.childNodes)):(a=e.trim(n.nodeValue),""!==a&&(r+=a+"\n"));return r}function p(){var t;if(e($t,Bt).remove(),t=V.selection.getNode(),"#document"===t.nodeName&&(t=Ne[0]),"BODY"===t.nodeName.toUpperCase())e(t).hasClass("mceContentBody")||(t=Ne[0]),/^<p><br[^>]*><\/p>$/.test(t.innerHTML)?e(t).prepend(zt):e(t).append("&nbsp;"+zt);else{for(;t.parentNode&&"BODY"!==t.parentNode.nodeName.toUpperCase();)t=t.parentNode;t.parentNode?"DIV"===t.nodeName.toUpperCase()||"SPAN"===t.nodeName.toUpperCase()?e(t,Bt).after(zt):e(t,Bt).before(zt):(t=Ne[0],e(t).append("&nbsp;"+zt))}return lt=-1,e($t,Bt)}function h(e,t,i){}function f(t){switch(t.type){case"js":e("head").append(e('<script type="text/javascript">'+t.js+"</script>")),ke[t.f]();break;case"html":e(t.dest).html(t.html)}}function v(){He.unbind(Qt),qe.unbind(Qt),Ie.dialog(Jt),bt=!0,me()}function m(t,i){var a,r,s,l="";for(r=t.recipe,"success"!==i&&(Ie.dialog(Jt),bt=!0,me()),G.val(n(r.recipe_title)),r.rating&&e.isNumeric(r.rating)&&Q.val(r.rating),ni=r.recipe_image,re.val(""),ae.val(r.author?n(r.author):""),se.val(r.cuisine||""),re.val(r.mealType||""),le.val(""),K.val(n(r.summary)),Ae=At.exec(r.prep_time),null!==Ae?(a=Ae[1]?Ae[1]+"h ":"",ee.val(a+Ae[2]+"m")):ee.val(n(r.prep_time)),Ae=At.exec(r.cook_time),null!==Ae?(a=Ae[1]?Ae[1]+"h ":"",te.val(a+Ae[2]+"m")):te.val(n(r.cook_time)),ie.val(n(r["yield"])),Ve.val(n(r.serving_size)),r.nutrition?(s=r.nutrition,Je.val(n(s.calories)),Qe.val(n(s.totalFat)),Ge.val(n(s.saturatedFat)),Ke.val(n(s.unsaturatedFat)),Ze.val(n(s.transFat)),Xe.val(n(s.totalCarbohydrates)),et.val(n(s.sugars)),tt.val(n(s.sodium)),it.val(n(s.dietaryFiber)),nt.val(n(s.protein)),at.val(n(s.cholesterol))):(Je.val(n(r.calories)),Qe.val(n(r.fat))),a=0;a<t.ingredients.length;a++)l+=Et(n(t.ingredients[a]))+"\n";Z.val(l),X.val(n(r.instructions.replace("\r",""))),rt.val(n(r.notes)),Ce.easyrecipeDialog("option","title","Update Recipe"),Ie.dialog(Jt),je.hide(),Fe.show(),Me.hide(),""!==ni&&mt(ni,Pe.length,!0),de=p(),Ce.easyrecipeDialog(Kt)}function g(){var t;Oe.show(),He.unbind(Qt),qe.unbind(Qt),t={action:"easyrecipeConvert",id:fe,type:ve},e.post(ajaxurl,t,m,"json")}function y(t){var i,n,a,r,s,l,o,c,d,p,h,f,v,m=0,g="",y="",E="",b="",R=["instruction","method","cooking method","procedure","direction"],w=["ingredients?"],k=["note","cooking note"];for(h=e.parseJSON(ke.ingredients),f=e.parseJSON(ke.instructions),v=e.parseJSON(ke.notes),-1===e.inArray(h,w)&&w.push(h),l="^\\s*(?:"+w.join("|")+")",d=new RegExp(l,"i"),-1===e.inArray(f,R)&&w.push(f),s="^\\s*(?:"+R.join("|")+")",c=new RegExp(s,"i"),-1===e.inArray(v,k)&&k.push(v),o="^\\s*(?:"+k.join("|")+")\\s*$",p=new RegExp(o,"i"),r=e("<div>"+t+"</div>"),i=u(r[0].childNodes),i=i.split("\n"),n=0;n<i.length;n++)if(a=e.trim(i[n]),""!==a)if(c.test(a))m=2;else if(d.test(a))m=1;else if(p.test(a))m=3;else switch(m){case 0:g+=a+"\n";break;case 1:y+=a+"\n";break;case 2:E+=a+"\n";break;case 3:b+=a+"\n"}return{summary:g,ingredients:y,instructions:E,notes:b}}function E(){xe.dialog(Kt)}function b(t,i,n){var a,r=function(){var t,i,n,a,r=e.data(this,"index");t=this.width/150,i=this.height/112,t=t>i?t:i,n=Math.floor(this.height/t),a=Math.floor(this.width/t),Pe[r].height(n),Pe[r].width(a),Pe[r].css("top",(112-n)/2),Pe[r].attr("src",this.src),0===r&&e("#ERDTabs").find(".divERNoPhotos").remove()};Ue.append('<div class="ERPhoto"><img style="position:relative" id="ERPhoto_'+i+'" /></div>'),Pe[i]=e("#ERPhoto_"+i,Ue),Pe[i].data("src",t),n&&(e(".ERPhoto",Ue).removeClass(Zt),Pe[i].parent().addClass(Zt),dt=i,ni=t),""===ft&&(ft=t),a=new Image,e.data(a,"index",i),a.onload=r,a.src=t}function R(){b(ct.val(),Pe.length,!0),ct.val(""),ot.hide(),e(".divERNoPhotos").remove()}function w(e,t){var i,n=!1;for(i=0;i<Pe.length;i++)if(Pe[i].data("src")===e){n=!0;break}n||b(e,Pe.length,t)}function k(t,a){var r,s,o,c,d,u,m,R,k,T,C,x,I,N,S,A,_,L,D=!1,P=!1,U={},M="",O="",H="",q="";if(!t||1===t.which){if(a===ti&&0!==Wt)return void E();if(t&&t.data===ii&&(a=ii,t=t.delegateTarget),typeof a===Gt&&typeof t===Gt&&(lt=0),Wt=1,lt=0,de=e(".easyrecipe:first",Bt),a!==ti&&de.length>1&&(de=e(de[a]),lt=a),o=0,x=e.support.cors?"json":"jsonp",e.ajax(Xt,{dataType:x,data:{v:ke.version,p:o,u:ke.wpurl},success:f,error:h}),J=!1,typeof tinyMCE!==Gt&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()&&(J=!0),!J)return void alert("You must use the Visual Editor to add or update an EasyRecipe");if(G.val(""),re.val(""),se.val(""),le.val(""),ae.val(""),K.val(""),ee.val(""),te.val(""),ie.val(""),Z.val(""),X.val(""),Ve.val(""),Je.val(""),Qe.val(""),Ge.val(""),Ke.val(""),Ze.val(""),Xe.val(""),et.val(""),tt.val(""),it.val(""),nt.val(""),at.val(""),rt.val(""),a!==ti&&1===de.length)Ce.easyrecipeDialog("option","title","Update Recipe"),Me.hide(),je.hide(),Fe.show(),ue=!0;else{if(ce=V.getContent(),!bt&&(T=It.exec(ce)||Nt.exec(ce)||St.exec(ce),T||(D=e("#hasRecipe").is(":checked")),T||D||(s=Bt.find(".hrecipe").filter(".f1",".f2"),s.length>0&&(P=-1!==s.text().indexOf("recipage.com"))),T||D||P))return D?(ve="recipress",fe=ke.postID):P?(ve="recipage",fe=ke.postID):(ve=T[2],fe=T[3]),Oe.hide(),He.click(v),qe.click(g),m=Ut[ve],k=e("#txtERCNVText1",Ie),k.html(k.html().replace("#plugin#",m)),Ue.html(""),dt=-1,Pe=[],Ue.html(ei),void Ie.dialog(Kt);ke.isGuest&&(A=e("#inpERAuthor").val()||"",ae.val(A)),je.show(),Fe.hide(),Me.show(),Ce.easyrecipeDialog("option","title","Add a New Recipe"),ue=!1,ye!==!1?U=y(ye):(S=V.selection.getContent(),S.length>20&&(U=y(S))),U.summary&&(M=U.summary),U.ingredients&&(O=U.ingredients),U.instructions&&(H=U.instructions),U.notes&&(q=U.notes),de=p()}for(_=de,de=e("<div>"+de.html()+"</div>"),e("#inpERCuisine").autocomplete({source:e.parseJSON(ke.cuisines)}).autocomplete("widget").wrap('<div class="easyrecipeUI" />'),e("#inpERType").autocomplete({source:e.parseJSON(ke.recipeTypes)}).autocomplete("widget").wrap('<div class="easyrecipeUI" />'),si=!1,yt.off("change",i).on("change",i),ht=a!==ti?de.find(".endeasyrecipe").text():ke.version,""===ht&&(ht="2.2"),r=!!de.find("div.endeasyrecipe").attr("title"),ni=e('link[itemprop="image"]',de).attr("href")||"",Ue.html(""),dt=-1,ft="",Pe=[],Bt.find("img").each(function(t){var i=!1;"3">ht?e(this).hasClass("photo")&&(i=!0):i=this.src===ni,b(this.src,t,i)}),u=Bt.contents().text(),T=_t.exec(u),I=Pe.length;null!==T;)d=Dt.exec(T[0]),null!==d&&(c=d[1],b(c,I),ht>"3"?ni===c&&(Pe[I].parent().addClass(Zt),dt=I):Lt.test(T[0])&&(Pe[I].parent().addClass(Zt),dt=I,ni=c),I++),T=_t.exec(u);""!==ni&&w(ni,!0),he=e("#set-post-thumbnail").find("img").attr("src"),he&&w(he,-1===dt),-1===dt&&Pe.length>0&&(dt=0,ni=ft,Pe[0].parent().addClass(Zt)),Ue.click(function(){xe.dialog(Kt)}),0===Pe.length?Ue.html(ei):-1===dt&&Pe[0].parent().addClass(Zt),Ot=[],Mt=[],N=de.find(".ERName .fn").html()||de.find(".ERName").html(),G.val(N&&""!==N?l(n(N)):l(n(e("#title").val()))),re.val(l(n(de.find(".type").html()))),ae.val(l(n(de.find(".author").html()))),""===ae.val()&&ae.val(l(e.parseJSON(ke.author))),se.val(l(n(de.find(".cuisine").html()))),K.val(l(M+n(de.find(".summary").html()))),r&&K.val(l(n(de.find(".ERSSummary").html()))),ht>"3"?(C=de.find('time[itemprop="prepTime"]').html()||"",ee.val(n(C)),C=de.find('time[itemprop="cookTime"]').html()||"",te.val(n(C))):(C=de.find(".preptime").html()||"",T=Tt.exec(C),ee.val(null!==T?n(T[1]):""),C=de.find(".cooktime").html()||"",T=Tt.exec(C),te.val(null!==T?n(T[1]):"")),ie.val(n(de.find(".yield").html())),de.find(".ingredients li").each(function(t,i){O+=e(i).hasClass(Yt)?"!"+l(n(i.innerHTML))+"\n":l(n(i.innerHTML))+"\n"}),r&&""===O&&de.find(".ingredient,.ERSIngredients .ERSSectionHead").each(function(t,i){O+=e(i).hasClass("ERSSectionHead")?"!"+l(n(i.innerHTML))+"\n":l(n(i.innerHTML))+"\n"}),Z.val(O),de.find(".instructions li, .instructions .ERSeparator").each(function(t,i){R=e.trim(i.innerHTML.replace(/^[ 0-9.]*(.*)$/gi,"$1")),H+=e(i).hasClass(Yt)?"!"+R+"\n":R+"\n"}),r&&""===H&&de.find(".instruction,.ERSInstructions .ERSSectionHead").each(function(t,i){R=e.trim(i.innerHTML.replace(/^[ 0-9.]*(.*)$/gi,"$1")),H+=e(i).hasClass("ERSSectionHead")?"!"+R+"\n":R+"\n"}),X.val(l(n(H))),Ve.val(n(de.find(".servingSize").html())),Je.val(n(de.find(".calories").html())),Qe.val(n(de.find(".fat").html())),Ge.val(n(de.find(".saturatedFat").html())),Ke.val(n(de.find(".unsaturatedFat").html())),Ze.val(n(de.find(".transFat").html())),Xe.val(n(de.find(".carbohydrates").html())),et.val(n(de.find(".sugar").html())),tt.val(n(de.find(".sodium").html())),it.val(n(de.find(".fiber").html())),nt.val(n(de.find(".protein").html())),at.val(n(de.find(".cholesterol").html())),L=_.parent().prop("data-rating"),Q.val(e.isNumeric(L)?L:"5"),R=(n(de.find(".ERNotes").html())||"").replace(/<\/p>\n*<p>/gi,"\n\n").replace(/(?:<p>|<\/p>)/gi,"").replace(/<br *\/?>/gi,"\n"),""===R&&""!==q&&(R=q),R=l(R),R=R.replace(/\[br(?: ?\/)?]/gi,"\n"),rt.val(l(R)),r&&""===R&&(R=(n(de.find(".ERSNotes").html())||"").replace(/<\/p>\n*<p>/gi,"\n\n").replace(/(?:<p>|<\/p>)/gi,"").replace(/<br *\/?>/gi,"\n"),""===R&&""!==q&&(R=q),R=l(R),R=R.replace(/\[br(?: ?\/)?]/gi,"\n"),R=R.replace(/ data-mce-href="[^"]+?"/gi,""),R=R.replace(/<a ([^>]+?)>([^<]+?)<\/a>/gi,"[url $1]$2[/url]"),rt.val(l(R))),gt&&(gt.name&&G.val(l(n(gt.name))),gt.author&&ae.val(l(gt.author)),gt.summary&&K.val(l(gt.summary)),gt["yield"]&&ie.val(n(gt["yield"])),gt.type&&re.val(l(n(gt.type))),gt.cuisine&&se.val(l(n(gt.cuisine))),gt.prepTime&&ee.val(n(gt.prepTime)),gt.cookTime&&te.val(n(gt.cookTime)),gt.summary&&K.val(l(gt.summary))),de=_,Ce.easyrecipeDialog(Kt),Ce.easyrecipeDialog("option","position","center")}}function T(t){return Wt=e(".easyrecipe",Bt).length,Vt||0===Wt?void k(t,ti):void xe.dialog(Kt)}function C(){Ce.easyrecipeDialog(Jt)}function x(){var e=confirm("Are you sure you want to delete this recipe?");e&&(de.remove(),de=!1,si=!1),Ce.easyrecipeDialog(Jt)}function I(){var t,i=e("#inpERPaste"),n=i.val();t=y(n),(0!==t.ingredients.length||0!==t.instructions.length)&&(ye=n,i.val(""),gt={name:o(a(G.val())),author:o(r(ae)),"yield":r(ie),type:o(r(re)),cuisine:o(r(se)),summary:o(r(K)),servesize:r(Ve),prepTime:ee.val(),cookTime:te.val()},si=!1,Ce.easyrecipeDialog(Jt),T(null))}function N(t){var i=e(t.target).parent(),n=i.parent();i.hasClass("easyrecipeAbove")?n.before(ai):n.after(ai),i.remove(),S()}function S(){var t,i,n;i=e("<div>"+V.getContent()+"</div>"),i.find(".easyrecipeAbove,.easyrecipeBelow").remove(),t=i.find(".easyrecipe"),t.each(function(){var t=e(this);t.parent().hasClass("easyrecipeWrapper")&&t.unwrap(),vt(t)}),n=i.html(),V.setContent(n),t=Bt.find(".easyrecipe"),t.on("mousedown",null,ii,k),Bt.find(".ERInsertLine").on(Qt,N)}function A(e){var t,i,n,a,r;if(a=e.prev(),r=e.next(),i=0===a.length||a.hasClass("easyrecipe")||a.hasClass("easyrecipeWrapper"))try{i=!(e[0].previousSibling&&3===e[0].previousSibling.nodeType)}catch(s){}if(n=0===r.length||r.hasClass("easyrecipe")||r.hasClass("easyrecipeWrapper"))try{n=!(e[0].nextSibling&&3===e[0].nextSibling.nodeType)}catch(s){}(i||n)&&(e.wrap('<div class="easyrecipeWrapper mceNonEditable" />'),t=e.parent(),i&&(t.prepend('<div class="easyrecipeAbove mceNonEditable"><input class="ERInsertLine mceNonEditable" type="button" value="Insert line above" /></div>'),t.find("input").on(Qt,N),ri.push(t.find(".easyrecipeAbove")[0])),n&&(t.append('<div class="easyrecipeBelow mceNonEditable"><input class="ERInsertLine mceNonEditable" type="button" value="Insert line below" /></div>'),t.find("input").on(Qt,N)))}function _(t){e(".easyrecipeAbove,.easyrecipeBelow",t).remove(),e(".easyrecipe",t).unwrap()}function L(){var t=e(".easyrecipe",Bt);0!==t.length&&(t.on("mousedown",null,ii,k),S())}function D(){var t,i,n,s,l,u,p,h,f,v,m,g,y,E,b="",R="",w=0,k="",T=[];if(Ne.find(".erdeleteme").remove(),d(ee)&&d(te)){for(i=e.trim(ee.val()),""!==i?(Ae=Ct.exec(i),n=Ae[1]?parseInt(Ae[1],10):0,s=Ae[2]?parseInt(Ae[2],10):0,w=60*n+s,l=n>0?n+"H":"",u=s>0?s+"M":"",R="PT"+l+u):i=!1,t=e.trim(te.val()),""!==t?(Ae=Ct.exec(t),n=Ae[1]?parseInt(Ae[1],10):0,s=Ae[2]?parseInt(Ae[2],10):0,l=n>0?n+"H":"",u=s>0?s+"M":"",w+=60*n+s,b="PT"+l+u):t=!1,w>0?(n=Math.floor(w/60),s=w%60,l=n>0?n+" hour":"",n>1&&(l+="s"),u=s>0?s+" min":"",s>1&&(u+="s"),w=e.trim(l+" "+u),l=n>0?n+"H":"",u=s>0?s+"M":"",k="PT"+l+u):w=!1,p=Z.val().split("\n"),f=0;f<p.length;f++)h=p[f],""!==h&&("!"===h.charAt(0)?(v=!0,h=h.substr(1)):v=!1,T.push({ingredient:o(a(h)),hasHeading:v}));for(p=X.val().split("\n"),g=[],m={INSTRUCTIONS:[]},f=0;f<p.length;f++)h=e.trim(p[f].replace(/^[ 0-9\.]*(.*)$/gi,"$1")),""!==h&&("!"===h.charAt(0)?((m.INSTRUCTIONS.length>0||m.heading)&&g.push(m),h=h.substr(1),m={},m.INSTRUCTIONS=[],m.heading=o(a(h))):m.INSTRUCTIONS.push({instruction:o(a(h))}));(m.INSTRUCTIONS.length>0||m.heading)&&g.push(m),h=r(rt),h&&(h=h.replace(/\n/g,"[br]")),y={version:ke.version,hasPhoto:""!==ni,photoURL:ni,name:o(a(G.val())),author:o(r(ae)),preptime:i,cooktime:t,totaltime:w,preptimeISO:R,cooktimeISO:b,totaltimeISO:k,"yield":r(ie),type:o(r(re)),cuisine:o(r(se)),summary:o(r(K)),servesize:r(Ve),calories:r(Je),fat:r(Qe),satfat:r(Ge),unsatfat:r(Ke),transfat:r(Ze),carbs:r(Xe),sugar:r(et),sodium:r(tt),fiber:r(it),protein:r(nt),cholesterol:r(at),notes:o(h),rating:Q.length?Q.val():"0",INGREDIENTS:T,STEPS:g},""===y.name&&(y.name=!1),E=c(ke.recipeTemplate,y),-1===lt?de=e($t,Bt):(de=e(".easyrecipe",Bt),de.length>0&&(de=e(de[lt]))),de.before(E),de.remove(),de=!1,st.css("display","inline-block"),si=!1,Ce.easyrecipeDialog(Jt),Wt=e(".easyrecipe",Bt).length,L()}}function P(t,i,n){var a,r,s;if(gt=!1,tinymce.majorVersion>"3"){if(!ne[i.id]&&"wp_mce_fullscreen"!==i.id)return e("#"+i.controlManager.buttons.easyrecipeTest._id).hide(),e("#"+i.controlManager.buttons.easyrecipeEdit._id).hide(),void e("#"+i.controlManager.buttons.easyrecipeAdd._id).hide();ne[i.id]?(Bt=e("#"+i.id+"_ifr").contents(),Se=1e4,r=e("#"+i.controlManager.buttons.easyrecipeTest._id),st=e("#"+i.controlManager.buttons.easyrecipeEdit._id)):(Bt=e("#wp_mce_fullscreen_ifr").contents(),Se=200001,r=e("#mce_fullscreen_easyrecipeTest"),st=e("#mce_fullscreen_easyrecipeEdit"))}else{if(!ne[i.editorId]&&"wp_mce_fullscreen"!==i.editorId)return e("#"+i.editorId+"_easyrecipeTest").hide(),e("#"+i.editorId+"_easyrecipeEdit").hide(),void e("#"+i.editorId+"_easyrecipeAdd").hide();ne[i.editorId]?(Bt=e("#"+i.editorId+"_ifr").contents(),Se=1e4,r=e("#"+i.editorId+"_easyrecipeTest"),st=e("#"+i.editorId+"_easyrecipeEdit")):(Bt=e("#wp_mce_fullscreen_ifr").contents(),Se=200001,r=e("#mce_fullscreen_easyrecipeTest"),st=e("#mce_fullscreen_easyrecipeEdit"))}Ne=e("body",Bt),s=e(".easyrecipe",Bt),V=tinyMCE.activeEditor,s.each(function(){var t=e(this);t.addClass("mceNonEditable"),t.find(".ERRatingOuter").remove(),t.find(".ERHDPrint").remove(),t.find(".ERLinkback").remove(),t.find(".endeasyrecipe").attr("title")}),Wt=s.length,Wt>0&&""!==ke.testURL?r.show():r.hide(),Wt>0?st.css("display","inline-block"):st.hide(),Bt.hasERCSS||(a=ke.isDebug?"":"-min",e("head",Bt).append('<link rel="stylesheet" type="text/css" href="'+ke.easyrecipeURL+"/css/easyrecipe-entry"+a+".css?ver="+ke.version+'" />'),Bt.hasERCSS=!0),L()}function U(){$e.toggleClass("ERNone"),Ye.toggleClass("ERContract")}function M(){Be.toggleClass("ERNone"),We.toggleClass("ERContract")}function O(t,i){var n,a,r;i&&(i=e(i),url=e.trim(i.find("#er-link-url").val()),n=e.trim(i.find("#er-link-text").val()),url&&n&&(a=i.find("#er-link-target")[0].checked?' target="_blank"':"",r='href="'+url+'"'+a,Mt.push(r),we.val(Re.substring(0,Ee)+"[url:"+Mt.length+"]"+n+"[/url]"+Re.substring(be)),we[0].focus())),Pt=!1}function H(e){var t,i,n;ke.isEntryDialog&&(t=e.title?' title="'+e.title+'"':"",i=e.target?' target="'+e.target+'"':"",n='href="'+e.href+'"'+i+t,Mt.push(n),we.val(Re.substring(0,Ee)+"[url:"+Mt.length+"]"+Re.substring(Ee,be)+"[/url]"+Re.substring(be)),we[0].focus(),Ne.find(".erdeleteme").remove())}function q(t,i){var n,a,r,s,l,o,c,d,u,p,h,f,v,m,g;a=t.sizes[i.size],r=a.url,o=a.width,c=a.height,b(r,Pe.length),d=tinymce.html.Entities.encodeAllRaw(e.trim(t.title)),d=d.replace(/&quot;/g,"&amp;quot;"),u=tinymce.html.Entities.encodeAllRaw(e.trim(t.alt)),u=u.replace(/&quot;/g,"&amp;quot;"),p=tinymce.html.Entities.encodeAllRaw(e.trim(t.caption)),d=""!==d?' title="'+d+'"':"",u=""!==u?' alt="'+u+'"':"",h="align"+i.align,l=t.uploadedTo?'id="attachment_'+t.uploadedTo+'" ':"",n=Re.substring(0,Ee),""!==p?(Ht.push(l+'align="'+h+'" width="'+o+'"'),qt.push(p),f="[cap:"+Ht.length+"]",v="[/cap]",h=""):f=v="","none"===i.link?s=m=g="":"file"===i.link?s=r:"post"===i.link?s=t.link:"custom"===i.link&&(s=i.linkUrl),""!==s&&(Mt.push('href="'+s+'"'),m="[url:"+Mt.length+"]",g="[/url]"),Ot.push('src="'+r+'" width="'+o+'" height="'+c+'" class="'+h+" size-"+i.size+'"'+d+u),n+=f+m+"[img:"+Ot.length+"]"+g+v,n+=Re.substring(be),we.val(n),we[0].focus()}function j(e){e.stopPropagation(),E()}function F(){gt=!1,T()}function z(){gt=!1,k()}function $(){Wt>0&&!ke.noHTMLWarn&&(ke.noHTMLWarn=!0,Te.dialog(Kt))}function Y(t){var i,n,a,r,s=e("#wp-preview",t.target).val();return"dopreview"===s?!0:0===Wt?!0:(a=tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden(),a?n=e("<div>"+V.getContent()+"</div>"):(r=e("#wp-content-editor-container").find("textarea"),n=e("<div>"+r.val()+"</div>")),_(e(".easyrecipeWrapper",n)),e(".easyrecipe",n).removeClass("mceNonEditable"),i=e.trim(n.html()),a?V.setContent(i):r.val(i),!0)}function B(t){var i;""!=t.target.innerHTML&&(i=e(t.target).find("img").attr("src"),i&&w(i,!1))}function W(t){var i,n,a,r;for(i=t[0],n=0;n<i.addedNodes.length;n++)if(a=e(i.addedNodes[n].innerHTML),r=a.find("img").attr("src")){w(r,!1);break}}var V,J,Q,G,K,Z,X,ee,te,ie,ne,ae,re,se,le,oe,ce,de,ue,pe,he,fe,ve,me,ge,ye,Ee,be,Re,we,ke,Te,Ce,xe,Ie,Ne,Se,Ae,_e,Le,De,Pe,Ue,Me,Oe,He,qe,je,Fe,ze,$e,Ye,Be,We,Ve,Je,Qe,Ge,Ke,Ze,Xe,et,tt,it,nt,at,rt,st,lt,ot,ct,dt,ut,pt,ht,ft,vt,mt,gt,yt,Et=jQuery.trim,bt=!1,Rt=/<!-- START INCLUDEIF (!?)([_a-z][_0-9a-z]{0,19}) -->/i,wt=/^#([_a-z][_0-9a-z]{0,19})#/im,kt=/<!-- START REPEAT ([_a-zA-Z][_0-9a-zA-Z]{0,19}) -->/m,Tt=/^([^<]*)/,Ct=/^(?:([0-9]+) *(?:h|hr|hrs|hour|hours))? *(?:([0-9]+) *(?:m|mn|mns|min|mins|minute|minutes))?$/i,xt=/^([0-9]+)$/,It=/(.*)\[amd-(recipeseo|zlrecipe)-recipe:([0-9]+)](.*)/,Nt=/(.*)\[(yumprint)-recipe\s+id='(\d+)'](.*)/i,St=/(.*)\[(gmc)_recipe\s+([0-9]+)](.*)/,At=/PT(?:([0-9]*)+H)?([0-9]+)+M/i,_t=/\[(?:img) +(?:[^\]]+?)]/gi,Lt=/class\s*=\s*"(?:[^"]+ )?photo[ "]/i,Dt=/src\s*=\s*" *([^"]+?) *"/i,Pt=!1,Ut={recipeseo:"Recipe SEO",ziplist:"ZipList",zlrecipe:"ZipList",yumprint:"Yumprint Recipe Card",recipress:"ReciPress",gmc:"GetMeCooking",recipage:"ReciPage"},Mt=[],Ot=[],Ht=[],qt=[],jt="Switch to the Visual Editor to add or edit an EasyRecipe",Ft=null,zt='<div class="easyrecipeholder">EasyRecipe</div>',$t=".easyrecipeholder",Yt="ERSeparator",Bt=null,Wt=0,Vt=!0,Jt="close",Qt="click",Gt="undefined",Kt="open",Zt="ERPhotoSelected",Xt="http://www.easyrecipeplugin.com/checkUpdates.php",ei='<div class="divERNoPhotos">There are no photos in this post<br />Add photos anywhere in the post</div>',ti=-1,ii=-2,ni="",ai="&nbsp;",ri=[],si=!1;e(function(){var i,n,a,r=null;ke=EASYRECIPE,ke.dialogs=e("<div>").addClass("easyrecipeUI").prop("id","easyrecipeUI").appendTo("body"),ke.isGuest&&ke.dialogs.addClass("easyrecipeDlgAbsolute"),e.widget("custom.easyrecipeDialog",e.ui.dialog,{_allowInteraction:function(t){return this._super(t)||!!e(t.target).parents(".media-modal-content, #wp-link").length||!!e(t.target).parents("form#er-link").length}}),ke.button!==e.fn.button&&(r=e.fn.button,e.fn.button=ke.button),Ce=e("#easyrecipeEntry"),xe=e("#easyrecipeUpgrade"),Te=e("#easyrecipeHTMLWarn"),ne=ke.isGuest?{guestpost:1}:{content:1,aviaTBcontent:1},Ce.easyrecipeDialog({autoOpen:!1,width:655,modal:!0,appendTo:ke.dialogs,dialogClass:"easyrecipeEntry",beforeClose:function(){if(si){if(!window.confirm("Are you sure you want to close without saving the recipe?"))return!1;si=!1}return!0},close:function(){ke.isEntryDialog=!1,Ne.find(".erdeleteme").remove(),de&&!ue&&de.remove(),de=!1,e(".easyrecipeEntry").filter(function(){return""===e(this).text()}).remove()},open:function(){ke.isEntryDialog=!0,_e.tabs({active:0,beforeActivate:t}),setTimeout(function(){var t=e(".easyrecipeEntry"),i=t.offset();i.top<ut&&(i.top=ut,t.offset(i))},250)}}),yt=e("#divERContainer").show(),Te.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyrecipeHTMLWarn",appendTo:ke.dialogs,close:function(){e(".easyrecipeHTMLWarn").filter(function(){return""===e(this).text()}).remove()}}),e(".divERHTMLWarnContainer").show(),xe.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyrecipeUpgrade",appendTo:ke.dialogs,close:function(){e(".easyrecipeUpgrade").filter(function(){return""===e(this).text()}).remove()}}),e(".divERUPGContainer").show(),Ie=e("#easyrecipeConvert"),Oe=e("#divERCNVSpinner"),He=e("#btnERCNVCancel"),qe=e("#btnERCNVOK"),Oe.hide(),Ie.dialog({autoOpen:!1,width:390,modal:!0,dialogClass:"easyrecipeConvert",appendTo:ke.dialogs,close:function(){e(".easyrecipeConvert").filter(function(){return""===e(this).text()}).remove()}}),e("#divERCNVContainer").show(),e(window).bind("easyrecipeadd",F),e(window).bind("easyrecipeedit",z),e(window).bind("easyrecipeload",P),De=e("#divERNext"),Le=e("#btnERButtons"),_e=e("#ERDTabs"),Ue=e("#divERPhotos"),e("input:submit",".easyrecipeUI").button(),pe=e("#ed_toolbar"),Q=e("#inpERRating"),G=e("#inpERName"),ae=e("#inpERAuthor"),re=e("#inpERType"),se=e("#inpERCuisine"),le=e("#inpERTags"),K=e("textarea#taERSummary"),Z=e("textarea#taERIngredients"),X=e("textarea#taERInstructions"),ee=e("#inpERPrepTime"),te=e("#inpERCookTime"),ie=e("#inpERYield"),Ve=e("#inpERServeSize"),Je=e("#inpERCalories"),Qe=e("#inpERFat"),Ge=e("#inpERSatFat"),Ke=e("#inpERUnsatFat"),Ze=e("#inpERTransFat"),Xe=e("#inpERCarbs"),et=e("#inpERSugar"),tt=e("#inpERSodium"),it=e("#inpERFiber"),nt=e("#inpERProtein"),at=e("#inpERCholesterol"),rt=e("textarea#taERNotes"),ot=e("#divERAddImageURL"),a=e("#lnkERPhotoURL"),oe=e(".ERTimeError"),je=e("#divERAdd"),Fe=e("#divERChange"),ze=e("#divERHeader"),$e=e("#divEROther"),Ye=e("#divEROtherLabel"),Be=e("#divERNotes"),We=e("#divERNotesLabel"),Me=e("#ERDPasteTab"),ct=e("#fldERAPUImageURL"),e("#btnERAdd").click(D),e("#btnERNext").click(s),e("#btnERChange").click(D),e("#btnERDelete").click(x),e("#btnERCancel").click(C),a.click(function(){xe.dialog(Kt)}),e("#btnERAIUCancel").click(function(){ot.hide()}),e("#btnERAIUOK").click(R),Ye.click(U),We.click(M),ee.change(function(t){d(e(t.target))}),te.change(function(t){d(e(t.target))}),e("#btnERPaste").click(I),ut=e("#wpadminbar").height(),pt=e("#divEREditBtns").on("mousedown","li",j),yt.find('input[type="text"], textarea').on("blur",function(){Ft=null}).on("focus",function(){Ft=e(this)}),ke.wpVersion<"4.2"?ke.insertLink=H:e(document).bind("erlink-close",O),me=T,ge=k,ye=!1,ke.insertUploadedImage=q,vt=A,mt=b,ke.addListener=L,Te.find("input").on(Qt,function(){Te.dialog(Jt)}),e("#wp-content-editor-tools").on(Qt,"#content-html",$),e("#post").on("submit",Y),null!==r&&(e.fn.button=r),i=e("#postimagediv").find(".inside"),window.MutationObserver&&i.length>0?(n=new MutationObserver(W),n.observe(i[0],{childList:!0})):i.on("DOMSubtreeModified",B),window.QTags&&QTags.addButton("easyrecipe","EasyRecipe",function(){alert(jt)},"","","",900)})}(jQuery),/*! EasyRecipe 3.3.3074 Copyright (c) 2015 BoxHill LLC */
window.EASYRECIPE=window.EASYRECIPE||{},function(e){"use strict";var t,i,n,a,r,s,l={},o={},c="ontouchend"in document;t={timeToTriggerRiver:150,minRiverAJAXDuration:200,riverBottomThreshold:5,keySensitivity:100,lastSearch:"",textarea:"",rename:function(i){i.each(function(){var i,n=e(this),a=this,r=n.children();r.length>0&&t.rename(r),a.id&&(i=a.id.match(/^wp-link(.*)$/),a.id=null!=i?"er-link"+i[1]:"er-"+a.id)})},init:function(){function a(){var t=e.trim(l.url.val());t&&r!==t&&!/^(?:[a-z]+:|#|\?|\.|\/)/.test(t)&&(l.url.val("http://"+t),r=t)}var c,d,u;s=EASYRECIPE,s.erLink=t,u=e("#wp-link-wrap"),c=u.clone(),t.rename(c),c.find("#search-results").attr("id","#er-search-results"),c.find("#most-recent-results").attr("id","#er-most-recent-results"),c.find("#query-notice-message").attr("id","#er-query-notice-message"),u.after(c),d=e("#wp-link-backdrop").clone(),d[0].id="er-link-backdrop",c.before(d),e("#easyrecipeUI").find(".ui-dialog.easyrecipeEntry").on("focusin",function(){l.url.focus()}),l.wrap=c,l.dialog=e("#er-link"),l.backdrop=d,l.submit=e("#er-link-submit"),l.close=e("#er-link-close"),l.text=e("#er-link-text"),l.url=e("#er-link-url"),l.nonce=e("#_ajax_linking_nonce"),l.openInNewTab=e("#er-link-target"),l.search=e("#er-link-search"),o.search=new n(e("#er-search-results")),o.recent=new n(e("#er-most-recent-results")),o.elements=l.dialog.find(".query-results"),l.queryNotice=e("#er-query-notice-message"),l.queryNoticeTextDefault=l.queryNotice.find(".query-notice-default"),l.queryNoticeTextHint=l.queryNotice.find(".query-notice-hint"),l.dialog.keydown(t.keydown),l.dialog.keyup(t.keyup),l.submit.click(function(e){e.preventDefault(),t.close(l.wrap)}),l.close.add(l.backdrop).add("#er-link-cancel a").click(function(e){e.preventDefault(),t.close()}),e("#er-link-search-toggle").on("click",t.toggleInternalLinking),o.elements.on("river-select",t.updateFields),l.search.on("focus.erlink",function(){l.queryNoticeTextDefault.hide(),l.queryNoticeTextHint.removeClass("screen-reader-text").show()}).on("blur.erlink",function(){l.queryNoticeTextDefault.show(),l.queryNoticeTextHint.addClass("screen-reader-text").hide()}),l.search.keyup(function(){var e=this;window.clearTimeout(i),i=window.setTimeout(function(){t.searchInternalLinks.call(e)},500)}),l.url.on("paste",function(){setTimeout(a,0)}),l.url.on("blur",a)},open:function(i){e(document.body).addClass("modal-open"),t.range=null,l.wrap.show(),l.backdrop.show(),o.search.refresh(),o.recent.refresh(),o.recent.ul.children().length||o.recent.ajax(),r="",l.url.val(r),l.submit.val(wpLinkL10n.update),l.text.val(i||""),l.wrap.addClass("has-text-field"),e(document).trigger("erlink-open",l.wrap),c?l.url.focus().blur():l.url.focus()[0].select()},close:function(t){e(document.body).removeClass("modal-open"),l.backdrop.hide(),l.wrap.hide(),r=!1,e(document).trigger("erlink-close",t)},updateFields:function(e,t){l.url.val(t.children(".item-permalink").val())},searchInternalLinks:function(){var i,n=e(this),a=n.val();if(a.length>2){if(o.recent.hide(),o.search.show(),t.lastSearch==a)return;t.lastSearch=a,i=n.parent().find(".spinner").addClass("is-active"),o.search.change(a),o.search.ajax(function(){i.removeClass("is-active")})}else o.search.hide(),o.recent.show()},next:function(){o.search.next(),o.recent.next()},prev:function(){o.search.prev(),o.recent.prev()},keydown:function(i){var n,a,r=e.ui.keyCode;r.ESCAPE===i.keyCode?(t.close(),i.stopImmediatePropagation()):r.TAB===i.keyCode&&(a=i.target.id,"er-link-submit"!==a||i.shiftKey?"er-link-close"===a&&i.shiftKey&&(l.submit.focus(),i.preventDefault()):(l.close.focus(),i.preventDefault())),(i.keyCode===r.UP||i.keyCode===r.DOWN)&&(!document.activeElement||"er-link-title-field"!==document.activeElement.id&&"er-url-field"!==document.activeElement.id)&&(n=i.keyCode===r.UP?"prev":"next",clearInterval(t.keyInterval),t[n](),t.keyInterval=setInterval(t[n],t.keySensitivity),i.preventDefault())},keyup:function(i){var n=e.ui.keyCode;(i.which===n.UP||i.which===n.DOWN)&&(clearInterval(t.keyInterval),i.preventDefault())},delayedCallback:function(e,t){var i,n,a,r;return t?(setTimeout(function(){return n?e.apply(r,a):void(i=!0)},t),function(){return i?e.apply(this,arguments):(a=arguments,r=this,void(n=!0))}):e},toggleInternalLinking:function(e){var t=l.wrap.hasClass("search-panel-visible");l.wrap.toggleClass("search-panel-visible",!t),setUserSetting("wplink",t?"0":"1"),l[t?"url":"search"].focus(),e.preventDefault()}},n=function(t,i){var n=this;this.element=t,this.ul=t.children("ul"),this.contentHeight=t.children("#er-link-selector-height"),this.waiting=t.find(".river-waiting"),this.change(i),this.refresh(),e("#er-link .query-results, #er-link #er-link-selector").scroll(function(){n.maybeLoad()}),t.on("click","li",function(t){n.select(e(this),t)})},e.extend(n.prototype,{refresh:function(){this.deselect(),this.visible=this.element.is(":visible")},show:function(){this.visible||(this.deselect(),this.element.show(),this.visible=!0)},hide:function(){this.element.hide(),this.visible=!1},select:function(e,t){var i,n,a,r;e.hasClass("unselectable")||e==this.selected||(this.deselect(),this.selected=e.addClass("selected"),i=e.outerHeight(),n=this.element.height(),a=e.position().top,r=this.element.scrollTop(),0>a?this.element.scrollTop(r+a):a+i>n&&this.element.scrollTop(r+a-n+i),this.element.trigger("river-select",[e,t,this]))},deselect:function(){this.selected&&this.selected.removeClass("selected"),this.selected=!1},prev:function(){var e;this.visible&&this.selected&&(e=this.selected.prev("li"),e.length&&this.select(e))},next:function(){var t;this.visible&&(t=this.selected?this.selected.next("li"):e("li:not(.unselectable):first",this.element),t.length&&this.select(t))},ajax:function(e){var i=this,n=1==this.query.page?0:t.minRiverAJAXDuration,a=t.delayedCallback(function(t,n){i.process(t,n),e&&e(t,n)},n);this.query.ajax(a)},change:function(e){this.query&&this._search==e||(this._search=e,this.query=new a(e),this.element.scrollTop(0))},process:function(t,i){var n="",a=!0,r="",s=1==i.page;t?e.each(t,function(){r=a?"alternate":"",r+=this.title?"":" no-title",n+=r?'<li class="'+r+'">':"<li>",n+='<input type="hidden" class="item-permalink" value="'+this.permalink+'" />',n+='<span class="item-title">',n+=this.title?this.title:wpLinkL10n.noTitle,n+='</span><span class="item-info">'+this.info+"</span></li>",a=!a}):s&&(n+='<li class="unselectable no-matches-found"><span class="item-title"><em>'+wpLinkL10n.noMatchesFound+"</em></span></li>"),this.ul[s?"html":"append"](n)},maybeLoad:function(){var e=this,i=this.element,n=i.scrollTop()+i.height();!this.query.ready()||n<this.contentHeight.height()-t.riverBottomThreshold||setTimeout(function(){var n=i.scrollTop(),a=n+i.height();!e.query.ready()||a<e.contentHeight.height()-t.riverBottomThreshold||(e.waiting.addClass("is-active"),i.scrollTop(n+e.waiting.outerHeight()),e.ajax(function(){e.waiting.removeClass("is-active")}))},t.timeToTriggerRiver)}}),a=function(e){this.page=1,this.allLoaded=!1,this.querying=!1,this.search=e},e.extend(a.prototype,{ready:function(){return!(this.querying||this.allLoaded)},ajax:function(t){var i=this,n={action:"wp-link-ajax",page:this.page,_ajax_linking_nonce:l.nonce.val()};this.search&&(n.search=this.search),this.querying=!0,e.post(ajaxurl,n,function(e){i.page++,i.querying=!1,i.allLoaded=!e,t(e,n)},"json")}}),e(document).ready(t.init)}(jQuery);