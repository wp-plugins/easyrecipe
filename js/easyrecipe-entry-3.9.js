/*! EasyRecipe 3.2.2929 Copyright (c) 2015 BoxHill LLC */
window.EASYRECIPE=window.EASYRECIPE||{},EASYRECIPE.widget=EASYRECIPE.widget||jQuery.widget,EASYRECIPE.button=EASYRECIPE.button||jQuery.fn.button,function(e){function i(e,i){var t;switch(Mi.show(),ut.hide(),Pi.show(),t=i.newTab?i.newTab.index():i.index){case 0:ut.css("right","10px"),ut.show();break;case 3:ut.css("right","inherit"),Pi.hide(),ut.show();break;case 4:Mi.hide()}}function t(){Et.off("change",t),on=!0}function n(e){return e?(e+="",e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," ")):""}function a(i){return i?e("<div />").text(i).html():""}function r(i){return e.trim(a(i.val()))||!1}function s(){var e=Ai.tabs("option","active");Ai.tabs("option","active",++e)}function o(e){var i,t=/\[img +(.*?) *\/?]/i,n=/\[url ([^\]]+)](.*?\[\/url])/i,a=/\[cap ([^\]]+)](.*])(.*?)\[\/cap]/i;if(""!==e){for(i=t.exec(e);null!==i;)Ot.push(i[1].replace(/</g,"&lt;").replace(/>/g,"&gt;")),e=e.replace(t,"[img:"+Ot.length+"]"),i=t.exec(e);for(i=n.exec(e);null!==i;)Ut.push(i[1]),e=e.replace(n,"[url:"+Ut.length+"]$2"),i=n.exec(e);for(i=a.exec(e);null!==i;)Dt.push(i[1]),Ht.push(i[3].replace(/</g,"&lt;").replace(/>/g,"&gt;")),e=e.replace(a,"[cap:"+Dt.length+"]$2[/cap]"),i=a.exec(e)}return e}function l(e){var i,t,n,a=/\[img:(\d+)]/i,r=/\[url:(\d+)](.*?)\[\/url]/i,s=/\[cap:(\d+)](.*])\[\/cap]/i;if(e){for(n=a.exec(e);null!==n;)i=Ot[n[1]-1].replace(/&quot;/g,"&amp;quot;"),e=e.replace(a,"[img "+i+"]"),n=a.exec(e);for(n=r.exec(e);null!==n;)i=Ut[n[1]-1],e=e.replace(r,"[url "+i+"]$2[/url]"),n=r.exec(e);for(n=s.exec(e);null!==n;)i=Dt[n[1]-1],t=Ht[n[1]-1],e=e.replace(s,"[cap "+i+"]$2"+t+"[/cap]"),n=r.exec(e)}return e}function c(e,i){var t,n,a,r,s,o,l,p,d,u,h,v,f,g,m,E,y,R,b,w,T,C,S,N,x,I=0,k=1,_=2,A=0,M="",P="<!-- START REPEAT ",L="<!-- START INCLUDEIF ",U="<!-- END INCLUDEIF ";for(t=e,i=i||{};;){if(s=t.length,o=t.indexOf("#",A),-1!==o&&(s=o,l=I),p=t.indexOf(P,A),-1!==p&&s>p&&(s=p,l=k),d=t.indexOf(L,A),-1!==d&&s>d&&(s=d,l=_),s===t.length)return M+t.substr(A);switch(u=s-A,M+=t.substr(A,u),A=s,l){case _:if(a=t.substr(A,44),r=bt.exec(a),null===r)break;if(h=r[1],v="!"!==h,f=r[2],g=U+h+f+" -->",m=g.length,E=t.indexOf(g),-1===E){A++;break}y=typeof i[f]!==Qt&&i[f]!==!1,y===v?(R="<!-- START INCLUDEIF "+h+f+" -->",b=R.length,t=t.substr(0,A)+t.substr(A+b,E-A-b)+t.substr(E+m)):t=t.substr(0,A)+t.substr(E+m);break;case I:if(a=t.substr(A,22),r=wt.exec(a),null===r){M+="#",A++;continue}if(w=r[1],""!==i[w]&&!i[w]){M+="#"+w+"#",A+=w.length+2;continue}M+=i[w],A+=w.length+2;break;case k:if(a=t.substr(A,45),r=Tt.exec(a),null===r){M+="<",A++;continue}if(T=r[1],!(i[T]&&i[T]instanceof Array)){M+="<",A++;continue}if(A+=T.length+22,C=t.indexOf("<!-- END REPEAT "+T+" -->",A),-1===C){M+="<!-- START REPEAT "+T+" -->";continue}for(S=C-A,N=t.substr(A,S),x=i[T],n=0;n<x.length;n++)M+=c(N,x[n]);A+=T.length+S+20}}}function p(i){var t,n,a=e.trim(i.val()),r=0,s=0;if(li.hide(),""===a)return!0;if(_i=St.exec(a),null===_i){if(_i=Nt.exec(a),null===_i)return li.show(),!1;r=0,s=_i[1]}else r=_i[1]?parseInt(_i[1],10):0,s=_i[2]?parseInt(_i[2],10):0;return 0===r&&0===s?i.val(""):(t=r>0?r+" hour":"",r>1&&(t+="s"),n=s>0?s+" min":"",s>1&&(n+="s"),i.val(e.trim(t+" "+n))),!0}function d(i){var t,n,a,r="";for(t=0;t<i.length;t++)n=i[t],3!==n.nodeType?1===n.nodeType&&n.childNodes.length>0&&(r+=d(n.childNodes)):(a=e.trim(n.nodeValue),""!==a&&(r+=a+"\n"));return r}function u(){var i;if(e(Yt,Bt).remove(),i=q.selection.getNode(),"#document"===i.nodeName&&(i=Ii[0]),"BODY"===i.nodeName.toUpperCase())e(i).hasClass("mceContentBody")||(i=Ii[0]),/^<p><br[^>]*><\/p>$/.test(i.innerHTML)?e(i).prepend($t):e(i).append("&nbsp;"+$t);else{for(;i.parentNode&&"BODY"!==i.parentNode.nodeName.toUpperCase();)i=i.parentNode;i.parentNode?"DIV"===i.nodeName.toUpperCase()||"SPAN"===i.nodeName.toUpperCase()?e(i,Bt).after($t):e(i,Bt).before($t):(i=Ii[0],e(i).append("&nbsp;"+$t))}return ot=-1,e(Yt,Bt)}function h(){}function v(i){switch(i.type){case"js":e("head").append(e('<script type="text/javascript">'+i.js+"</script>")),Ti[i.f]();break;case"html":e(i.dest).html(i.html)}}function f(){Hi.unbind(Jt),zi.unbind(Jt),xi.dialog(Gt),Rt=!0,gi()}function g(i,t){var a,r,s,o="";for(r=i.recipe,"success"!==t&&(xi.dialog(Gt),Rt=!0,gi()),Q.val(n(r.recipe_title)),r.rating&&e.isNumeric(r.rating)&&J.val(r.rating),an=r.recipe_image,ri.val(""),r.author?ai.val(n(r.author)):ai.val(""),si.val(r.cuisine||""),ri.val(r.mealType||""),oi.val(""),Z.val(n(r.summary)),_i=_t.exec(r.prep_time),null!==_i?(a=_i[1]?_i[1]+"h ":"",ei.val(a+_i[2]+"m")):ei.val(n(r.prep_time)),_i=_t.exec(r.cook_time),null!==_i?(a=_i[1]?_i[1]+"h ":"",ii.val(a+_i[2]+"m")):ii.val(n(r.cook_time)),ti.val(n(r.yield)),qi.val(n(r.serving_size)),r.nutrition?(s=r.nutrition,Gi.val(n(s.calories)),Ji.val(n(s.totalFat)),Qi.val(n(s.saturatedFat)),Zi.val(n(s.unsaturatedFat)),Ki.val(n(s.transFat)),Xi.val(n(s.totalCarbohydrates)),et.val(n(s.sugars)),it.val(n(s.sodium)),tt.val(n(s.dietaryFiber)),nt.val(n(s.protein)),at.val(n(s.cholesterol))):(Gi.val(n(r.calories)),Ji.val(n(r.fat))),a=0;a<i.ingredients.length;a++)o+=yt(n(i.ingredients[a]))+"\n";K.val(o),X.val(n(r.instructions.replace("\r",""))),rt.val(n(r.notes)),Si.easyrecipeDialog("option","title","Update Recipe"),xi.dialog(Gt),Fi.hide(),ji.show(),Oi.hide(),""!==an&&gt(an,Li.length,!0),pi=u(),Si.easyrecipeDialog(Zt)}function m(){var i;Di.show(),Hi.unbind(Jt),zi.unbind(Jt),i={action:"easyrecipeConvert",id:vi,type:fi},e.post(ajaxurl,i,g,"json")}function E(i){var t,n,a,r,s,o,l,c,p,u,h,v,f,g=0,m="",E="",y="",R="",b=["instruction","method","cooking method","procedure","direction"],w=["ingredients?"],T=["note","cooking note"];for(h=e.parseJSON(Ti.ingredients),v=e.parseJSON(Ti.instructions),f=e.parseJSON(Ti.notes),-1===e.inArray(h,w)&&w.push(h),o="^\\s*(?:"+w.join("|")+")",p=new RegExp(o,"i"),-1===e.inArray(v,b)&&w.push(v),s="^\\s*(?:"+b.join("|")+")",c=new RegExp(s,"i"),-1===e.inArray(f,T)&&T.push(f),l="^\\s*(?:"+T.join("|")+")\\s*$",u=new RegExp(l,"i"),r=e("<div>"+i+"</div>"),t=d(r[0].childNodes),t=t.split("\n"),n=0;n<t.length;n++)if(a=e.trim(t[n]),""!==a)if(c.test(a))g=2;else if(p.test(a))g=1;else if(u.test(a))g=3;else switch(g){case 0:m+=a+"\n";break;case 1:E+=a+"\n";break;case 2:y+=a+"\n";break;case 3:R+=a+"\n"}return{summary:m,ingredients:E,instructions:y,notes:R}}function y(){Ni.dialog(Zt)}function R(i,t,n){var a,r=function(){var i,t,n,a,r=e.data(this,"index");i=this.width/150,t=this.height/112,i=i>t?i:t,n=Math.floor(this.height/i),a=Math.floor(this.width/i),Li[r].height(n),Li[r].width(a),Li[r].css("top",(112-n)/2),Li[r].attr("src",this.src),0===r&&e("#ERDTabs").find(".divERNoPhotos").remove()};Ui.append('<div class="ERPhoto"><img style="position:relative" id="ERPhoto_'+t+'" /></div>'),Li[t]=e("#ERPhoto_"+t,Ui),Li[t].data("src",i),n&&(e(".ERPhoto",Ui).removeClass(Kt),Li[t].parent().addClass(Kt),pt=t,an=i),""===vt&&(vt=i),a=new Image,e.data(a,"index",t),a.onload=r,a.src=i}function b(){R(ct.val(),Li.length,!0),ct.val(""),lt.hide(),e(".divERNoPhotos").remove()}function w(e,i){var t,n=!1;for(t=0;t<Li.length;t++)if(Li[t].data("src")===e){n=!0;break}n||R(e,Li.length,i)}function T(i,a){var r,s,l,c,p,d,g,b,T,C,S,N,x,I,k,_,A,M,P=!1,L=!1,U={},O="",D="",H="",z="";if(!i||1===i.which){if(a===tn&&0!==Vt)return y(),void 0;if(i&&i.data===nn&&(a=nn,i=i.delegateTarget),typeof a===Qt&&typeof i===Qt&&(ot=0),Vt=1,ot=0,pi=e(".easyrecipe:first",Bt),a!==tn&&pi.length>1&&(pi=e(pi[a]),ot=a),l=0,N=e.support.cors?"json":"jsonp",e.ajax(Xt,{dataType:N,data:{v:Ti.version,p:l,u:Ti.wpurl},success:v,error:h}),G=!1,typeof tinyMCE!==Qt&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()&&(G=!0),!G)return alert("You must use the Visual Editor to add or update an EasyRecipe"),void 0;if(Q.val(""),ri.val(""),si.val(""),oi.val(""),ai.val(""),Z.val(""),ei.val(""),ii.val(""),ti.val(""),K.val(""),X.val(""),qi.val(""),Gi.val(""),Ji.val(""),Qi.val(""),Zi.val(""),Ki.val(""),Xi.val(""),et.val(""),it.val(""),tt.val(""),nt.val(""),at.val(""),rt.val(""),a!==tn&&1===pi.length)Si.easyrecipeDialog("option","title","Update Recipe"),Oi.hide(),Fi.hide(),ji.show(),di=!0;else{if(ci=q.getContent(),!Rt&&(C=xt.exec(ci)||It.exec(ci)||kt.exec(ci),C||(P=e("#hasRecipe").is(":checked")),C||P||(s=Bt.find(".hrecipe").filter(".f1",".f2"),s.length>0&&(L=-1!==s.text().indexOf("recipage.com"))),C||P||L))return P?(fi="recipress",vi=Ti.postID):L?(fi="recipage",vi=Ti.postID):(fi=C[2],vi=C[3]),Di.hide(),Hi.click(f),zi.click(m),g=Lt[fi],T=e("#txtERCNVText1",xi),T.html(T.html().replace("#plugin#",g)),Ui.html(""),pt=-1,Li=[],Ui.html(en),xi.dialog(Zt),void 0;Ti.isGuest&&(_=e("#inpERAuthor").val()||"",ai.val(_)),Fi.show(),ji.hide(),Oi.show(),Si.easyrecipeDialog("option","title","Add a New Recipe"),di=!1,Ei!==!1?U=E(Ei):(k=q.selection.getContent(),k.length>20&&(U=E(k))),U.summary&&(O=U.summary),U.ingredients&&(D=U.ingredients),U.instructions&&(H=U.instructions),U.notes&&(z=U.notes),pi=u()}for(A=pi,pi=e("<div>"+pi.html()+"</div>"),e("#inpERCuisine").autocomplete({source:e.parseJSON(Ti.cuisines)}).autocomplete("widget").wrap('<div class="easyrecipeUI" />'),e("#inpERType").autocomplete({source:e.parseJSON(Ti.recipeTypes)}).autocomplete("widget").wrap('<div class="easyrecipeUI" />'),on=!1,Et.off("change",t).on("change",t),ht=a!==tn?pi.find(".endeasyrecipe").text():Ti.version,""===ht&&(ht="2.2"),r=!!pi.find("div.endeasyrecipe").attr("title"),an=e('link[itemprop="image"]',pi).attr("href")||"",Ui.html(""),pt=-1,vt="",Li=[],Bt.find("img").each(function(i){var t=!1;"3">ht?e(this).hasClass("photo")&&(t=!0):t=this.src===an,R(this.src,i,t)}),d=Bt.contents().text(),C=At.exec(d),x=Li.length;null!==C;)p=Pt.exec(C[0]),null!==p&&(c=p[1],R(c,x),ht>"3"?an===c&&(Li[x].parent().addClass(Kt),pt=x):Mt.test(C[0])&&(Li[x].parent().addClass(Kt),pt=x,an=c),x++),C=At.exec(d);""!==an&&w(an,!0),hi=e("#set-post-thumbnail").find("img").attr("src"),hi&&w(hi,-1===pt),-1===pt&&Li.length>0&&(pt=0,an=vt,Li[0].parent().addClass(Kt)),Ui.click(function(){Ni.dialog(Zt)}),0===Li.length?Ui.html(en):-1===pt&&Li[0].parent().addClass(Kt),Ot=[],Ut=[],I=pi.find(".ERName .fn").html()||pi.find(".ERName").html(),I&&""!==I?Q.val(o(n(I))):Q.val(o(n(e("#title").val()))),ri.val(o(n(pi.find(".type").html()))),ai.val(o(n(pi.find(".author").html()))),""===ai.val()&&ai.val(o(e.parseJSON(Ti.author))),si.val(o(n(pi.find(".cuisine").html()))),Z.val(o(O+n(pi.find(".summary").html()))),r&&Z.val(o(n(pi.find(".ERSSummary").html()))),ht>"3"?(S=pi.find('time[itemprop="prepTime"]').html()||"",ei.val(n(S)),S=pi.find('time[itemprop="cookTime"]').html()||"",ii.val(n(S))):(S=pi.find(".preptime").html()||"",C=Ct.exec(S),null!==C?ei.val(n(C[1])):ei.val(""),S=pi.find(".cooktime").html()||"",C=Ct.exec(S),null!==C?ii.val(n(C[1])):ii.val("")),ti.val(n(pi.find(".yield").html())),pi.find(".ingredients li").each(function(i,t){D+=e(t).hasClass(Wt)?"!"+o(n(t.innerHTML))+"\n":o(n(t.innerHTML))+"\n"}),r&&""===D&&pi.find(".ingredient,.ERSIngredients .ERSSectionHead").each(function(i,t){D+=e(t).hasClass("ERSSectionHead")?"!"+o(n(t.innerHTML))+"\n":o(n(t.innerHTML))+"\n"}),K.val(D),pi.find(".instructions li, .instructions .ERSeparator").each(function(i,t){b=e.trim(t.innerHTML.replace(/^[ 0-9.]*(.*)$/gi,"$1")),H+=e(t).hasClass(Wt)?"!"+b+"\n":b+"\n"}),r&&""===H&&pi.find(".instruction,.ERSInstructions .ERSSectionHead").each(function(i,t){b=e.trim(t.innerHTML.replace(/^[ 0-9.]*(.*)$/gi,"$1")),H+=e(t).hasClass("ERSSectionHead")?"!"+b+"\n":b+"\n"}),X.val(o(n(H))),qi.val(n(pi.find(".servingSize").html())),Gi.val(n(pi.find(".calories").html())),Ji.val(n(pi.find(".fat").html())),Qi.val(n(pi.find(".saturatedFat").html())),Zi.val(n(pi.find(".unsaturatedFat").html())),Ki.val(n(pi.find(".transFat").html())),Xi.val(n(pi.find(".carbohydrates").html())),et.val(n(pi.find(".sugar").html())),it.val(n(pi.find(".sodium").html())),tt.val(n(pi.find(".fiber").html())),nt.val(n(pi.find(".protein").html())),at.val(n(pi.find(".cholesterol").html())),M=A.parent().prop("data-rating"),J.val(e.isNumeric(M)?M:"5"),b=(n(pi.find(".ERNotes").html())||"").replace(/<\/p>\n*<p>/gi,"\n\n").replace(/(?:<p>|<\/p>)/gi,"").replace(/<br *\/?>/gi,"\n"),""===b&&""!==z&&(b=z),b=o(b),b=b.replace(/\[br(?: ?\/)?]/gi,"\n"),rt.val(o(b)),r&&""===b&&(b=(n(pi.find(".ERSNotes").html())||"").replace(/<\/p>\n*<p>/gi,"\n\n").replace(/(?:<p>|<\/p>)/gi,"").replace(/<br *\/?>/gi,"\n"),""===b&&""!==z&&(b=z),b=o(b),b=b.replace(/\[br(?: ?\/)?]/gi,"\n"),b=b.replace(/ data-mce-href="[^"]+?"/gi,""),b=b.replace(/<a ([^>]+?)>([^<]+?)<\/a>/gi,"[url $1]$2[/url]"),rt.val(o(b))),mt&&(mt.name&&Q.val(o(n(mt.name))),mt.author&&ai.val(o(mt.author)),mt.summary&&Z.val(o(mt.summary)),mt.yield&&ti.val(n(mt.yield)),mt.type&&ri.val(o(n(mt.type))),mt.cuisine&&si.val(o(n(mt.cuisine))),mt.prepTime&&ei.val(n(mt.prepTime)),mt.cookTime&&ii.val(n(mt.cookTime)),mt.summary&&Z.val(o(mt.summary))),pi=A,Si.easyrecipeDialog(Zt),Si.easyrecipeDialog("option","position","center")}}function C(i){return Vt=e(".easyrecipe",Bt).length,qt||0===Vt?(T(i,tn),void 0):(Ni.dialog(Zt),void 0)}function S(){Si.easyrecipeDialog(Gt)}function N(){var e=confirm("Are you sure you want to delete this recipe?");e&&(pi.remove(),pi=!1,on=!1),Si.easyrecipeDialog(Gt)}function x(){var i,t=e("#inpERPaste"),n=t.val();i=E(n),(0!==i.ingredients.length||0!==i.instructions.length)&&(Ei=n,t.val(""),mt={name:l(a(Q.val())),author:l(r(ai)),yield:r(ti),type:l(r(ri)),cuisine:l(r(si)),summary:l(r(Z)),servesize:r(qi),prepTime:ei.val(),cookTime:ii.val()},on=!1,Si.easyrecipeDialog(Gt),C(null))}function I(i){var t=e(i.target).parent(),n=t.parent();t.hasClass("easyrecipeAbove")?n.before(rn):n.after(rn),t.remove(),k()}function k(){var i,t,n;t=e("<div>"+Bt[0].body.innerHTML+"</div>"),t.find(".easyrecipeAbove,.easyrecipeBelow").remove(),i=t.find(".easyrecipe"),i.each(function(){var i=e(this);i.parent().hasClass("easyrecipeWrapper")&&i.unwrap(),ft(i)}),n=t.html(),q.setContent(n),i=Bt.find(".easyrecipe"),i.on("mousedown",null,nn,T),Bt.find(".ERInsertLine").on(Jt,I)}function _(e){var i,t,n,a,r;if(a=e.prev(),r=e.next(),t=0===a.length||a.hasClass("easyrecipe")||a.hasClass("easyrecipeWrapper"))try{t=!(e[0].previousSibling&&3===e[0].previousSibling.nodeType)}catch(s){}if(n=0===r.length||r.hasClass("easyrecipe")||r.hasClass("easyrecipeWrapper"))try{n=!(e[0].nextSibling&&3===e[0].nextSibling.nodeType)}catch(s){}(t||n)&&(e.wrap('<div class="easyrecipeWrapper mceNonEditable" />'),i=e.parent(),t&&(i.prepend('<div class="easyrecipeAbove mceNonEditable"><input class="ERInsertLine mceNonEditable" type="button" value="Insert line above" /></div>'),i.find("input").on(Jt,I),sn.push(i.find(".easyrecipeAbove")[0])),n&&(i.append('<div class="easyrecipeBelow mceNonEditable"><input class="ERInsertLine mceNonEditable" type="button" value="Insert line below" /></div>'),i.find("input").on(Jt,I)))}function A(i){e(".easyrecipeAbove,.easyrecipeBelow",i).remove(),e(".easyrecipe",i).unwrap()}function M(){var i=e(".easyrecipe",Bt);0!==i.length&&(i.on("mousedown",null,nn,T),k())}function P(){var i,t,n,s,o,d,u,h,v,f,g,m,E,y,R="",b="",w=0,T="",C=[];if(p(ei)&&p(ii)){for(t=e.trim(ei.val()),""!==t?(_i=St.exec(t),n=_i[1]?parseInt(_i[1],10):0,s=_i[2]?parseInt(_i[2],10):0,w=60*n+s,o=n>0?n+"H":"",d=s>0?s+"M":"",b="PT"+o+d):t=!1,i=e.trim(ii.val()),""!==i?(_i=St.exec(i),n=_i[1]?parseInt(_i[1],10):0,s=_i[2]?parseInt(_i[2],10):0,o=n>0?n+"H":"",d=s>0?s+"M":"",w+=60*n+s,R="PT"+o+d):i=!1,w>0?(n=Math.floor(w/60),s=w%60,o=n>0?n+" hour":"",n>1&&(o+="s"),d=s>0?s+" min":"",s>1&&(d+="s"),w=e.trim(o+" "+d),o=n>0?n+"H":"",d=s>0?s+"M":"",T="PT"+o+d):w=!1,u=K.val().split("\n"),v=0;v<u.length;v++)h=u[v],""!==h&&("!"===h.charAt(0)?(f=!0,h=h.substr(1)):f=!1,C.push({ingredient:l(a(h)),hasHeading:f}));for(u=X.val().split("\n"),m=[],g={INSTRUCTIONS:[]},v=0;v<u.length;v++)h=e.trim(u[v].replace(/^[ 0-9\.]*(.*)$/gi,"$1")),""!==h&&("!"===h.charAt(0)?((g.INSTRUCTIONS.length>0||g.heading)&&m.push(g),h=h.substr(1),g={},g.INSTRUCTIONS=[],g.heading=l(a(h))):g.INSTRUCTIONS.push({instruction:l(a(h))}));(g.INSTRUCTIONS.length>0||g.heading)&&m.push(g),h=r(rt),h&&(h=h.replace(/\n/g,"[br]")),E={version:Ti.version,hasPhoto:""!==an,photoURL:an,name:l(a(Q.val())),author:l(r(ai)),preptime:t,cooktime:i,totaltime:w,preptimeISO:b,cooktimeISO:R,totaltimeISO:T,yield:r(ti),type:l(r(ri)),cuisine:l(r(si)),summary:l(r(Z)),servesize:r(qi),calories:r(Gi),fat:r(Ji),satfat:r(Qi),unsatfat:r(Zi),transfat:r(Ki),carbs:r(Xi),sugar:r(et),sodium:r(it),fiber:r(tt),protein:r(nt),cholesterol:r(at),notes:l(h),rating:J.length?J.val():"0",INGREDIENTS:C,STEPS:m},""===E.name&&(E.name=!1),y=c(Ti.recipeTemplate,E),-1===ot?pi=e(Yt,Bt):(pi=e(".easyrecipe",Bt),pi.length>0&&(pi=e(pi[ot]))),pi.before(y),pi.remove(),pi=!1,st.css("display","inline-block"),on=!1,Si.easyrecipeDialog(Gt),Vt=e(".easyrecipe",Bt).length,M()}}function L(i,t){var n,a;if(mt=!1,tinymce.majorVersion>"3"){if(!ni[t.id]&&"wp_mce_fullscreen"!==t.id)return e("#"+t.controlManager.buttons.easyrecipeTest._id).hide(),e("#"+t.controlManager.buttons.easyrecipeEdit._id).hide(),e("#"+t.controlManager.buttons.easyrecipeAdd._id).hide(),void 0;ni[t.id]?(Bt=e("#"+t.id+"_ifr").contents(),ki=1e4,n=e("#"+t.controlManager.buttons.easyrecipeTest._id),st=e("#"+t.controlManager.buttons.easyrecipeEdit._id)):(Bt=e("#wp_mce_fullscreen_ifr").contents(),ki=200001,n=e("#mce_fullscreen_easyrecipeTest"),st=e("#mce_fullscreen_easyrecipeEdit"))}else{if(!ni[t.editorId]&&"wp_mce_fullscreen"!==t.editorId)return e("#"+t.editorId+"_easyrecipeTest").hide(),e("#"+t.editorId+"_easyrecipeEdit").hide(),e("#"+t.editorId+"_easyrecipeAdd").hide(),void 0;ni[t.editorId]?(Bt=e("#"+t.editorId+"_ifr").contents(),ki=1e4,n=e("#"+t.editorId+"_easyrecipeTest"),st=e("#"+t.editorId+"_easyrecipeEdit")):(Bt=e("#wp_mce_fullscreen_ifr").contents(),ki=200001,n=e("#mce_fullscreen_easyrecipeTest"),st=e("#mce_fullscreen_easyrecipeEdit"))}Ii=e("body",Bt),a=e(".easyrecipe",Bt),q=tinyMCE.activeEditor,a.each(function(){var i=e(this);i.addClass("mceNonEditable"),i.find(".ERRatingOuter").remove(),i.find(".ERHDPrint").remove(),i.find(".ERLinkback").remove(),i.find(".endeasyrecipe").attr("title")}),Vt=a.length,Vt>0&&""!==Ti.testURL?n.show():n.hide(),Vt>0?st.css("display","inline-block"):st.hide(),Bt.hasERCSS||(e("head",Bt).append('<link rel="stylesheet" type="text/css" href="'+Ti.easyrecipeURL+"/css/easyrecipe-entry.css?ver="+Ti.version+'" />'),Bt.hasERCSS=!0),M()}function U(){Yi.toggleClass("ERNone"),Wi.toggleClass("ERContract")}function O(){Bi.toggleClass("ERNone"),Vi.toggleClass("ERContract")}function D(i){var t,n,a,r;t=e("#ertmp_"+jt,Bt),n=i.title?' title="'+i.title+'"':"",a=i.target?' target="'+i.target+'"':"",r='href="'+i.href+'"'+a+n,Ut.push(r),wi.val(bi.substring(0,yi)+"[url:"+Ut.length+"]"+bi.substring(yi,Ri)+"[/url]"+bi.substring(Ri)),wi[0].focus(),t.remove()}function H(i){var t,n,a,r,s,o;Ti.isEntryDialog&&(t=e("#ertmp_"+jt,Bt),"string"==typeof i?a=e(i):(o=t.html(),"link"===o?(a=t.parent("a"),t=a):a=e(t.html())),a.is("a")&&(n=a.attr("href"),r=a.attr("title"),s=a.attr("target"),r=r?' title="'+r+'"':"",s=s?' target="'+s+'"':"",i='href="'+n+'"'+s+r,Ut.push(i),wi.val(bi.substring(0,yi)+"[url:"+Ut.length+"]"+bi.substring(yi,Ri)+"[/url]"+bi.substring(Ri))),wi[0].focus(),t.remove())}function z(i,t){var n,a,r,s,o,l,c,p,d,u,h,v,f,g,m;a=i.sizes[t.size],r=a.url,l=a.width,c=a.height,R(r,Li.length),p=tinymce.html.Entities.encodeAllRaw(e.trim(i.title)),p=p.replace(/&quot;/g,"&amp;quot;"),d=tinymce.html.Entities.encodeAllRaw(e.trim(i.alt)),d=d.replace(/&quot;/g,"&amp;quot;"),u=tinymce.html.Entities.encodeAllRaw(e.trim(i.caption)),p=""!==p?' title="'+p+'"':"",d=""!==d?' alt="'+d+'"':"",h="align"+t.align,o=i.uploadedTo?'id="attachment_'+i.uploadedTo+'" ':"",n=bi.substring(0,yi),""!==u?(Dt.push(o+'align="'+h+'" width="'+l+'"'),Ht.push(u),v="[cap:"+Dt.length+"]",f="[/cap]",h=""):v=f="","none"===t.link?s=g=m="":"file"===t.link?s=r:"post"===t.link?s=i.link:"custom"===t.link&&(s=t.linkUrl),""!==s&&(Ut.push('href="'+s+'"'),g="[url:"+Ut.length+"]",m="[/url]"),Ot.push('src="'+r+'" width="'+l+'" height="'+c+'" class="'+h+" size-"+t.size+'"'+p+d),n+=v+g+"[img:"+Ot.length+"]"+m+f,n+=bi.substring(Ri),wi.val(n),wi[0].focus()}function F(e){e.stopPropagation(),y()}function j(){mt=!1,C()}function $(){mt=!1,T()}function Y(){Vt>0&&!Ti.noHTMLWarn&&(Ti.noHTMLWarn=!0,Ci.dialog(Zt))}function W(i){var t,n,a,r,s=e("#wp-preview",i.target).val();return"dopreview"===s?!0:0===Vt?!0:(a=tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden(),a?n=e("<div>"+q.getContent()+"</div>"):(r=e("#wp-content-editor-container").find("textarea"),n=e("<div>"+r.val()+"</div>")),A(e(".easyrecipeWrapper",n)),e(".easyrecipe",n).removeClass("mceNonEditable"),t=e.trim(n.html()),a?q.setContent(t):r.val(t),!0)}function B(i){var t;""!=i.target.innerHTML&&(t=e(i.target).find("img").attr("src"),t&&w(t,!1))}function V(i){var t,n,a,r;for(t=i[0],n=0;n<t.addedNodes.length;n++)if(a=e(t.addedNodes[n].innerHTML),r=a.find("img").attr("src")){w(r,!1);break}}var q,G,J,Q,Z,K,X,ei,ii,ti,ni,ai,ri,si,oi,li,ci,pi,di,ui,hi,vi,fi,gi,mi,Ei,yi,Ri,bi,wi,Ti,Ci,Si,Ni,xi,Ii,ki,_i,Ai,Mi,Pi,Li,Ui,Oi,Di,Hi,zi,Fi,ji,$i,Yi,Wi,Bi,Vi,qi,Gi,Ji,Qi,Zi,Ki,Xi,et,it,tt,nt,at,rt,st,ot,lt,ct,pt,dt,ut,ht,vt,ft,gt,mt,Et,yt=jQuery.trim,Rt=!1,bt=/<!-- START INCLUDEIF (!?)([_a-z][_0-9a-z]{0,19}) -->/i,wt=/^#([_a-z][_0-9a-z]{0,19})#/im,Tt=/<!-- START REPEAT ([_a-zA-Z][_0-9a-zA-Z]{0,19}) -->/m,Ct=/^([^<]*)/,St=/^(?:([0-9]+) *(?:h|hr|hrs|hour|hours))? *(?:([0-9]+) *(?:m|mn|mns|min|mins|minute|minutes))?$/i,Nt=/^([0-9]+)$/,xt=/(.*)\[amd-(recipeseo|zlrecipe)-recipe:([0-9]+)](.*)/,It=/(.*)\[(yumprint)-recipe\s+id='(\d+)'](.*)/i,kt=/(.*)\[(gmc)_recipe\s+([0-9]+)](.*)/,_t=/PT(?:([0-9]*)+H)?([0-9]+)+M/i,At=/\[(?:img) +(?:[^\]]+?)]/gi,Mt=/class\s*=\s*"(?:[^"]+ )?photo[ "]/i,Pt=/src\s*=\s*" *([^"]+?) *"/i,Lt={recipeseo:"Recipe SEO",ziplist:"ZipList",zlrecipe:"ZipList",yumprint:"Yumprint Recipe Card",recipress:"ReciPress",gmc:"GetMeCooking",recipage:"ReciPage"},Ut=[],Ot=[],Dt=[],Ht=[],zt="Switch to the Visual Editor to add or edit an EasyRecipe",Ft=null,jt=0,$t='<div class="easyrecipeholder">EasyRecipe</div>',Yt=".easyrecipeholder",Wt="ERSeparator",Bt=null,Vt=0,qt=!0,Gt="close",Jt="click",Qt="undefined",Zt="open",Kt="ERPhotoSelected",Xt="http://www.easyrecipeplugin.com/checkUpdates.php",en='<div class="divERNoPhotos">There are no photos in this post<br />Add photos anywhere in the post</div>',tn=-1,nn=-2,an="",rn="&nbsp;",sn=[],on=!1;e(function(){var t,n,a,r=null;Ti=EASYRECIPE,Ti.dialogs=e("<div>").addClass("easyrecipeUI").prop("id","easyrecipeUI").appendTo("body"),Ti.isGuest&&Ti.dialogs.addClass("easyrecipeDlgAbsolute"),e.widget("custom.easyrecipeDialog",e.ui.dialog,{_allowInteraction:function(i){return this._super(i)||!!e(i.target).parents(".media-modal-content, #wp-link").length}}),Ti.button!==e.fn.button&&(r=e.fn.button,e.fn.button=Ti.button),Si=e("#easyrecipeEntry"),Ni=e("#easyrecipeUpgrade"),Ci=e("#easyrecipeHTMLWarn"),ni=Ti.isGuest?{guestpost:1}:{content:1,aviaTBcontent:1},Si.easyrecipeDialog({autoOpen:!1,width:655,modal:!0,appendTo:Ti.dialogs,dialogClass:"easyrecipeEntry",beforeClose:function(){if(on){if(!window.confirm("Are you sure you want to close without saving the recipe?"))return!1;on=!1}return!0},close:function(){Ti.isEntryDialog=!1,pi&&!di&&pi.remove(),pi=!1,e(".easyrecipeEntry").filter(function(){return""===e(this).text()}).remove()},open:function(){Ti.isEntryDialog=!0,Ai.tabs({active:0,beforeActivate:i}),setTimeout(function(){var i=e(".easyrecipeEntry"),t=i.offset();t.top<dt&&(t.top=dt,i.offset(t))},250)}}),Et=e("#divERContainer").show(),Ci.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyrecipeHTMLWarn",appendTo:Ti.dialogs,close:function(){e(".easyrecipeHTMLWarn").filter(function(){return""===e(this).text()}).remove()}}),e(".divERHTMLWarnContainer").show(),Ni.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyrecipeUpgrade",appendTo:Ti.dialogs,close:function(){e(".easyrecipeUpgrade").filter(function(){return""===e(this).text()}).remove()}}),e(".divERUPGContainer").show(),xi=e("#easyrecipeConvert"),Di=e("#divERCNVSpinner"),Hi=e("#btnERCNVCancel"),zi=e("#btnERCNVOK"),Di.hide(),xi.dialog({autoOpen:!1,width:390,modal:!0,dialogClass:"easyrecipeConvert",appendTo:Ti.dialogs,close:function(){e(".easyrecipeConvert").filter(function(){return""===e(this).text()}).remove()}}),e("#divERCNVContainer").show(),e(window).bind("easyrecipeadd",j),e(window).bind("easyrecipeedit",$),e(window).bind("easyrecipeload",L),Pi=e("#divERNext"),Mi=e("#btnERButtons"),Ai=e("#ERDTabs"),Ui=e("#divERPhotos"),e("input:submit",".easyrecipeUI").button(),ui=e("#ed_toolbar"),J=e("#inpERRating"),Q=e("#inpERName"),ai=e("#inpERAuthor"),ri=e("#inpERType"),si=e("#inpERCuisine"),oi=e("#inpERTags"),Z=e("textarea#taERSummary"),K=e("textarea#taERIngredients"),X=e("textarea#taERInstructions"),ei=e("#inpERPrepTime"),ii=e("#inpERCookTime"),ti=e("#inpERYield"),qi=e("#inpERServeSize"),Gi=e("#inpERCalories"),Ji=e("#inpERFat"),Qi=e("#inpERSatFat"),Zi=e("#inpERUnsatFat"),Ki=e("#inpERTransFat"),Xi=e("#inpERCarbs"),et=e("#inpERSugar"),it=e("#inpERSodium"),tt=e("#inpERFiber"),nt=e("#inpERProtein"),at=e("#inpERCholesterol"),rt=e("textarea#taERNotes"),lt=e("#divERAddImageURL"),a=e("#lnkERPhotoURL"),li=e(".ERTimeError"),Fi=e("#divERAdd"),ji=e("#divERChange"),$i=e("#divERHeader"),Yi=e("#divEROther"),Wi=e("#divEROtherLabel"),Bi=e("#divERNotes"),Vi=e("#divERNotesLabel"),Oi=e("#ERDPasteTab"),ct=e("#fldERAPUImageURL"),e("#btnERAdd").click(P),e("#btnERNext").click(s),e("#btnERChange").click(P),e("#btnERDelete").click(N),e("#btnERCancel").click(S),a.click(function(){Ni.dialog(Zt)}),e("#btnERAIUCancel").click(function(){lt.hide()}),e("#btnERAIUOK").click(b),Wi.click(U),Vi.click(O),ei.change(function(i){p(e(i.target))}),ii.change(function(i){p(e(i.target))}),e("#btnERPaste").click(x),dt=e("#wpadminbar").height(),ut=e("#divEREditBtns").on("mousedown","li",F),Et.find('input[type="text"], textarea').on("blur",function(){Ft=null}).on("focus",function(){Ft=e(this)}),e("#wp-link").bind("wpdialogclose",H),Ti.insertLink=D,gi=C,mi=T,Ei=!1,Ti.insertUploadedImage=z,ft=_,gt=R,Ti.addListener=M,Ci.find("input").on(Jt,function(){Ci.dialog(Gt)}),e("#wp-content-editor-tools").on(Jt,"#content-html",Y),e("#post").on("submit",W),null!==r&&(e.fn.button=r),t=e("#postimagediv").find(".inside"),window.MutationObserver&&t.length>0?(n=new MutationObserver(V),n.observe(t[0],{childList:!0})):t.on("DOMSubtreeModified",B),window.QTags&&QTags.addButton("easyrecipe","EasyRecipe",function(){alert(zt)},"","","",900)})}(jQuery);