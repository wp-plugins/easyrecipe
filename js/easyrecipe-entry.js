(function(bG){var G=jQuery.trim;var Q,R,bv,bO,bs,k,av,aT,bj,aq;var w,a9,bp,aQ,bu,M=false,P,bz,bS,N,f;var bH=/<!-- START INCLUDEIF (!?)([_a-z][_0-9a-z]{0,19}) -->/i;var o=/^#([_a-z][_0-9a-z]{0,19})#/im;var b=/<!-- START REPEAT ([_a-zA-Z][_0-9a-zA-Z]{0,19}) -->/m;var bb=/^([^<]*)/,s=/^(?:([0-9]+) *(?:h|hr|hrs|hour|hours))? *(?:([0-9]+) *(?:m|mn|mns|min|mins|minute|minutes))?$/i,az=/^([0-9]+)$/;var bR=/(.*)\[amd-(recipeseo|zlrecipe)-recipe:([0-9]+)\](.*)/;var a7,a1,bt,bQ,U;var ar=/PT(?:([0-9]*)+H)?([0-9]+)+M/i;var aj=/\[(?:img) +(?:[^\]]+?)\]/ig;var O=/class\s*=\s*"(?:[^"]+ )?photo[ "]/i;var bf=/src\s*=\s*" *([^"]+?) *"/i;var bh=[];var bm=[];var bc,aH,aN,ag=null,r=0,n,v,bk;var aJ='<div class="easyrecipeholder">EasyRecipe</div>',i=".easyrecipeholder",aI="ERSeparator";var a8,L,E,t,aG=null,bl,ab,bK,aU="option",aA="zIndex",d,V,a5,bN,aD;var ap,y,bB,br,bM,bx,K,ba,bd,bn,bw;var bg,m,aB,by,aF,a3,am,bD,e,B,aV,c,u,bA;var aW=0,bP=false,aY,I=true,C,ax,bE,W,a0;var l="close",ao="click",aK="undefined",H="open",aP="ERPhotoSelected",ae="http://www.easyrecipeplugin.com/checkUpdates.php";var au='<div class="divERNoPhotos">There are no photos in this post<br />Add photos anywhere in the post</div>';var be,aC=-1,ay=-2,D="",bi,ah="&nbsp;",a6,aa,F;function ak(bU,bV){V.show();a0.hide();a5.show();switch(bV.index){case 0:a0.css("right","10px");a0.show();break;case 3:a0.css("right","inherit");a5.hide();a0.show();break;case 4:V.hide();break}}function bC(bU){return bU?bU.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," "):""}function x(bU){return bU?bG("<div />").text(bU).html():""}function aw(bU){return bG.trim(x(bU.val()))||false}function a(bV,bW){var bU=d.tabs("option","selected");d.tabs("option","selected",++bU)}function af(bV){var bX,bU=/\[img +(.*?) *\/?\]/i,bW=/\[url ([^\]]+)\](.*?\[\/url\])/i;bX=bU.exec(bV);while(bX!==null){bm.push(bX[1]);bV=bV.replace(bU,"[img:"+bm.length+"]");bX=bU.exec(bV)}bX=bW.exec(bV);while(bX!==null){bh.push(bX[1]);bV=bV.replace(bW,"[url:"+bh.length+"]$2");bX=bW.exec(bV)}return bV}function g(bV){var bY,bX,bU=/\[img:(\d+)\]/i,bW=/\[url:(\d+)\](.*?)\[\/url\]/i;bX=bU.exec(bV);while(bX!==null){bY=bm[bX[1]-1];bV=bV.replace(bU,"[img "+bY+"]");bX=bU.exec(bV)}bX=bW.exec(bV);while(bX!==null){bY=bh[bX[1]-1];bV=bV.replace(bW,"[url "+bY+"]$2[/url]");bX=bW.exec(bV)}return bV}function aS(co,ca){var cg=0,cb=1,bU=2,cq;var ch,b8,b1,b7=0,b6="",cj,bV,bY,ci,cl;var ck="<!-- START REPEAT ",cs="<!-- START INCLUDEIF ",cr="<!-- END INCLUDEIF ";var bX,bW,b3,cn,ce,b2,b9,cf,cp,b5;var bZ,cd,cm;var b4,cc,b0;cq=co;ca=ca||{};while(true){cj=cq.length;bV=cq.indexOf("#",b7);if(bV!==-1){cj=bV;bY=cg}ci=cq.indexOf(ck,b7);if(ci!==-1&&ci<cj){cj=ci;bY=cb}cl=cq.indexOf(cs,b7);if(cl!==-1&&cl<cj){cj=cl;bY=bU}if(cj===cq.length){return b6+cq.substr(b7)}bX=cj-b7;b6+=cq.substr(b7,bX);b7=cj;switch(bY){case bU:b8=cq.substr(b7,44);b1=bH.exec(b8);if(b1!==null){bW=b1[1];b3=bW!=="!";cn=b1[2]}else{break}ce=cr+bW+cn+" -->";b2=ce.length;b9=cq.indexOf(ce);if(b9===-1){b7++;break}cf=typeof ca[cn]!==aK&&ca[cn]!==false;if(cf===b3){cp="<!-- START INCLUDEIF "+bW+cn+" -->";b5=cp.length;cq=cq.substr(0,b7)+cq.substr(b7+b5,b9-b7-b5)+cq.substr(b9+b2)}else{cq=cq.substr(0,b7)+cq.substr(b9+b2)}break;case cg:b8=cq.substr(b7,22);b1=o.exec(b8);if(b1===null){b6+="#";b7++;continue}bZ=b1[1];if(ca[bZ]!==""&&!ca[bZ]){b6+="#"+bZ+"#";b7+=bZ.length+2;continue}b6+=ca[bZ];b7+=bZ.length+2;break;case cb:b8=cq.substr(b7,45);b1=b.exec(b8);if(b1===null){b6+="<";b7++;continue}cd=b1[1];if(!ca[cd]||!(ca[cd] instanceof Array)){b6+="<";b7++;continue}b7+=cd.length+22;cm=cq.indexOf("<!-- END REPEAT "+cd+" -->",b7);if(cm===-1){b6+="<!-- START REPEAT "+cd+" -->";continue}b4=cm-b7;cc=cq.substr(b7,b4);b0=ca[cd];for(ch=0;ch<b0.length;ch++){b6+=aS(cc,b0[ch])}b7+=cd.length+b4+20;break}}}function S(bY){var bU=bG.trim(bY.val()),bV=0,bX=0,bW,bZ;bu.hide();if(bU===""){return true}bK=s.exec(bU);if(bK===null){bK=az.exec(bU);if(bK===null){bu.show();return false}bV=0;bX=bK[1]}else{bV=bK[1]?parseInt(bK[1],10):0;bX=bK[2]?parseInt(bK[2],10):0}if(bV===0&&bX===0){bY.val("")}else{bW=bV>0?bV+" hour":"";if(bV>1){bW+="s"}bZ=bX>0?bX+" min":"";if(bX>1){bZ+="s"}bY.val(bG.trim(bW+" "+bZ))}return true}function p(bY){var bV,bU,bW,bX="";for(bV=0;bV<bY.length;bV++){bU=bY[bV];if(bU.nodeType===3){bW=bG.trim(bU.nodeValue);if(bW!==""){bX+=bW+"\n"}continue}if(bU.nodeType!==1){continue}if(bU.childNodes.length>0){bX+=p(bU.childNodes)}}return bX}function bI(){var bU;bG(i,aG).remove();bU=Q.selection.getNode();if(bU.nodeName==="#document"){bU=bl[0]}if(bU.nodeName.toUpperCase()==="BODY"){if(!bG(bU).hasClass("mceContentBody")){bU=bl[0]}bG(bU).append("&nbsp;"+aJ)}else{while(bU.parentNode&&bU.parentNode.nodeName.toUpperCase()!=="BODY"){bU=bU.parentNode}if(!bU.parentNode){bU=bl[0];bG(bU).append("&nbsp;"+aJ)}else{if(bU.nodeName.toUpperCase()==="DIV"||bU.nodeName.toUpperCase()==="SPAN"){bG(bU,aG).after(aJ)}else{bG(bU,aG).before(aJ)}}}aY=-1;return bG(i,aG)}function X(bU,bW,bV){}function Y(bU){switch(bU.type){case"js":bG("head").append(bG('<script type="text/javascript">'+bU.js+"<\/script>"));v[bU.f]();break;case"html":bG(bU.dest).html(bU.html);break}}function bT(){bB.unbind(ao);br.unbind(ao);t.dialog(l);M=true;bt()}function J(bY,bV){var bX,bU="";var bW;bW=bY.recipe;if(bV!=="success"){t.dialog(l);M=true;bt()}bv.val(bC(bW.recipe_title));D=bW.recipe_image;a9.val("");w.val("");bp.val("");aQ.val("");bO.val(bC(bW.summary));bK=ar.exec(bW.prep_time);if(bK!==null){bX=bK[1]?bK[1]+"h ":"";av.val(bX+bK[2]+"m")}else{av.val(bC(bW.prep_time))}bK=ar.exec(bW.cook_time);if(bK!==null){bX=bK[1]?bK[1]+"h ":"";aT.val(bX+bK[2]+"m")}else{aT.val(bC(bW.cook_time))}bj.val(bC(bW.yield));m.val(bC(bW.calories));aB.val(bC(bW.fat));bg.val(bC(bW.serving_size));for(bX=0;bX<bY.ingredients.length;bX++){bU+=G(bC(bY.ingredients[bX]))+"\n"}bs.val(bU);k.val(bC(bW.instructions.replace("\r","")));u.val(bC(bW.notes));a8.dialog("option","title","Update Recipe");t.dialog(l);bM.hide();bx.show();ap.hide();if(D!==""){aa(D,bN.length,true)}bS=bI();a8.dialog(aU,aA,ab);a8.dialog(H)}function aX(){var bU;y.show();bB.unbind(ao);br.unbind(ao);bU={action:"easyrecipeConvert",id:a7,type:a1};bG.post(ajaxurl,bU,J,"json")}function z(b4){var b3,cd,b5,bZ=0,b9,bY="",bU="",bV="",b1="";var b2=["instruction","method","cooking method","procedure"];var ce=["ingredients?"];var bW=["note","cooking note"];var cf;var ca;var bX;var cb,b6,b8;var cc,b0,b7;cc=bG.parseJSON(v.ingredients);b0=bG.parseJSON(v.instructions);b7=bG.parseJSON(v.notes);if(bG.inArray(cc,ce)===-1){ce.push(cc)}ca="^\\s*(?:"+ce.join("|")+")";b6=new RegExp(ca,"i");if(bG.inArray(b0,b2)===-1){ce.push(b0)}cf="^\\s*(?:"+b2.join("|")+")";cb=new RegExp(cf,"i");if(bG.inArray(b7,bW)===-1){bW.push(b7)}bX="^\\s*(?:"+bW.join("|")+")\\s*$";b8=new RegExp(bX,"i");b9=bG("<div>"+b4+"</div>");b3=p(b9[0].childNodes);b3=b3.split("\n");for(cd=0;cd<b3.length;cd++){b5=bG.trim(b3[cd]);if(b5===""){continue}if(cb.test(b5)){bZ=2;continue}if(b6.test(b5)){bZ=1;continue}if(b8.test(b5)){bZ=3;continue}switch(bZ){case 0:bY+=b5+"\n";break;case 1:bU+=b5+"\n";break;case 2:bV+=b5+"\n";break;case 3:b1+=b5+"\n";break}}return{summary:bY,ingredients:bU,instructions:bV,notes:b1}}function at(){L.dialog(aU,aA,ab);L.dialog(H)}function Z(bX,bU,bV){var bW;var bY=function(){var bZ,b3,b2,b0,b1=bG.data(this,"index");bZ=this.width/150;b3=this.height/112;bZ=bZ>b3?bZ:b3;b2=Math.floor(this.height/bZ);b0=Math.floor(this.width/bZ);bN[b1].height(b2);bN[b1].width(b0);bN[b1].css("top",(112-b2)/2);bN[b1].attr("src",this.src);if(b1===0){bG("#ERDTabs").find(".divERNoPhotos").remove()}};aD.append('<div class="ERPhoto"><img style="position:relative" id="ERPhoto_'+bU+'" /></div>');bN[bU]=bG("#ERPhoto_"+bU,aD);bN[bU].data("src",bX);if(bV){bG(".ERPhoto",aD).removeClass(aP);bN[bU].parent().addClass(aP);bE=bU;D=bX}if(bi===""){bi=bX}bW=new Image();bG.data(bW,"index",bU);bW.onload=bY;bW.src=bX}function ad(){Z(ax.val(),bN.length,true);ax.val("");C.hide();bG(".divERNoPhotos").remove()}function ac(b9,cc){var ce;var b2,bZ;var ca;var bY;var cd,bU,b8,b7,b3,b1,b4,b5,cf;var bX={},b0="",bW="",bV="",b6="",cb;if(cc===aC&&aW!==0){at();return}if(b9&&b9.data===ay){cc=ay;b9=b9.delegateTarget}if(typeof cc===aK&&typeof b9===aK){aY=0}aW=1;aY=0;bS=bG(".easyrecipe:first",aG);if(cc!==aC&&bS.length>1){bS=bG(bS[cc]);aY=cc}ce=0;b4=bG.support.cors?"json":"jsonp";bG.ajax(ae,{dataType:b4,data:{v:v.version,p:ce,u:v.wpurl},success:Y,error:X});R=false;if(typeof tinyMCE!==aK){if(tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()){R=true}}if(!R){alert("You must use the Visual Editor to add or update an EasyRecipe");return}bv.val("");a9.val("");bp.val("");aQ.val("");w.val("");bO.val("");av.val("");aT.val("");bj.val("");bs.val("");k.val("");bg.val("");m.val("");aB.val("");by.val("");aF.val("");a3.val("");am.val("");bD.val("");e.val("");B.val("");aV.val("");c.val("");u.val("");if(cc!==aC&&bS.length===1){a8.dialog("option","title","Update Recipe");ap.hide();bM.hide();bx.show();N=true}else{bz=Q.getContent();if(!M){b3=bR.exec(bz);if(b3){a1=b3[2];a7=b3[3];y.hide();bB.click(bT);br.click(aX);bY=a1==="recipeseo"?"RecipeSEO":"ZipList";b7=bG("#txtERCNVText1",t);b7.html(b7.html().replace("#plugin#",bY));aD.html("");bE=-1;bN=[];aD.html(au);t.dialog(aU,aA,ab);t.dialog(H);return}}if(v.isGuest){w.val(bG("#inpERAuthor").val())}bM.show();bx.hide();ap.show();a8.dialog("option","title","Add a New Recipe");N=false;if(U!==false){bX=z(U)}else{cb=Q.selection.getContent();if(cb.length>20){bX=z(cb)}}if(bX.summary){b0=bX.summary}if(bX.ingredients){bW=bX.ingredients}if(bX.instructions){bV=bX.instructions}if(bX.notes){b6=bX.notes}bS=bI()}bG("#inpERCuisine").autocomplete({source:bG.parseJSON(v.cuisines)}).autocomplete("widget").wrap('<div class="easyrecipeUI" />');bG("#inpERType").autocomplete({source:bG.parseJSON(v.recipeTypes)}).autocomplete("widget").wrap('<div class="easyrecipeUI" />');P=false;if(bG(".hrecipe",aG).length>0){if(confirm("This post is already hrecipe microformatted\n\nDo you want me to try to convert it to an EasyRecipe?")){P=true}}be=(cc!==aC)?bS.find(".endeasyrecipe").text():v.version;if(be===""){be="2.2"}D=bG('link[itemprop="image"]',bS).attr("href")||"";aD.html("");bE=-1;bi="";bN=[];aG.find("img").each(function(cg){var ch=false;if(be<"3"){if(bG(this).hasClass("photo")){ch=true}}else{ch=this.src===D}Z(this.src,cg,ch)});ca=aG.contents().text();b3=aj.exec(ca);b5=bN.length;while(b3!==null){bZ=bf.exec(b3[0]);if(bZ!==null){b2=bZ[1];Z(b2,b5);if(be>"3"){if(D===b2){bN[b5].parent().addClass(aP);bE=b5}}else{if(O.test(b3[0])){bN[b5].parent().addClass(aP);bE=b5;D=b2}}b5++}b3=aj.exec(ca)}if(D!==""){bU=false;for(cd=0;cd<bN.length;cd++){if(bN[cd].data("src")===D){bU=true;break}}if(!bU){Z(D,bN.length,true)}}if(bE===-1&&bN.length>0){bE=0;D=bi;bN[0].parent().addClass(aP)}aD.click(function(){L.dialog(aU,aA,ab);L.dialog(H)});if(bN.length===0){aD.html(au)}else{if(bE===-1){bN[0].parent().addClass(aP)}}bm=[];bh=[];cf=bS.find(".ERName .fn").html()||bS.find(".ERName").html();if(!cf||cf===""){bv.val(af(bC(bG("#title").val())))}else{bv.val(af((bC(cf))))}a9.val(af(bC(bS.find(".type").html())));w.val(af(bC(bS.find(".author").html())));if(w.val()===""){w.val(af(bG.parseJSON(v.author)))}bp.val(af(bC(bS.find(".cuisine").html())));bO.val(af(b0+bC(bS.find(".summary").html())));if(be>"3"){b1=bS.find('time[itemprop="prepTime"]').html()||"";av.val(bC(b1));b1=bS.find('time[itemprop="cookTime"]').html()||"";aT.val(bC(b1))}else{b1=bS.find(".preptime").html()||"";b3=bb.exec(b1);if(b3!==null){av.val(bC(b3[1]))}else{av.val("")}b1=bS.find(".cooktime").html()||"";b3=bb.exec(b1);if(b3!==null){aT.val(bC(b3[1]))}else{aT.val("")}}bj.val(bC(bS.find(".yield").html()));bS.find(".ingredients li").each(function(ch,cg){if(bG(cg).hasClass(aI)){bW+="!"+af(bC(cg.innerHTML))+"\n"}else{bW+=af(bC(cg.innerHTML))+"\n"}});bs.val(bW);bS.find(".instructions li, .instructions .ERSeparator").each(function(ch,cg){b8=bG.trim(cg.innerHTML.replace(/^[ 0-9.]*(.*)$/ig,"$1"));if(bG(cg).hasClass(aI)){bV+="!"+b8+"\n"}else{bV+=b8+"\n"}});k.val(af(bC(bV)));bg.val(bC(bS.find(".servingSize").html()));m.val(bC(bS.find(".calories").html()));aB.val(bC(bS.find(".fat").html()));by.val(bC(bS.find(".saturatedFat").html()));aF.val(bC(bS.find(".unsaturatedFat").html()));a3.val(bC(bS.find(".transFat").html()));am.val(bC(bS.find(".carbohydrates").html()));bD.val(bC(bS.find(".sugar").html()));e.val(bC(bS.find(".sodium").html()));B.val(bC(bS.find(".fiber").html()));aV.val(bC(bS.find(".protein").html()));c.val(bC(bS.find(".cholesterol").html()));b8=(bC(bS.find(".ERNotes").html())||"").replace(/<\/p>\n*<p>/ig,"\n\n").replace(/(?:<p>|<\/p>)/ig,"").replace(/<br *\/?>/ig,"\n");if(b8===""&&b6!==""){b8=b6}u.val(af(b8));if(F){if(F.name){bv.val(af((bC(F.name))))}if(F.author){w.val(af(F.author))}if(F.summary){bO.val(af(F.summary))}if(F.yield){bj.val(bC(F.yield))}if(F.type){a9.val(af(bC(F.type)))}if(F.cuisine){bp.val(af(bC(F.cuisine)))}if(F.prepTime){av.val(bC(F.prepTime))}if(F.cookTime){aT.val(bC(F.cookTime))}if(F.summary){bO.val(af(F.summary))}}a8.dialog(aU,aA,ab);a8.dialog(H);a8.dialog("option","position","center")}function A(bU){aW=bG(".easyrecipe",aG).length;if(I||aW===0){ac(bU,aC);return}L.dialog(aU,aA,ab);L.dialog(H)}function a2(){a8.dialog(l)}function q(){var bU=confirm("Are you sure you want to delete this recipe?");if(bU){bS.remove();bS=false}a8.dialog(l)}function ai(){var bV=bG("#inpERPaste");var bU,bW=bV.val();bU=z(bW);if(bU.ingredients.length===0&&bU.instructions.length===0){return}U=bW;bV.val("");F={name:g(x(bv.val())),author:g((aw(w))),yield:aw(bj),type:g((aw(a9))),cuisine:g((aw(bp))),summary:g(aw(bO)),servesize:aw(bg),prepTime:av.val(),cookTime:aT.val()};a8.dialog(l);A(null)}function bF(bV){var bU=bG(bV.target).parent();var bW=bU.parent();if(bU.hasClass("easyrecipeAbove")){bW.before(ah)}else{bW.after(ah)}bG(".easyrecipeAbove,.easyrecipeBelow",bW).remove();a6(bG(".easyrecipe",bW).unwrap())}function bJ(bY){var bV,bU,bX,bW;bX=bY.prev();bW=bY.next();bV=(bX.length===0||bX.hasClass("easyrecipe")||bX.hasClass("easyrecipeWrapper"));if(bV){bV=!(bY[0].previousSibling&&bY[0].previousSibling.nodeType===3)}bU=(bW.length===0||bW.hasClass("easyrecipe")||bW.hasClass("easyrecipeWrapper"));if(bU){bU=!(bY[0].nextSibling&&bY[0].nextSibling.nodeType===3)}if(!bV&&!bU){return}bY.wrap('<div class="easyrecipeWrapper" />');if(bV){bY.parent().prepend('<div class="easyrecipeAbove"><input class="ERInsertLine" type="button" value="Insert line above" /></div>')}if(bU){bY.parent().append('<div class="easyrecipeBelow"><input class="ERInsertLine" type="button" value="Insert line below" /></div>')}bG(".easyrecipeWrapper .ERInsertLine",aG).on(ao,bF)}function h(bU){bG(".easyrecipeAbove,.easyrecipeBelow",bU).remove();bG(".easyrecipe",bU).unwrap()}function bq(){var bU=bG(".easyrecipe",aG);if(bU.length===0){return}bU.on("mousedown",null,ay,ac);h(bG(".easyrecipeWrapper",aG));bU.each(function(){bJ(bG(this))})}function aR(){var b6,b0="",bX,b5="",bU=0,ca="";var cc,b8,b4,bY,cb,b1,b7,bV=[],bZ;var bW,b9,b3,b2;if(!S(av)){return}if(!S(aT)){return}bX=bG.trim(av.val());if(bX!==""){bK=s.exec(bX);cc=bK[1]?parseInt(bK[1],10):0;b8=bK[2]?parseInt(bK[2],10):0;bU=cc*60+b8;b4=cc>0?cc+"H":"";bY=b8>0?b8+"M":"";b5="PT"+b4+bY}else{bX=false}b6=bG.trim(aT.val());if(b6!==""){bK=s.exec(b6);cc=bK[1]?parseInt(bK[1],10):0;b8=bK[2]?parseInt(bK[2],10):0;b4=cc>0?cc+"H":"";bY=b8>0?b8+"M":"";bU+=cc*60+b8;b0="PT"+b4+bY}else{b6=false}if(bU>0){cc=Math.floor(bU/60);b8=bU%60;b4=cc>0?cc+" hour":"";if(cc>1){b4+="s"}bY=b8>0?b8+" min":"";if(b8>1){bY+="s"}bU=bG.trim(b4+" "+bY);b4=cc>0?cc+"H":"";bY=b8>0?b8+"M":"";ca="PT"+b4+bY}else{bU=false}cb=bs.val().split("\n");for(b7=0;b7<cb.length;b7++){b1=cb[b7];if(b1!==""){if(b1.charAt(0)==="!"){bZ=true;b1=b1.substr(1)}else{bZ=false}bV.push({ingredient:g(x(b1)),hasHeading:bZ})}}cb=k.val().split("\n");b9=[];bW={INSTRUCTIONS:[]};for(b7=0;b7<cb.length;b7++){b1=bG.trim(cb[b7].replace(/^[ 0-9\.]*(.*)$/ig,"$1"));if(b1!==""){if(b1.charAt(0)==="!"){if(bW.INSTRUCTIONS.length>0||bW.heading){b9.push(bW)}b1=b1.substr(1);bW={};bW.INSTRUCTIONS=[];bW.heading=x(b1)}else{bW.INSTRUCTIONS.push({instruction:g(x(b1))})}}}if(bW.INSTRUCTIONS.length>0||bW.heading){b9.push(bW)}b1=aw(u);if(b1&&v.wpVersion<"3.5"){b1="<p>"+b1.replace(/\n\n/ig,"</p><p>").replace(/\n/ig,"<br />")+"</p>"}b3={version:v.version,hasPhoto:D!=="",photoURL:D,name:g(x(bv.val())),author:g((aw(w))),preptime:bX,cooktime:b6,totaltime:bU,preptimeISO:b5,cooktimeISO:b0,totaltimeISO:ca,yield:aw(bj),type:g((aw(a9))),cuisine:g((aw(bp))),summary:g(aw(bO)),servesize:aw(bg),calories:aw(m),fat:aw(aB),satfat:aw(by),unsatfat:aw(aF),transfat:aw(a3),carbs:aw(am),sugar:aw(bD),sodium:aw(e),fiber:aw(B),protein:aw(aV),cholesterol:aw(c),notes:g(b1),INGREDIENTS:bV,STEPS:b9};if(b3.name===""){b3.name=false}b2=aS(v.recipeTemplate,b3);if(P){bG(".hrecipe",aG).remove()}if(aY===-1){bS=bG(i,aG)}else{bS=bG(".easyrecipe",aG);if(bS.length>0){bS=bG(bS[aY])}}bS.before(b2);bS.remove();bS=false;bA.show();a8.dialog(l);aW=bG(".easyrecipe",aG).length;bq()}function bo(bX,bU,bY){var bV;var bW;F=false;if(bU.editorId!==aq&&bU.editorId!=="wp_mce_fullscreen"){bG("#"+bU.editorId+"_easyrecipeTest").hide();bG("#"+bU.editorId+"_easyrecipeEdit").hide();bG("#"+bU.editorId+"_easyrecipeAdd").hide();return}if(bU.editorId===aq){aG=bG("#"+aq+"_ifr").contents();ab=10000;bV=bG("#"+aq+"_easyrecipeTest");bA=bG("#"+aq+"_easyrecipeEdit")}else{aG=bG("#wp_mce_fullscreen_ifr").contents();ab=200001;bV=bG("#mce_fullscreen_easyrecipeTest");bA=bG("#mce_fullscreen_easyrecipeEdit")}bl=bG("body",aG);bW=bG(".easyrecipe",aG);Q=tinyMCE.activeEditor;bW.each(function(){bG(this).addClass("mceNonEditable");bG(".ERRatingOuter",this).remove();bG(".ERHDPrint",this).remove();bG(".ERLinkback",this).remove()});aW=bW.length;if(aW>0&&v.testURL!==""){bV.show()}else{bV.hide()}if(aW>0){bA.show()}else{bA.hide()}if(!aG.hasERCSS){bG("head",aG).append('<link rel="stylesheet" type="text/css" href="'+v.easyrecipeURL+'/css/easyrecipe-entry.css" />');aG.hasERCSS=true}bq()}function aO(){ba.toggleClass("ERNone");bd.toggleClass("ERContract")}function a4(){bn.toggleClass("ERNone");bw.toggleClass("ERContract")}function aL(){if(window.getSelection){return window.getSelection()}if(document.getSelection){return document.getSelection()}if(document.selection){return document.selection.createRange().text}return null}function T(bY,bW){var bZ,bV,bX,bU=/(?:<a( .*?")>)?<img( (?:.*?)?src="([^"]*?)"(?:.*)) \/>/i;bV=bU.exec(bW);bZ=bG("#ertmp_"+r,aG);if(bV!==null){Z(bV[3],bN.length);bX=aN.substring(0,bc);if(!bV[1]){bm.push(bV[2]);bX+="[img:"+bm.length+"]"}else{bh.push(bV[1]);bm.push(bV[2]);bX+="[url:"+bh.length+"][img:"+bm.length+"][/url]"}bX+=aN.substring(aH);n.val(bX)}n[0].focus();bZ.remove()}function j(bX){var bU,bV,bW,b0,bZ,bY;if(!v.isEntryDialog){return}bU=bG("#ertmp_"+r,aG);if(typeof bX==="string"){bW=bG(bX)}else{bY=bU.html();if(bY==="link"){bW=bU.parent("a");bU=bW}else{bW=bG(bU.html())}}if(bW.is("a")){bV=bW.attr("href");b0=bW.attr("title");bZ=bW.attr("target");b0=b0?' title="'+b0+'"':"";bZ=bZ?' target="'+bZ+'"':"";bX='href="'+bV+'"'+bZ+b0;bh.push(bX);n.val(aN.substring(0,bc)+"[url:"+bh.length+"]"+aN.substring(bc,aH)+"[/url]"+aN.substring(aH))}n[0].focus();bU.remove()}function al(){var bW,bX,bV=false,bU;at()}function an(){F=false;A()}function aM(){F=false;ac()}function aZ(){if(aW>0&&!bP){bP=true;bk.dialog(aU,aA,ab);bk.dialog(H)}}function aE(bZ){var bW,bX,bY,bV;var bU=bG("#wp-preview",bZ.target).val();if(bU==="dopreview"){return true}if(aW===0){return true}bY=tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden();if(bY){bX=bG("<div>"+Q.getContent()+"</div>")}else{bV=bG("#wp-content-editor-container").find("textarea");bX=bG("<div>"+bV.val()+"</div>")}h(bG(".easyrecipeWrapper",bX));bG(".easyrecipe",bX).removeClass("mceNonEditable");bW=bG.trim(bX.html());if(bY){Q.setContent(bW)}else{bV.val(bW)}return true}function bL(){var bU;a8=bG("#easyrecipeEntry");L=bG("#easyrecipeUpgrade");bk=bG("#easyrecipeHTMLWarn");v=EASYRECIPE;aq=v.isGuest?"guestpost":"content";a8.dialog({autoOpen:false,width:655,modal:true,dialogClass:"easyrecipeEntry",close:function(){v.isEntryDialog=false;if(bS&&!N){bS.remove()}bS=false;bG(".easyrecipeEntry").filter(function(){return bG(this).text()===""}).remove()},open:function(){v.isEntryDialog=true;bG(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />');d.tabs({selected:0,select:ak});setTimeout(function(){var bV=bG(".easyrecipeEntry");var bW=bV.offset();if(bW.top<W){bW.top=W;bV.offset(bW)}},250)}});a8.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />');bG("#divERContainer").show();bk.dialog({autoOpen:false,width:420,modal:true,dialogClass:"easyrecipeHTMLWarn",close:function(){bG(".easyrecipeHTMLWarn").filter(function(){return bG(this).text()===""}).remove()},open:function(){bG(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}});bk.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />');bG(".divERHTMLWarnContainer").show();L.dialog({autoOpen:false,width:420,modal:true,dialogClass:"easyrecipeUpgrade",close:function(){bG(".easyrecipeUpgrade").filter(function(){return bG(this).text()===""}).remove()},open:function(){bG(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}});L.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />');bG(".divERUPGContainer").show();t=bG("#easyrecipeConvert");y=bG("#divERCNVSpinner");bB=bG("#btnERCNVCancel");br=bG("#btnERCNVOK");y.hide();t.dialog({autoOpen:false,width:390,modal:true,dialogClass:"easyrecipeConvert",close:function(){bG(".easyrecipeConvert").filter(function(){return bG(this).text()===""}).remove()},open:function(){bG(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}});bG("#divERCNVContainer").show();t.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />');bG(window).bind("easyrecipeadd",an);bG(window).bind("easyrecipeedit",aM);bG(window).bind("easyrecipeload",bo);bG(window).bind("easyrecipeimage",T);bG(window).bind("easyrecipeguestimageuploaded",T);a5=bG("#divERNext");V=bG("#btnERButtons");d=bG("#ERDTabs");aD=bG("#divERPhotos");bG("input:submit",".easyrecipeUI").button();f=bG("#ed_toolbar");bv=bG("#inpERName");w=bG("#inpERAuthor");a9=bG("#inpERType");bp=bG("#inpERCuisine");aQ=bG("#inpERTags");bO=bG("textarea#taERSummary");bs=bG("textarea#taERIngredients");k=bG("textarea#taERInstructions");av=bG("#inpERPrepTime");aT=bG("#inpERCookTime");bj=bG("#inpERYield");bg=bG("#inpERServeSize");m=bG("#inpERCalories");aB=bG("#inpERFat");by=bG("#inpERSatFat");aF=bG("#inpERUnsatFat");a3=bG("#inpERTransFat");am=bG("#inpERCarbs");bD=bG("#inpERSugar");e=bG("#inpERSodium");B=bG("#inpERFiber");aV=bG("#inpERProtein");c=bG("#inpERCholesterol");u=bG("textarea#taERNotes");C=bG("#divERAddImageURL");bU=bG("#lnkERPhotoURL");bu=bG(".ERTimeError");bM=bG("#divERAdd");bx=bG("#divERChange");K=bG("#divERHeader");ba=bG("#divEROther");bd=bG("#divEROtherLabel");bn=bG("#divERNotes");bw=bG("#divERNotesLabel");ap=bG("#ERDPasteTab");ax=bG("#fldERAPUImageURL");bG("#btnERAdd").click(aR);bG("#btnERNext").click(a);bG("#btnERChange").click(aR);bG("#btnERDelete").click(q);bG("#btnERCancel").click(a2);bU.click(function(){L.dialog(aU,aA,ab);L.dialog(H)});bG("#btnERAIUCancel").click(function(){C.hide()});bG("#btnERAIUOK").click(ad);bd.click(aO);bw.click(a4);av.change(function(bV){S(bG(bV.target))});aT.change(function(bV){S(bG(bV.target))});bG("#btnERPaste").click(ai);W=bG("#wpadminbar").height();a0=bG("#divEREditBtns").on("mousedown","li",al);bG('#divERContainer input[type="text"], #divERContainer textarea').on("blur",function(){ag=null}).on("focus",function(){ag=bG(this)});bG("#wp-link").bind("wpdialogclose",j);bt=A;bQ=ac;U=false;v.insertLink=j;v.insertUploadedImage=T;a6=bJ;aa=Z;v.addListener=bq;bk.find("input").on(ao,function(){bk.dialog(l)});bG("#wp-content-editor-tools").on(ao,"#content-html",aZ);bG("#post").on("submit",aE)}bG(bL)}(jQuery));