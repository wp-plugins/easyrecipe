/*! EasyRecipe 3.3.3074 Copyright (c) 2015 BoxHill LLC */
window.EASYRECIPE=window.EASYRECIPE||{},function(e){function t(t){var i,o;if(U.hide(),"OK"===t.status)e("#ERDOK").show();else{for(x.show(),o=e("#ERDErrors",I),o.empty(),i=0;i<t.errors.length;i++)o.append(e("<p>"+t.errors[i]+"</p>"));I.show()}}function i(e){Z.tabs({active:e})}function o(t,i){var o=i.newTab||e(i.tab);o.find("a").hasClass("ERSNoSave")?N.hide():N.show(),ce=o.find("a").attr("href").replace("#divERS","")}function a(){return""===e.trim(_.val())?(_.showErrorRight("Please enter your first name"),!1):!0}function s(){return ie.test(e.trim(M.val()))?!0:(M.showErrorRight("Oops! This doesn't seem to be a valid email address"),!1)}function r(){return""===e.trim(V.val())?(V.showErrorRight("Please tell us about the problem"),!1):!0}function n(){var i,o;e(".showError").dialog("destroy").remove(),o=a(),o=s()&&o,o=r()&&o,o&&(i={action:"easyrecipeSupport",inpName:encodeURIComponent(e.trim(_.val())),inpEmail:encodeURIComponent(e.trim(M.val())),inpSubject:encodeURIComponent(e.trim(e("#inpERDSubject").val())),inpMessage:encodeURIComponent(e.trim(V.val())),sendDiagnostics:e("#cbERDSendDiagnostics").attr("checked")},x.hide(),I.hide(),U.show(),e.post(ajaxurl,i,t,"json"))}function l(){e("#divERSStyles ").find(".ERSStyle").removeClass("ERSStyleSelected"),e(this).addClass("ERSStyleSelected"),T.val(e("input",this).val())}function d(){e("#divERSPrintStyles").find(".ERSStyle").removeClass("ERSStyleSelected"),e(this).addClass("ERSStyleSelected"),j.val(e("input",this).val())}function c(){this.checked?z.removeClass("ERSNoSwoop"):z.addClass("ERSNoSwoop")}function p(){this.checked?L.removeClass("ERSNoSubscribe"):L.addClass("ERSNoSubscribe")}function u(t,o){var a=e.trim(O.val());return""===a||ie.test(a)?o&&""===a?(i(pe),O.showErrorRight("You need to tell us your email address",{clear:"#cbERSSubscribe"}),!1):!0:(i(pe),O.showErrorRight("Oops! This doesn't seem to be a valid email address",{clear:"#cbERSSubscribe"}),!1)}function h(t,o){var a,s,r=e.trim(G.val());if(""!==r){if(!/^SW-\d{8}-/i.test(r))return i(pe),G.showErrorLeft("That's not a valid Swoop ID"),!1;a=e("a",W),s=e("a",W).attr("href"),s=s.replace(/site_id=(.*)/gi,"site_id="+r),e("a",W).attr("href",s),Y.addClass(le),W.removeClass(le)}else Y.removeClass(le),W.addClass(le);return o&&""===r?(i(pe),G.showErrorLeft("You must enter a valid ID to enable Swoop"),!1):!0}function S(){var t,o,a,s=e.trim(K.val());if(K.val(s),""==s)return!0;if(a=re.test(s),!a&&!se.test(s))return i(pe),K.showErrorRight("This is not a valid license key"),!1;if(a){for(o="",t=0;8>t;t++)o+=s.substr(4*t,4)+"-";K.val(o.substr(0,39))}return!0}function v(t){var i,o,a=!0;e(".showError").dialog("destroy").remove(),a=S()&&a,Q.is(":checked")&&(a=u(null,!0)&&a),B.is(":checked")&&(a=h(null,!0)&&a),a?(o={General:0,Labels:1,Styles:2,PrintStyles:3,Fooderific:4,GuestPosts:5,Import:6,Support:7,Geeks:8},i=e(t.target),i.attr("action",i.attr("action")+"#"+o[ce])):t.preventDefault()}function f(){H.html("Version check failed")}function E(t){if(!t.version||!t.msg)return void f();switch(H.html(t.msg),t.type){case"js":e("head").append(e('<script type="text/javascript">'+t.js+"</script>")),q[t.f]();break;case"html":e(t.dest).html(t.html)}}function R(e){e.preventDefault(),e.stopPropagation(),A.dialog(ae),q.isWP39||A.parent(".ui-dialog").css("z-index",100)}function g(t){e("div",$).addClass(le),e("#divERS"+t.target.value+"Settings",$).removeClass(le),"Ziplist"==t.target.value&&(""===e("#divERSZiplistSettings").find("input").val()?e("#divERSZiplistLink").removeClass(le):e("#divERSZiplistLink").addClass(le))}function m(){e("#divFDFirstRun").hide(),e("#divFDScanScheduled").show(),e("#divFDRetrieving").hide(),e("#divFDStatus").hide(),te=(new Date).getTime()/1e3,e("#inpFDEnable").attr("checked","checked")}function w(){alert("Schedule failed")}function b(t){t&&(t.stopPropagation(),t.preventDefault()),e.ajax({url:ajaxurl,type:"post",data:{action:"easyrecipeScanSchedule"},success:m,error:w})}function y(){var e=confirm("You normally only need to run a site scan once but it won't do any harm to run it again\n\nPress OK to re-run a site scan");e&&b()}function D(t){var i,o,a=t.fields;for(i in a)a.hasOwnProperty(i)&&(o="#tdFD"+i,e(o).text(a[i]));e("#spnFDLASTSCAN").text(q.lastScan),e("#divFDRetrieving").hide(),e("#divFDStatus").show()}function C(){alert("Site statistics failed")}function P(){e.ajax({url:de,type:"POST",dataType:"json",data:{site:q.wpurl,apikey:q.fdAPIKey},success:D,error:C})}function F(t){t.stopPropagation(),t.preventDefault(),e("#divFDScanScheduled").hide(),e("#divFDRetrieving").show(),P()}function k(){e("#inpFDEnable").removeAttr("checked"),ee.submit()}var T,j,I,x,U,N,z,L,O,A,G,W,Y,K,Z,$,V,_,M,Q,B,H,q,J,X,ee,te,ie=/^(?:[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)$/i,oe="click",ae="open",se=/^(?:[a-f\d]{4}-){7}[a-f\d]{4}$/i,re=/^[a-f\d]{32}$/i,ne="change",le="ERSDisplayNone",de="http://www.fooderific.com/plugin/sitestats.php",ce="General",pe=0;e(function(){var t,i;q=EASYRECIPE,q.isWP39&&(q.dialogs=e("<div>").addClass("easyrecipeUI").prop("id","easyrecipeUI").appendTo("body")),J=e("#divERSStyles"),X=e("#divERSPrintStyles"),T=J.find(".ERSSelectedStyle"),j=X.find(".ERSSelectedPrintStyle"),A=e("#easyrecipeUpgrade"),x=e("#btnERSendSupport"),Z=e("#divERSTabs"),Z.tabs({active:window.location.hash?parseInt(window.location.hash.replace("#",""),10):0,beforeActivate:o}),e(".ERSStyleTabs").tabs({active:0}),H=e("#spnERSLatestVersion"),J.on(oe,".ERSStyle",l),X.on(oe,".ERSStyle",d),N=e("#divERSSave").find("input").button(),x.button().on(oe,n),z=e("#divERSSwoopSettings"),L=e("#trERSSubscribe"),B=e("#cbERSEnableSwoop").on(oe,c),Q=e("#cbERSSubscribe").on(oe,p),I=e("#ERDFail"),U=e("#ERDSending"),$=e(".ERSSaveButtons"),e('input[type="radio"]',$).on(ne,g),e("#cbDisplayZiplist,#cbDisplayGMC,#cbDisplayRecipeCard,#cbDisplayUltimateRecipe").on(oe,R),O=e('.ERSSubscribe input[name="'+q.settingsName+'[erEmailAddress]"]').on(ne,u),e(".ERSSubscribe").on(oe,function(){e(".ERSubscribeError").css("visibility","hidden")}),G=e('input[name="'+q.settingsName+'[swoopSiteID]"]',z),G.on("change",h),K=e('input[name="'+q.settingsName+'[licenseKey]"]').on(ne,S),Y=e("#divERSRegisterSwoop"),W=e("#divERSLoginSwoop"),ee=e("#frmERSForm"),ee.on("submit",v),_=e("#inpERDName").on(ne,a),M=e("#inpERDEmail").on(ne,s),V=e("#inpERDProblem").on(ne,r),q.jQuery=e,e("#btnFDStartScan").button().on(oe,b),e("#spnFDRescan").on(oe,y),e("#btnFDContinue").button().on(oe,F),e("#divFDDisable").on(oe,k),e("#divFDRetrieving").hasClass("FDDisplayNone")||P(),q.isWP39?A.dialog({autoOpen:!1,width:420,modal:!0,appendTo:q.dialogs,dialogClass:"easyrecipeUpgrade",close:function(){e(".easyrecipeUpgrade").filter(function(){return""===e(this).text()}).remove()}}):(A.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyrecipeUpgrade",close:function(){e(".easyrecipeUpgrade").filter(function(){return""===e(this).text()}).remove()},open:function(t,i){e(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}}),A.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />')),e(".divERUPGContainer").show(),t=0,i=e.support.cors?"json":"jsonp",e.ajax({url:"http://www.easyrecipeplugin.com/checkVersion.php",type:"GET",dataType:i,data:{a:"check",v:q.pluginVersion,k:q.license,u:q.wpurl,slug:q.slug,p:t},success:E,error:f}),Z.show()})}(jQuery),function(e){function t(e){e.data.clear.off(i,t),e.data.errDiv.dialog("destroy"),e.data.errDiv.remove()}var i="focus",o="left",a="right";e.fn.showError=function(s,r){var n,l,d,c,p,u,h,S,v,f,E;for(r=r||{},r.clear=r.clear||[],"string"==typeof r.clear&&(r.clear=[r.clear]),h=e("#divShowError"),0===h.length&&(h=e('<div id="divShowError"></div>').appendTo("body")),u=this,n={position:a,container:null,clear:[]},e.extend(n,r),c=0;c<n.clear.length;c++)u=u.add(n.clear[c]);p='<span class="showError showError-'+n.position+'">',p+='<div class="showErrorLeftPtr"></div><div class="showErrorMsg">'+s,p+='</div><div class="showErrorRightPtr"></div></span>',p=e(p),d=n.position===o?{my:a,at:o,of:this}:{my:o,at:a,of:this},p.dialog({dialogClass:"showErrorDialog",draggable:!1,resizable:!1,autoOpen:!1,appendTo:h,closeText:"",width:"auto",position:d}),p.dialog("open"),"1.10.3"==e.ui.version&&(S=p.dialog("widget"),v=this.offset(),f=v.top+this.outerHeight()/2-12,E=v.left,l=p.outerWidth(),"right"===n.position?E+=this.outerWidth():E-=l,S.css({position:"absolute",top:f+"px",left:E+"px"})),u.on(i,{clear:u,errDiv:p},t)},e.fn.showErrorLeft=function(e,t){t=t||{},t.position=o,this.showError(e,t)},e.fn.showErrorRight=function(e,t){t=t||{},t.position=a,this.showError(e,t)}}(jQuery);