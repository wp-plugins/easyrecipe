if(typeof EASYRECIPE==="undefined"){var EASYRECIPE={}}(function(H){var Y,l,ae,u,O,s,M,q,b,d;var g=/^(?:[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)$/i;var R="click",P,j,t,e=EASYRECIPE,f,C,a,y="option",p="zIndex",Z="open";var S=/^(?:[a-f\d]{4}-){7}[a-f\d]{4}$/i,J,x,n,V="change",Q,X,A="ERSDisplayNone";var D=0,aa=1,i=2,ad=3,k=4,N=5,z=6,m=7,h;function I(ah){O.hide();if(ah.status==="OK"){H("#ERDOK").show()}else{u.show();ae.show()}}function r(ah){C.tabs({selected:ah})}function ag(){if(H.trim(x.val())===""){x.showErrorRight("Please enter your first name");return false}return true}function U(){if(!g.test(H.trim(n.val()))){n.showErrorRight("Oops! This doesn't seem to be a valid email address");return false}return true}function L(){if(H.trim(J.val())===""){J.showErrorRight("Please tell us about the problem");return false}return true}function B(){var ai,ah;H(".showError").dialog("destroy").remove();ah=ag();ah=U()&&ah;ah=L()&&ah;if(!ah){return}ai={action:"easyrecipeSupport",name:encodeURIComponent(H.trim(x.val())),email:encodeURIComponent(H.trim(n.val())),problem:encodeURIComponent(H.trim(J.val())),diagnostics:H("#cbERDSendDiagnostics").attr("checked")};u.hide();ae.hide();O.show();H.post(ajaxurl,ai,I,"json")}function W(){H("#divERSStyles .ERSStyle").removeClass("ERSStyleSelected");H(this).addClass("ERSStyleSelected");Y.val(H("input",this).val())}function af(){H("#divERSPrintStyles .ERSStyle").removeClass("ERSStyleSelected");H(this).addClass("ERSStyleSelected");l.val(H("input",this).val())}function ac(){if(this.checked){M.removeClass("ERSNoSwoop")}else{M.addClass("ERSNoSwoop")}}function o(){if(this.checked){q.removeClass("ERSNoSubscribe")}else{q.addClass("ERSNoSubscribe")}}function F(ah,ai){if(ai.index===z||ai.index===N){s.hide()}else{s.show()}}function v(aj,ah){var ai=H.trim(b.val());if(ai!==""&&!g.test(ai)){r(D);b.showErrorRight("Oops! This doesn't seem to be a valid email address",{clear:"#cbERSSubscribe"});return false}if(ah&&ai===""){r(D);b.showErrorRight("You need to tell us your email address",{clear:"#cbERSSubscribe"});return false}return true}function c(ak,ai){var al=H.trim(P.val());if(al!==""){if(!/^SW-\d{8}-/i.test(al)){r(D);P.showErrorLeft("That's not a valid Swoop ID");return false}var ah=H("a",j);var aj=H("a",j).attr("href");aj=aj.replace(/site_id=(.*)/ig,"site_id="+al);H("a",j).attr("href",aj);t.addClass(A);j.removeClass(A)}else{t.removeClass(A);j.addClass(A)}if(ai&&al===""){r(D);P.showErrorLeft("You must enter a valid ID to enable Swoop");return false}return true}function G(){var ah=H.trim(f.val());if(ah!==""&&!S.test(ah)){r(D);f.showErrorRight("This is not a valid license key");return false}return true}function ab(ai){var ah=true;H(".showError").dialog("destroy").remove();ah=G()&&ah;if(Q.is(":checked")){ah=v(null,true)}if(X.is(":checked")){ah=c(null,true)&&ah}if(!ah){ai.preventDefault()}}function K(){h.html("Version check failed")}function E(ah){if(!ah.version||!ah.msg){K();return}h.html(ah.msg)}function T(ah){d.dialog(Z);ah.preventDefault();ah.stopPropagation()}function w(ah){H("div",a).addClass(A);H("#divERS"+ah.target.value+"Settings",a).removeClass(A);if(ah.target.value==="Ziplist"){if(H("#divERSZiplistSettings input").val()===""){H("#divERSZiplistLink").removeClass(A)}else{H("#divERSZiplistLink").addClass(A)}}}H(function(){Y=H("#divERSStyles .ERSSelectedStyle");l=H("#divERSPrintStyles").find(".ERSSelectedPrintStyle");d=H("#easyrecipeUpgrade");u=H("#btnERSendSupport");C=H("#divERSTabs");C.tabs({selected:D,select:F});H(".ERSStyleTabs").tabs({selected:0});h=H("#spnERSLatestVersion");H("#divERSStyles").on(R,".ERSStyle",W);H("#divERSPrintStyles").on(R,".ERSStyle",af);s=H("#divERSSave input").button();u.button().on(R,B);M=H("#divERSSwoopSettings");q=H("#trERSSubscribe");X=H("#cbERSEnableSwoop").on(R,ac);Q=H("#cbERSSubscribe").on(R,o);ae=H("#ERDFail");O=H("#ERDSending");a=H(".ERSSaveButtons");a.on(R,T);b=H('.ERSSubscribe input[name="ERPlusSettings[erEmailAddress]"]').on(V,v);H(".ERSSubscribe").on(R,function(){H(".ERSubscribeError").css("visibility","hidden")});P=H('input[name="'+e.settingsName+'[swoopSiteID]"]',M);P.on("change",c);f=H('input[name="'+e.settingsName+'[licenseKey]"]').on(V,G);t=H("#divERSRegisterSwoop");j=H("#divERSLoginSwoop");H("#frmERSForm").on("submit",ab);x=H("#inpERDName").on(V,ag);n=H("#inpERDEmail").on(V,U);J=H("#inpERDProblem").on(V,L);e.jQuery=H;d.dialog({autoOpen:false,width:420,modal:true,dialogClass:"easyrecipeUpgrade",close:function(){H(".easyrecipeUpgrade").filter(function(){return H(this).text()===""}).remove()},open:function(aj,ak){H(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}});d.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />');H(".divERUPGContainer").show();var ai=0;var ah=H.support.cors?"json":"jsonp";H.ajax({url:"http://www.easyrecipeplugin.com/checkUpdates1.php",type:"GET",dataType:"jsonp",data:{dType:ah,a:"check",v:e.pluginVersion,k:e.license,u:e.wpurl,p:ai},success:E,error:K})})}(jQuery));(function(d){var c="focus",a;function b(f){f.data.clear.off(c,b);f.data.errDiv.dialog("destroy");f.data.errDiv.remove()}d.fn.showError=function(o,p){var k,m,j,n,f,g,i,e;p=p||{};p.clear=p.clear||[];if(typeof p.clear==="string"){p.clear=[p.clear]}var l={position:"right",container:null,clear:[]};d.extend(l,p);a=l.container||this.closest("div");k=this;for(m=0;m<l.clear.length;m++){k=k.add(l.clear[m])}i='<span class="showError showError-'+l.position+'">';i+='<div class="showErrorLeftPtr"></div><div class="showErrorMsg">'+o;i+='</div><div class="showErrorRightPtr"></div></span>';i=d(i).appendTo("body");j=i.outerHeight();g=this.offset();n=g.top+(this.outerHeight()/2)-12;f=g.left;e=i.outerWidth();if(l.position==="right"){f+=this.outerWidth()}else{f-=e}i.dialog({dialogClass:"showErrorDialog",draggable:false,resizable:false,autoOpen:false,closeText:"",width:e,position:[f,n],maxHeight:j,minHeight:j});d(a).prepend(i.dialog("widget"));i.dialog("open");k.on(c,{clear:k,errDiv:i},b);i.css("width",e+5)};d.fn.showErrorLeft=function(f,e){e=e||{};this.showError(f,e)};d.fn.showErrorRight=function(f,e){e=e||{};e.position="right";this.showError(f,e)}}(jQuery));