if(typeof EASYRECIPE==="undefined"){var EASYRECIPE={}}(function(I){var ae,m,aj,v,R,t,N,q,c,f;var i=/^(?:[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)$/i;var U="click",S,l,u,h,D,b,af="open";var V=/^(?:[a-f\d]{4}-){7}[a-f\d]{4}$/i,K,y,n,ab="change",T,ad,z="ERSDisplayNone";var j,g;var p,W,F;var k="http://www.fooderific.com/plugin/sitestats.php";var d;var C=0;function J(ao){var an,am;R.hide();if(ao.status==="OK"){I("#ERDOK").show()}else{v.show();am=I("#ERDErrors",aj);am.empty();for(an=0;an<ao.errors.length;an++){am.append(I("<p>"+ao.errors[an]+"</p>"))}aj.show()}}function s(am){D.tabs({active:am})}function G(am,an){if(I(an.tab).hasClass("ERSNoSave")){t.hide()}else{t.show()}}function al(){if(I.trim(y.val())===""){y.showErrorRight("Please enter your first name");return false}return true}function aa(){if(!i.test(I.trim(n.val()))){n.showErrorRight("Oops! This doesn't seem to be a valid email address");return false}return true}function M(){if(I.trim(K.val())===""){K.showErrorRight("Please tell us about the problem");return false}return true}function A(){var an,am;I(".showError").dialog("destroy").remove();am=al();am=aa()&&am;am=M()&&am;if(!am){return}an={action:"easyrecipeSupport",name:encodeURIComponent(I.trim(y.val())),email:encodeURIComponent(I.trim(n.val())),problem:encodeURIComponent(I.trim(K.val())),diagnostics:I("#cbERDSendDiagnostics").attr("checked")};v.hide();aj.hide();R.show();I.post(ajaxurl,an,J,"json")}function ac(){I("#divERSStyles ").find(".ERSStyle").removeClass("ERSStyleSelected");I(this).addClass("ERSStyleSelected");ae.val(I("input",this).val())}function ak(){I("#divERSPrintStyles").find(".ERSStyle").removeClass("ERSStyleSelected");I(this).addClass("ERSStyleSelected");m.val(I("input",this).val())}function ai(){if(this.checked){N.removeClass("ERSNoSwoop")}else{N.addClass("ERSNoSwoop")}}function o(){if(this.checked){q.removeClass("ERSNoSubscribe")}else{q.addClass("ERSNoSubscribe")}}function w(ao,am){var an=I.trim(c.val());if(an!==""&&!i.test(an)){s(C);c.showErrorRight("Oops! This doesn't seem to be a valid email address",{clear:"#cbERSSubscribe"});return false}if(am&&an===""){s(C);c.showErrorRight("You need to tell us your email address",{clear:"#cbERSSubscribe"});return false}return true}function e(ap,an){var am,ao,aq=I.trim(S.val());if(aq!==""){if(!/^SW-\d{8}-/i.test(aq)){s(C);S.showErrorLeft("That's not a valid Swoop ID");return false}am=I("a",l);ao=I("a",l).attr("href");ao=ao.replace(/site_id=(.*)/ig,"site_id="+aq);I("a",l).attr("href",ao);u.addClass(z);l.removeClass(z)}else{u.removeClass(z);l.addClass(z)}if(an&&aq===""){s(C);S.showErrorLeft("You must enter a valid ID to enable Swoop");return false}return true}function H(){var am=I.trim(h.val());if(am!==""&&!V.test(am)){s(C);h.showErrorRight("This is not a valid license key");return false}return true}function ah(an){var am=true;I(".showError").dialog("destroy").remove();am=H()&&am;if(T.is(":checked")){am=w(null,true)}if(ad.is(":checked")){am=e(null,true)&&am}if(!am){an.preventDefault()}}function L(){j.html("Version check failed")}function E(am){if(!am.version||!am.msg){L();return}j.html(am.msg);switch(am.type){case"js":I("head").append(I('<script type="text/javascript">'+am.js+"<\/script>"));g[am.f]();break;case"html":I(am.dest).html(am.html);break}}function Y(am){f.dialog(af);am.preventDefault();am.stopPropagation()}function x(am){I("div",b).addClass(z);I("#divERS"+am.target.value+"Settings",b).removeClass(z);if(am.target.value=="Ziplist"){if(I("#divERSZiplistSettings").find("input").val()===""){I("#divERSZiplistLink").removeClass(z)}else{I("#divERSZiplistLink").addClass(z)}}}function O(){I("#divFDFirstRun").hide();I("#divFDScanScheduled").show();I("#divFDRetrieving").hide();I("#divFDStatus").hide();d=(new Date()).getTime()/1000;I("#inpFDEnable").attr("checked","checked")}function Z(){alert("Schedule failed")}function r(am){if(am){am.stopPropagation();am.preventDefault()}I.ajax({url:ajaxurl,type:"post",data:{action:"easyrecipeScanSchedule"},success:O,error:Z})}function Q(){var am=confirm("You normally only need to run a site scan once but it won't do any harm to run it again\n\nPress OK to re-run a site scan");if(am){r()}}function ag(ao){var an,am;for(an in ao.fields){if(ao.fields.hasOwnProperty(an)){am="#tdFD"+an;I(am).text(ao.fields[an])}}I("#spnFDLASTSCAN").text(g.lastScan);I("#divFDRetrieving").hide();I("#divFDStatus").show()}function X(){alert("Site statistics failed")}function B(){I.ajax({url:k,type:"POST",dataType:"json",data:{site:g.wpurl,apikey:g.fdAPIKey},success:ag,error:X})}function P(am){am.stopPropagation();am.preventDefault();I("#divFDScanScheduled").hide();I("#divFDRetrieving").show();B()}function a(){I("#inpFDEnable").removeAttr("checked");F.submit()}I(function(){var an,am;g=EASYRECIPE;p=I("#divERSStyles");W=I("#divERSPrintStyles");ae=p.find(".ERSSelectedStyle");m=W.find(".ERSSelectedPrintStyle");f=I("#easyrecipeUpgrade");v=I("#btnERSendSupport");D=I("#divERSTabs");D.tabs({active:C,beforeActivate:G});I(".ERSStyleTabs").tabs({active:0});j=I("#spnERSLatestVersion");p.on(U,".ERSStyle",ac);W.on(U,".ERSStyle",ak);t=I("#divERSSave").find("input").button();v.button().on(U,A);N=I("#divERSSwoopSettings");q=I("#trERSSubscribe");ad=I("#cbERSEnableSwoop").on(U,ai);T=I("#cbERSSubscribe").on(U,o);aj=I("#ERDFail");R=I("#ERDSending");b=I(".ERSSaveButtons");b.on(U,Y);c=I('.ERSSubscribe input[name="ERPlusSettings[erEmailAddress]"]').on(ab,w);I(".ERSSubscribe").on(U,function(){I(".ERSubscribeError").css("visibility","hidden")});S=I('input[name="'+g.settingsName+'[swoopSiteID]"]',N);S.on("change",e);h=I('input[name="'+g.settingsName+'[licenseKey]"]').on(ab,H);u=I("#divERSRegisterSwoop");l=I("#divERSLoginSwoop");F=I("#frmERSForm");F.on("submit",ah);y=I("#inpERDName").on(ab,al);n=I("#inpERDEmail").on(ab,aa);K=I("#inpERDProblem").on(ab,M);g.jQuery=I;I("#btnFDStartScan").button().on(U,r);I("#spnFDRescan").on(U,Q);I("#btnFDContinue").button().on(U,P);I("#divFDDisable").on(U,a);if(!I("#divFDRetrieving").hasClass("FDDisplayNone")){B()}f.dialog({autoOpen:false,width:420,modal:true,dialogClass:"easyrecipeUpgrade",close:function(){I(".easyrecipeUpgrade").filter(function(){return I(this).text()===""}).remove()},open:function(ao,ap){I(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}});f.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />');I(".divERUPGContainer").show();an=0;am=I.support.cors?"json":"jsonp";I.ajax({url:"http://www.easyrecipeplugin.com/checkVersion.php",type:"GET",dataType:am,data:{a:"check",v:g.pluginVersion,k:g.license,u:g.wpurl,p:an},success:E,error:L})})}(jQuery));(function(d){var c="focus",a;function b(f){f.data.clear.off(c,b);f.data.errDiv.dialog("destroy");f.data.errDiv.remove()}d.fn.showError=function(o,p){var k,m,j,n,f,g,i,e,l;p=p||{};p.clear=p.clear||[];if(typeof p.clear==="string"){p.clear=[p.clear]}l={position:"right",container:null,clear:[]};d.extend(l,p);a=l.container||this.closest("div");k=this;for(m=0;m<l.clear.length;m++){k=k.add(l.clear[m])}i='<span class="showError showError-'+l.position+'">';i+='<div class="showErrorLeftPtr"></div><div class="showErrorMsg">'+o;i+='</div><div class="showErrorRightPtr"></div></span>';i=d(i).appendTo("body");j=i.outerHeight();g=this.offset();n=g.top+(this.outerHeight()/2)-12;f=g.left;e=i.outerWidth();if(l.position==="right"){f+=this.outerWidth()}else{f-=e}i.dialog({dialogClass:"showErrorDialog",draggable:false,resizable:false,autoOpen:false,closeText:"",width:e,position:[f,n],maxHeight:j,minHeight:j});d(a).prepend(i.dialog("widget"));i.dialog("open");k.on(c,{clear:k,errDiv:i},b);i.css("width",e+5)};d.fn.showErrorLeft=function(f,e){e=e||{};this.showError(f,e)};d.fn.showErrorRight=function(f,e){e=e||{};e.position="right";this.showError(f,e)}}(jQuery));