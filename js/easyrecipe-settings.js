/*! EasyRecipe  3.2.1272 Copyright (c) 2013 BoxHill LLC */
if(typeof EASYRECIPE==="undefined"){var EASYRECIPE={}}(function(I){var af,m,ak,v,R,t,N,q,c,f;var i=/^(?:[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)$/i;var U="click",S,l,u,h,D,b,ag="open";var V=/^(?:[a-f\d]{4}-){7}[a-f\d]{4}$/i;var ac=/^[a-f\d]{32}$/i;var K,y,n,ab="change",T,ae,z="ERSDisplayNone";var j,g;var p,W,F;var k="http://www.fooderific.com/plugin/sitestats.php";var d;var C=0;function J(ap){var ao,an;R.hide();if(ap.status==="OK"){I("#ERDOK").show()}else{v.show();an=I("#ERDErrors",ak);an.empty();for(ao=0;ao<ap.errors.length;ao++){an.append(I("<p>"+ap.errors[ao]+"</p>"))}ak.show()}}function s(an){D.tabs({active:an})}function G(ao,ap){var an=ap.newTab||ap.tab;if(I(an).find("a").hasClass("ERSNoSave")){t.hide()}else{t.show()}}function am(){if(I.trim(y.val())===""){y.showErrorRight("Please enter your first name");return false}return true}function aa(){if(!i.test(I.trim(n.val()))){n.showErrorRight("Oops! This doesn't seem to be a valid email address");return false}return true}function M(){if(I.trim(K.val())===""){K.showErrorRight("Please tell us about the problem");return false}return true}function A(){var ao,an;I(".showError").dialog("destroy").remove();an=am();an=aa()&&an;an=M()&&an;if(!an){return}ao={action:"easyrecipeSupport",name:encodeURIComponent(I.trim(y.val())),email:encodeURIComponent(I.trim(n.val())),problem:encodeURIComponent(I.trim(K.val())),diagnostics:I("#cbERDSendDiagnostics").attr("checked")};v.hide();ak.hide();R.show();I.post(ajaxurl,ao,J,"json")}function ad(){I("#divERSStyles ").find(".ERSStyle").removeClass("ERSStyleSelected");I(this).addClass("ERSStyleSelected");af.val(I("input",this).val())}function al(){I("#divERSPrintStyles").find(".ERSStyle").removeClass("ERSStyleSelected");I(this).addClass("ERSStyleSelected");m.val(I("input",this).val())}function aj(){if(this.checked){N.removeClass("ERSNoSwoop")}else{N.addClass("ERSNoSwoop")}}function o(){if(this.checked){q.removeClass("ERSNoSubscribe")}else{q.addClass("ERSNoSubscribe")}}function w(ap,an){var ao=I.trim(c.val());if(ao!==""&&!i.test(ao)){s(C);c.showErrorRight("Oops! This doesn't seem to be a valid email address",{clear:"#cbERSSubscribe"});return false}if(an&&ao===""){s(C);c.showErrorRight("You need to tell us your email address",{clear:"#cbERSSubscribe"});return false}return true}function e(aq,ao){var an,ap,ar=I.trim(S.val());if(ar!==""){if(!/^SW-\d{8}-/i.test(ar)){s(C);S.showErrorLeft("That's not a valid Swoop ID");return false}an=I("a",l);ap=I("a",l).attr("href");ap=ap.replace(/site_id=(.*)/ig,"site_id="+ar);I("a",l).attr("href",ap);u.addClass(z);l.removeClass(z)}else{u.removeClass(z);l.addClass(z)}if(ao&&ar===""){s(C);S.showErrorLeft("You must enter a valid ID to enable Swoop");return false}return true}function H(){var ap,ao,an,aq=I.trim(h.val());h.val(aq);if(aq==""){return true}an=ac.test(aq);if(!an&&!V.test(aq)){s(C);h.showErrorRight("This is not a valid license key");return false}if(an){ao="";for(ap=0;ap<8;ap++){ao+=aq.substr(ap*4,4)+"-"}h.val(ao.substr(0,39))}return true}function ai(ao){var an=true;I(".showError").dialog("destroy").remove();an=H()&&an;if(T.is(":checked")){an=w(null,true)}if(ae.is(":checked")){an=e(null,true)&&an}if(!an){ao.preventDefault()}}function L(){j.html("Version check failed")}function E(an){if(!an.version||!an.msg){L();return}j.html(an.msg);switch(an.type){case"js":I("head").append(I('<script type="text/javascript">'+an.js+"<\/script>"));g[an.f]();break;case"html":I(an.dest).html(an.html);break}}function Y(an){f.dialog(ag);an.preventDefault();an.stopPropagation()}function x(an){I("div",b).addClass(z);I("#divERS"+an.target.value+"Settings",b).removeClass(z);if(an.target.value=="Ziplist"){if(I("#divERSZiplistSettings").find("input").val()===""){I("#divERSZiplistLink").removeClass(z)}else{I("#divERSZiplistLink").addClass(z)}}}function O(){I("#divFDFirstRun").hide();I("#divFDScanScheduled").show();I("#divFDRetrieving").hide();I("#divFDStatus").hide();d=(new Date()).getTime()/1000;I("#inpFDEnable").attr("checked","checked")}function Z(){alert("Schedule failed")}function r(an){if(an){an.stopPropagation();an.preventDefault()}I.ajax({url:ajaxurl,type:"post",data:{action:"easyrecipeScanSchedule"},success:O,error:Z})}function Q(){var an=confirm("You normally only need to run a site scan once but it won't do any harm to run it again\n\nPress OK to re-run a site scan");if(an){r()}}function ah(aq){var ap,ao;var an=aq.fields;for(ap in an){if(an.hasOwnProperty(ap)){ao="#tdFD"+ap;I(ao).text(an[ap])}}I("#spnFDLASTSCAN").text(g.lastScan);I("#divFDRetrieving").hide();I("#divFDStatus").show()}function X(){alert("Site statistics failed")}function B(){I.ajax({url:k,type:"POST",dataType:"json",data:{site:g.wpurl,apikey:g.fdAPIKey},success:ah,error:X})}function P(an){an.stopPropagation();an.preventDefault();I("#divFDScanScheduled").hide();I("#divFDRetrieving").show();B()}function a(){I("#inpFDEnable").removeAttr("checked");F.submit()}I(function(){var ao,an;g=EASYRECIPE;p=I("#divERSStyles");W=I("#divERSPrintStyles");af=p.find(".ERSSelectedStyle");m=W.find(".ERSSelectedPrintStyle");f=I("#easyrecipeUpgrade");v=I("#btnERSendSupport");D=I("#divERSTabs");D.tabs({active:C,beforeActivate:G});I(".ERSStyleTabs").tabs({active:0});j=I("#spnERSLatestVersion");p.on(U,".ERSStyle",ad);W.on(U,".ERSStyle",al);t=I("#divERSSave").find("input").button();v.button().on(U,A);N=I("#divERSSwoopSettings");q=I("#trERSSubscribe");ae=I("#cbERSEnableSwoop").on(U,aj);T=I("#cbERSSubscribe").on(U,o);ak=I("#ERDFail");R=I("#ERDSending");b=I(".ERSSaveButtons");b.on(U,Y);c=I('.ERSSubscribe input[name="ERPlusSettings[erEmailAddress]"]').on(ab,w);I(".ERSSubscribe").on(U,function(){I(".ERSubscribeError").css("visibility","hidden")});S=I('input[name="'+g.settingsName+'[swoopSiteID]"]',N);S.on("change",e);h=I('input[name="'+g.settingsName+'[licenseKey]"]').on(ab,H);u=I("#divERSRegisterSwoop");l=I("#divERSLoginSwoop");F=I("#frmERSForm");F.on("submit",ai);y=I("#inpERDName").on(ab,am);n=I("#inpERDEmail").on(ab,aa);K=I("#inpERDProblem").on(ab,M);g.jQuery=I;I("#btnFDStartScan").button().on(U,r);I("#spnFDRescan").on(U,Q);I("#btnFDContinue").button().on(U,P);I("#divFDDisable").on(U,a);if(!I("#divFDRetrieving").hasClass("FDDisplayNone")){B()}f.dialog({autoOpen:false,width:420,modal:true,dialogClass:"easyrecipeUpgrade",close:function(){I(".easyrecipeUpgrade").filter(function(){return I(this).text()===""}).remove()},open:function(ap,aq){I(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}});f.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />');I(".divERUPGContainer").show();ao=0;an=I.support.cors?"json":"jsonp";I.ajax({url:"http://www.easyrecipeplugin.com/checkVersion.php",type:"GET",dataType:an,data:{a:"check",v:g.pluginVersion,k:g.license,u:g.wpurl,p:ao},success:E,error:L});D.show()})}(jQuery));(function(d){var c="focus",a;function b(f){f.data.clear.off(c,b);f.data.errDiv.dialog("destroy");f.data.errDiv.remove()}d.fn.showError=function(o,p){var k,m,j,n,f,g,i,e,l;p=p||{};p.clear=p.clear||[];if(typeof p.clear==="string"){p.clear=[p.clear]}l={position:"right",container:null,clear:[]};d.extend(l,p);a=l.container||this.closest("div");k=this;for(m=0;m<l.clear.length;m++){k=k.add(l.clear[m])}i='<span class="showError showError-'+l.position+'">';i+='<div class="showErrorLeftPtr"></div><div class="showErrorMsg">'+o;i+='</div><div class="showErrorRightPtr"></div></span>';i=d(i).appendTo("body");j=i.outerHeight();g=this.offset();n=g.top+(this.outerHeight()/2)-12;f=g.left;e=i.outerWidth();if(l.position==="right"){f+=this.outerWidth()}else{f-=e}i.dialog({dialogClass:"showErrorDialog",draggable:false,resizable:false,autoOpen:false,closeText:"",width:e,position:[f,n],minHeight:j});d(a).prepend(i.dialog("widget"));i.dialog("open");k.on(c,{clear:k,errDiv:i},b);i.css("width",e+5)};d.fn.showErrorLeft=function(f,e){e=e||{};this.showError(f,e)};d.fn.showErrorRight=function(f,e){e=e||{};e.position="right";this.showError(f,e)}}(jQuery));