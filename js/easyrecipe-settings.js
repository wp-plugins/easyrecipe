/*! EasyRecipe 3.2.2929 Copyright (c) 2015 BoxHill LLC */
window.EASYRECIPE=window.EASYRECIPE||{},function(e){function t(t){var i,o;if(x.hide(),"OK"===t.status)e("#ERDOK").show();else{for(I.show(),o=e("#ERDErrors",k),o.empty(),i=0;i<t.errors.length;i++)o.append(e("<p>"+t.errors[i]+"</p>"));k.show()}}function i(e){K.tabs({active:e})}function o(t,i){var o=i.newTab||e(i.tab);o.find("a").hasClass("ERSNoSave")?U.hide():U.show(),dt=o.find("a").attr("href").replace("#divERS","")}function r(){return""===e.trim(_.val())?(_.showErrorRight("Please enter your first name"),!1):!0}function a(){return tt.test(e.trim(M.val()))?!0:(M.showErrorRight("Oops! This doesn't seem to be a valid email address"),!1)}function s(){return""===e.trim(V.val())?(V.showErrorRight("Please tell us about the problem"),!1):!0}function n(){var i,o;e(".showError").dialog("destroy").remove(),o=r(),o=a()&&o,o=s()&&o,o&&(i={action:"easyrecipeSupport",inpName:encodeURIComponent(e.trim(_.val())),inpEmail:encodeURIComponent(e.trim(M.val())),inpSubject:encodeURIComponent(e.trim(e("#inpERDSubject").val())),inpMessage:encodeURIComponent(e.trim(V.val())),sendDiagnostics:e("#cbERDSendDiagnostics").attr("checked")},I.hide(),k.hide(),x.show(),e.post(ajaxurl,i,t,"json"))}function l(){e("#divERSStyles ").find(".ERSStyle").removeClass("ERSStyleSelected"),e(this).addClass("ERSStyleSelected"),T.val(e("input",this).val())}function d(){e("#divERSPrintStyles").find(".ERSStyle").removeClass("ERSStyleSelected"),e(this).addClass("ERSStyleSelected"),j.val(e("input",this).val())}function c(){this.checked?N.removeClass("ERSNoSwoop"):N.addClass("ERSNoSwoop")}function p(){this.checked?z.removeClass("ERSNoSubscribe"):z.addClass("ERSNoSubscribe")}function u(t,o){var r=e.trim(O.val());return""===r||tt.test(r)?o&&""===r?(i(ct),O.showErrorRight("You need to tell us your email address",{clear:"#cbERSSubscribe"}),!1):!0:(i(ct),O.showErrorRight("Oops! This doesn't seem to be a valid email address",{clear:"#cbERSSubscribe"}),!1)}function h(t,o){var r,a,s=e.trim(L.val());if(""!==s){if(!/^SW-\d{8}-/i.test(s))return i(ct),L.showErrorLeft("That's not a valid Swoop ID"),!1;r=e("a",G),a=e("a",G).attr("href"),a=a.replace(/site_id=(.*)/gi,"site_id="+s),e("a",G).attr("href",a),W.addClass(nt),G.removeClass(nt)}else W.removeClass(nt),G.addClass(nt);return o&&""===s?(i(ct),L.showErrorLeft("You must enter a valid ID to enable Swoop"),!1):!0}function S(){var t,o,r,a=e.trim(Y.val());if(Y.val(a),""==a)return!0;if(r=at.test(a),!r&&!rt.test(a))return i(ct),Y.showErrorRight("This is not a valid license key"),!1;if(r){for(o="",t=0;8>t;t++)o+=a.substr(4*t,4)+"-";Y.val(o.substr(0,39))}return!0}function v(t){var i,o,r=!0;e(".showError").dialog("destroy").remove(),r=S()&&r,Q.is(":checked")&&(r=u(null,!0)&&r),B.is(":checked")&&(r=h(null,!0)&&r),r?(o={General:0,Labels:1,Styles:2,PrintStyles:3,Fooderific:4,GuestPosts:5,Import:6,Support:7,Geeks:8},i=e(t.target),i.attr("action",i.attr("action")+"#"+o[dt])):t.preventDefault()}function f(){H.html("Version check failed")}function E(t){if(!t.version||!t.msg)return f(),void 0;switch(H.html(t.msg),t.type){case"js":e("head").append(e('<script type="text/javascript">'+t.js+"</script>")),Z[t.f]();break;case"html":e(t.dest).html(t.html)}}function R(e){e.preventDefault(),e.stopPropagation(),A.dialog(ot),Z.isWP39||A.parent(".ui-dialog").css("z-index",100)}function g(){e("#divFDFirstRun").hide(),e("#divFDScanScheduled").show(),e("#divFDRetrieving").hide(),e("#divFDStatus").hide(),et=(new Date).getTime()/1e3,e("#inpFDEnable").attr("checked","checked")}function m(){alert("Schedule failed")}function w(t){t&&(t.stopPropagation(),t.preventDefault()),e.ajax({url:ajaxurl,type:"post",data:{action:"easyrecipeScanSchedule"},success:g,error:m})}function b(){var e=confirm("You normally only need to run a site scan once but it won't do any harm to run it again\n\nPress OK to re-run a site scan");e&&w()}function y(t){var i,o,r=t.fields;for(i in r)r.hasOwnProperty(i)&&(o="#tdFD"+i,e(o).text(r[i]));e("#spnFDLASTSCAN").text(Z.lastScan),e("#divFDRetrieving").hide(),e("#divFDStatus").show()}function D(){alert("Site statistics failed")}function C(){e.ajax({url:lt,type:"POST",dataType:"json",data:{site:Z.wpurl,apikey:Z.fdAPIKey},success:y,error:D})}function P(t){t.stopPropagation(),t.preventDefault(),e("#divFDScanScheduled").hide(),e("#divFDRetrieving").show(),C()}function F(){e("#inpFDEnable").removeAttr("checked"),X.submit()}var T,j,k,I,x,U,N,z,O,A,L,G,W,Y,K,$,V,_,M,Q,B,H,Z,q,J,X,et,tt=/^(?:[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)$/i,it="click",ot="open",rt=/^(?:[a-f\d]{4}-){7}[a-f\d]{4}$/i,at=/^[a-f\d]{32}$/i,st="change",nt="ERSDisplayNone",lt="http://www.fooderific.com/plugin/sitestats.php",dt="General",ct=0;e(function(){var t,i;Z=EASYRECIPE,Z.isWP39&&(Z.dialogs=e("<div>").addClass("easyrecipeUI").prop("id","easyrecipeUI").appendTo("body")),q=e("#divERSStyles"),J=e("#divERSPrintStyles"),T=q.find(".ERSSelectedStyle"),j=J.find(".ERSSelectedPrintStyle"),A=e("#easyrecipeUpgrade"),I=e("#btnERSendSupport"),K=e("#divERSTabs"),K.tabs({active:window.location.hash?parseInt(window.location.hash.replace("#",""),10):0,beforeActivate:o}),e(".ERSStyleTabs").tabs({active:0}),H=e("#spnERSLatestVersion"),q.on(it,".ERSStyle",l),J.on(it,".ERSStyle",d),U=e("#divERSSave").find("input").button(),I.button().on(it,n),N=e("#divERSSwoopSettings"),z=e("#trERSSubscribe"),B=e("#cbERSEnableSwoop").on(it,c),Q=e("#cbERSSubscribe").on(it,p),k=e("#ERDFail"),x=e("#ERDSending"),$=e(".ERSSaveButtons"),$.on(it,R),e("#cbDisplayZiplist,#cbDisplayGMC,#cbDisplayRecipeCard,#cbDisplayUltimateRecipe").on(it,R),O=e('.ERSSubscribe input[name="'+Z.settingsName+'[erEmailAddress]"]').on(st,u),e(".ERSSubscribe").on(it,function(){e(".ERSubscribeError").css("visibility","hidden")}),L=e('input[name="'+Z.settingsName+'[swoopSiteID]"]',N),L.on("change",h),Y=e('input[name="'+Z.settingsName+'[licenseKey]"]').on(st,S),W=e("#divERSRegisterSwoop"),G=e("#divERSLoginSwoop"),X=e("#frmERSForm"),X.on("submit",v),_=e("#inpERDName").on(st,r),M=e("#inpERDEmail").on(st,a),V=e("#inpERDProblem").on(st,s),Z.jQuery=e,e("#btnFDStartScan").button().on(it,w),e("#spnFDRescan").on(it,b),e("#btnFDContinue").button().on(it,P),e("#divFDDisable").on(it,F),e("#divFDRetrieving").hasClass("FDDisplayNone")||C(),Z.isWP39?A.dialog({autoOpen:!1,width:420,modal:!0,appendTo:Z.dialogs,dialogClass:"easyrecipeUpgrade",close:function(){e(".easyrecipeUpgrade").filter(function(){return""===e(this).text()}).remove()}}):(A.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyrecipeUpgrade",close:function(){e(".easyrecipeUpgrade").filter(function(){return""===e(this).text()}).remove()},open:function(){e(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}}),A.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />')),e(".divERUPGContainer").show(),t=0,i=e.support.cors?"json":"jsonp",e.ajax({url:"http://www.easyrecipeplugin.com/checkVersion.php",type:"GET",dataType:i,data:{a:"check",v:Z.pluginVersion,k:Z.license,u:Z.wpurl,slug:Z.slug,p:t},success:E,error:f}),K.show()})}(jQuery),function(e){function t(e){e.data.clear.off(i,t),e.data.errDiv.dialog("destroy"),e.data.errDiv.remove()}var i="focus",o="left",r="right";e.fn.showError=function(a,s){var n,l,d,c,p,u,h,S,v,f,E;for(s=s||{},s.clear=s.clear||[],"string"==typeof s.clear&&(s.clear=[s.clear]),h=e("#divShowError"),0===h.length&&(h=e('<div id="divShowError"></div>').appendTo("body")),u=this,n={position:r,container:null,clear:[]},e.extend(n,s),c=0;c<n.clear.length;c++)u=u.add(n.clear[c]);p='<span class="showError showError-'+n.position+'">',p+='<div class="showErrorLeftPtr"></div><div class="showErrorMsg">'+a,p+='</div><div class="showErrorRightPtr"></div></span>',p=e(p),d=n.position===o?{my:r,at:o,of:this}:{my:o,at:r,of:this},p.dialog({dialogClass:"showErrorDialog",draggable:!1,resizable:!1,autoOpen:!1,appendTo:h,closeText:"",width:"auto",position:d}),p.dialog("open"),"1.10.3"==e.ui.version&&(S=p.dialog("widget"),v=this.offset(),f=v.top+this.outerHeight()/2-12,E=v.left,l=p.outerWidth(),"right"===n.position?E+=this.outerWidth():E-=l,S.css({position:"absolute",top:f+"px",left:E+"px"})),u.on(i,{clear:u,errDiv:p},t)},e.fn.showErrorLeft=function(e,t){t=t||{},t.position=o,this.showError(e,t)},e.fn.showErrorRight=function(e,t){t=t||{},t.position=r,this.showError(e,t)}}(jQuery);