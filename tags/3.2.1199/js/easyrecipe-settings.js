if(typeof EASYRECIPE==="undefined"){var EASYRECIPE={}}(function(J){var ah,m,am,v,T,t,O,q,c,f;var i=/^(?:[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)$/i;var W="click",U,l,u,h,E,b,ai="open";var Y=/^(?:[a-f\d]{4}-){7}[a-f\d]{4}$/i,L,y,n,ae="change",V,ag,A="ERSDisplayNone";var j,g;var p,Z,G;var k="http://www.fooderific.com/plugin/sitestats.php";var d;var D=0,X=4,Q=6,z=7;function K(ap){T.hide();if(ap.status==="OK"){J("#ERDOK").show()}else{v.show();am.show()}}function s(ap){E.tabs({selected:ap})}function ao(){if(J.trim(y.val())===""){y.showErrorRight("Please enter your first name");return false}return true}function ad(){if(!i.test(J.trim(n.val()))){n.showErrorRight("Oops! This doesn't seem to be a valid email address");return false}return true}function N(){if(J.trim(L.val())===""){L.showErrorRight("Please tell us about the problem");return false}return true}function B(){var aq,ap;J(".showError").dialog("destroy").remove();ap=ao();ap=ad()&&ap;ap=N()&&ap;if(!ap){return}aq={action:"easyrecipeSupport",name:encodeURIComponent(J.trim(y.val())),email:encodeURIComponent(J.trim(n.val())),problem:encodeURIComponent(J.trim(L.val())),diagnostics:J("#cbERDSendDiagnostics").attr("checked")};v.hide();am.hide();T.show();J.post(ajaxurl,aq,K,"json")}function af(){J("#divERSStyles ").find(".ERSStyle").removeClass("ERSStyleSelected");J(this).addClass("ERSStyleSelected");ah.val(J("input",this).val())}function an(){J("#divERSPrintStyles").find(".ERSStyle").removeClass("ERSStyleSelected");J(this).addClass("ERSStyleSelected");m.val(J("input",this).val())}function al(){if(this.checked){O.removeClass("ERSNoSwoop")}else{O.addClass("ERSNoSwoop")}}function o(){if(this.checked){q.removeClass("ERSNoSubscribe")}else{q.addClass("ERSNoSubscribe")}}function H(ap,aq){if(aq.index===z||aq.index===Q||aq.index===X){t.hide()}else{t.show()}}function w(ar,ap){var aq=J.trim(c.val());if(aq!==""&&!i.test(aq)){s(D);c.showErrorRight("Oops! This doesn't seem to be a valid email address",{clear:"#cbERSSubscribe"});return false}if(ap&&aq===""){s(D);c.showErrorRight("You need to tell us your email address",{clear:"#cbERSSubscribe"});return false}return true}function e(at,aq){var ap,ar,au=J.trim(U.val());if(au!==""){if(!/^SW-\d{8}-/i.test(au)){s(D);U.showErrorLeft("That's not a valid Swoop ID");return false}ap=J("a",l);ar=J("a",l).attr("href");ar=ar.replace(/site_id=(.*)/ig,"site_id="+au);J("a",l).attr("href",ar);u.addClass(A);l.removeClass(A)}else{u.removeClass(A);l.addClass(A)}if(aq&&au===""){s(D);U.showErrorLeft("You must enter a valid ID to enable Swoop");return false}return true}function I(){var ap=J.trim(h.val());if(ap!==""&&!Y.test(ap)){s(D);h.showErrorRight("This is not a valid license key");return false}return true}function ak(aq){var ap=true;J(".showError").dialog("destroy").remove();ap=I()&&ap;if(V.is(":checked")){ap=w(null,true)}if(ag.is(":checked")){ap=e(null,true)&&ap}if(!ap){aq.preventDefault()}}function M(){j.html("Version check failed")}function F(ap){if(!ap.version||!ap.msg){M();return}j.html(ap.msg)}function ab(ap){f.dialog(ai);ap.preventDefault();ap.stopPropagation()}function x(ap){J("div",b).addClass(A);J("#divERS"+ap.target.value+"Settings",b).removeClass(A);if(ap.target.value=="Ziplist"){if(J("#divERSZiplistSettings").find("input").val()===""){J("#divERSZiplistLink").removeClass(A)}else{J("#divERSZiplistLink").addClass(A)}}}function P(){J("#divFDFirstRun").hide();J("#divFDScanScheduled").show();J("#divFDRetrieving").hide();J("#divFDStatus").hide();d=(new Date()).getTime()/1000;J("#inpFDEnable").attr("checked","checked")}function ac(){alert("Schedule failed")}function r(ap){if(ap){ap.stopPropagation();ap.preventDefault()}J.ajax({url:ajaxurl,type:"post",data:{action:"easyrecipeScanSchedule"},success:P,error:ac})}function S(){var ap=confirm("You normally only need to run a site scan once but it won't do any harm to run it again\n\nPress OK to re-run a site scan");if(ap){r()}}function aj(ar){var aq,ap;for(aq in ar.fields){if(ar.fields.hasOwnProperty(aq)){ap="#tdFD"+aq;J(ap).text(ar.fields[aq])}}J("#spnFDLASTSCAN").text(g.lastScan);J("#divFDRetrieving").hide();J("#divFDStatus").show()}function aa(){alert("Site statistics failed")}function C(){J.ajax({url:k,type:"POST",dataType:"json",data:{site:g.wpurl,apikey:g.fdAPIKey},success:aj,error:aa})}function R(ap){ap.stopPropagation();ap.preventDefault();J("#divFDScanScheduled").hide();J("#divFDRetrieving").show();C()}function a(){J("#inpFDEnable").removeAttr("checked");G.submit()}J(function(){var aq,ap;g=EASYRECIPE;p=J("#divERSStyles");Z=J("#divERSPrintStyles");ah=p.find(".ERSSelectedStyle");m=Z.find(".ERSSelectedPrintStyle");f=J("#easyrecipeUpgrade");v=J("#btnERSendSupport");E=J("#divERSTabs");E.tabs({selected:D,select:H});J(".ERSStyleTabs").tabs({selected:0});j=J("#spnERSLatestVersion");p.on(W,".ERSStyle",af);Z.on(W,".ERSStyle",an);t=J("#divERSSave").find("input").button();v.button().on(W,B);O=J("#divERSSwoopSettings");q=J("#trERSSubscribe");ag=J("#cbERSEnableSwoop").on(W,al);V=J("#cbERSSubscribe").on(W,o);am=J("#ERDFail");T=J("#ERDSending");b=J(".ERSSaveButtons");b.on(W,ab);c=J('.ERSSubscribe input[name="ERPlusSettings[erEmailAddress]"]').on(ae,w);J(".ERSSubscribe").on(W,function(){J(".ERSubscribeError").css("visibility","hidden")});U=J('input[name="'+g.settingsName+'[swoopSiteID]"]',O);U.on("change",e);h=J('input[name="'+g.settingsName+'[licenseKey]"]').on(ae,I);u=J("#divERSRegisterSwoop");l=J("#divERSLoginSwoop");G=J("#frmERSForm");G.on("submit",ak);y=J("#inpERDName").on(ae,ao);n=J("#inpERDEmail").on(ae,ad);L=J("#inpERDProblem").on(ae,N);g.jQuery=J;J("#btnFDStartScan").button().on(W,r);J("#spnFDRescan").on(W,S);J("#btnFDContinue").button().on(W,R);J("#divFDDisable").on(W,a);if(!J("#divFDRetrieving").hasClass("FDDisplayNone")){C()}f.dialog({autoOpen:false,width:420,modal:true,dialogClass:"easyrecipeUpgrade",close:function(){J(".easyrecipeUpgrade").filter(function(){return J(this).text()===""}).remove()},open:function(ar,at){J(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}});f.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />');J(".divERUPGContainer").show();aq=0;ap=J.support.cors?"json":"jsonp";J.ajax({url:"http://www.easyrecipeplugin.com/checkUpdates1.php",type:"GET",dataType:"jsonp",data:{dType:ap,a:"check",v:g.pluginVersion,k:g.license,u:g.wpurl,p:aq},success:F,error:M})})}(jQuery));(function(d){var c="focus",a;function b(f){f.data.clear.off(c,b);f.data.errDiv.dialog("destroy");f.data.errDiv.remove()}d.fn.showError=function(o,p){var k,m,j,n,f,g,i,e,l;p=p||{};p.clear=p.clear||[];if(typeof p.clear==="string"){p.clear=[p.clear]}l={position:"right",container:null,clear:[]};d.extend(l,p);a=l.container||this.closest("div");k=this;for(m=0;m<l.clear.length;m++){k=k.add(l.clear[m])}i='<span class="showError showError-'+l.position+'">';i+='<div class="showErrorLeftPtr"></div><div class="showErrorMsg">'+o;i+='</div><div class="showErrorRightPtr"></div></span>';i=d(i).appendTo("body");j=i.outerHeight();g=this.offset();n=g.top+(this.outerHeight()/2)-12;f=g.left;e=i.outerWidth();if(l.position==="right"){f+=this.outerWidth()}else{f-=e}i.dialog({dialogClass:"showErrorDialog",draggable:false,resizable:false,autoOpen:false,closeText:"",width:e,position:[f,n],maxHeight:j,minHeight:j});d(a).prepend(i.dialog("widget"));i.dialog("open");k.on(c,{clear:k,errDiv:i},b);i.css("width",e+5)};d.fn.showErrorLeft=function(f,e){e=e||{};this.showError(f,e)};d.fn.showErrorRight=function(f,e){e=e||{};e.position="right";this.showError(f,e)}}(jQuery));