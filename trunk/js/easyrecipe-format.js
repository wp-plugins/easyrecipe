(function(a){var b=EASYRECIPE;a(function(){var d,c=[],e=["gradient","picker_thumb","trigger","rainbow","hue_thumb"];for(d=0;d<e.length;d++){c.push(new Image());c[d].src=b.easyrecipeURL+"/css/images/format/"+e[d]+".png"}});a.fn.ERColorPicker=function(i,g,e){var l=this,n=a(i);var p=g;e=e||g;var c="";var j=n.css(e);function d(r){var q;r=r.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);try{q=("#"+("0"+parseInt(r[1],10).toString(16)).slice(-2)+("0"+parseInt(r[2],10).toString(16)).slice(-2)+("0"+parseInt(r[3],10).toString(16)).slice(-2)).toUpperCase();return q}catch(s){}return null}function o(q){c=q}function f(q){if(q==="none"){n.css(p,"")}else{n.css(p,q)}}function m(){var q=this.data("color");l.trigger("formatchange");if(q==="none"||q==="transparent"){this.miniColors("value","")}this.data("oldColor",q)}function k(){n.css(p,this.data("oldColor"));if(this.data("oldColor")==="none"||this.data("oldColor")==="transparent"){this.miniColors("value","")}else{this.miniColors("value",this.data("oldColor"))}this.data("color",this.data("oldColor"))}if(j){if(j!=="transparent"){c=d(j)}else{c=j}this.val(c)}this.miniColors({change:f,cancel:k,save:m,onShow:o,value:c})}}(jQuery));(function(a){a.widget("ui.combobox",{_create:function(){var d,c=this,b=this.element.hide(),e=b.children(":selected"),f=e.val()?e.text():"",g=this.wrapper=a("<span>").addClass("ui-combobox").insertAfter(b);d=a("<input>").appendTo(g).val(f).addClass("ui-state-default ui-combobox-input").autocomplete({delay:0,minLength:0,source:function(j,i){var k=new RegExp(a.ui.autocomplete.escapeRegex(j.term),"i");i(b.children("option").map(function(){var l=a(this).text();if(this.value&&(!j.term||k.test(l))){return{label:l.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(j.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:l,option:this}}}))},select:function(i,j){j.item.option.selected=true;c._trigger("selected",i,{item:j.item.option})},change:function(j,k){if(!k.item){var l=new RegExp("^"+a.ui.autocomplete.escapeRegex(a(this).val())+"$","i"),i=false;b.children("option").each(function(){if(a(this).text().match(l)){this.selected=i=true;return false}});if(!i){a(this).val("");b.val("");d.data("autocomplete").term="";return false}}}}).addClass("ui-widget ui-widget-content ui-corner-left");d.autocomplete("widget").wrap('<div class="easyrecipeFormatUI" />');d.data("autocomplete")._renderItem=function(i,j){return a("<li></li>").data("item.autocomplete",j).append("<a>"+j.label+"</a>").appendTo(i)};a("<a>").attr("tabIndex",-1).attr("title","Show All Items").appendTo(g).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-combobox-toggle").click(function(){if(d.autocomplete("widget").is(":visible")){d.autocomplete("close");return}a(this).blur();d.autocomplete("search","");d.focus()})},destroy:function(){this.wrapper.remove();this.element.show();a.Widget.prototype.destroy.call(this)}})}(jQuery));(function(c){var d=EASYRECIPE;function a(e){e.data.target.css("borderStyle",e.target.value)}function b(g,e){var f;g=g==="400"?"normal":g==="700"?"bold":g;for(f=0;f<e.length;f++){if(g===e[f].value){e[f].selected=true;break}}}c.fn.ERFontChange=function(y,g){var C=c(y);if(C.length===0){return null}var e=/ /g;var z,A;var l=this;var t;var n=g||{};var j=n.spacing||{};this.append(d.fontChangeHTML);if(!n.showList){this.find(".divERFFList").hide()}if(!n.showBorder){this.find(".divERFBBorder").hide()}var o=d.fonts||["inherit","Arial"];var f=C.css("fontFamily")||"";var m=this.find(".EFFFamily");var v,u,x=-1;function r(i,D){C.css("fontFamily",D.item.value);l.trigger("formatchange")}function s(i){C.css("fontStyle",i.target.value);l.trigger("formatchange")}function w(i){C.css("fontWeight",i.target.value);l.trigger("formatchange")}function p(i,D){C.css("fontSize",D.value);l.trigger("formatchange")}function B(i){C.css("listStyleType",i.target.value);l.trigger("formatchange")}function k(i){C.css("listStylePosition",i.target.value);l.trigger("formatchange")}function q(D,i){return D.replace(e,"")===i.replace(e,"")}m.each(function(){var i=this.options;for(z=0;z<o.length;z++){if(q(o[z],f)){A=true;x=z}u=z===x;v=o[z];i[z]=new Option(o[z],v,u,u)}if(!A){i[i.length]=new Option(f,f,true,true)}});this.find(".EFFFamily").combobox({selected:r});this.find(".ERFFColorInput").ERColorPicker(y,"color");this.find(".ERFFBGColorInput").ERColorPicker(y,"backgroundColor");b(C.css("fontStyle"),this.find(".lbERFFStyle option"));this.find(".lbERFFStyle").change(s);b(C.css("fontWeight"),this.find(".lbERFFWeight option"));this.find(".lbERFFWeight").change(w);if(n.showList){b(C.css("listStyleType"),this.find(".lbERFListStyle option"));this.find(".lbERFListStyle").change(B);b(C.css("listStylePosition"),this.find(".lbERFListPosition option"));this.find(".lbERFListPosition").change(k)}this.find(".ERFFSize").ERSlider({min:8,max:50,value:parseInt(c(y).css("fontSize"),10),style:"fontSize",selector:y});c.extend(j,{title:"Margin",type:"margin",min:-30});this.find(".ERFFMargin").spacing(y,j);c.extend(j,{title:"Padding",type:"padding",min:0});this.find(".ERFFPadding").spacing(y,j);if(n.showBorder){c(".ERBorderColorPick").ERColorPicker(C,"borderColor","borderTopColor");b(C.css("borderTopStyle"),c(".ERBorderStyle option"));c(".ERBorderStyle").change({target:C},a);c(".divERFBBorderSliderBox").ERSlider({min:1,max:10,value:parseInt(C.css("borderTopWidth"),10),selector:y,style:"borderWidth"})}return this}}(jQuery));(function(a){a.fn.ERSlider=function(e){var j,b,f,i=this;var c={width:120,min:1,max:20,value:1,selector:"",style:""};a.extend(c,e);j=a(c.selector);b=a('<input class=ERSliderInput" type="text" max="2" size="2" />');f=a('<span class="ERSliderSlider"></span>');function d(k){f.slider("value",k.target.value);j.css(c.style,k.target.value+"px");i.trigger("formatchange")}function g(k,l){b.val(l.value);j.css(c.style,l.value+"px");i.trigger("formatchange")}f.slider({min:c.min,max:c.max,value:c.value,slide:g});b.val(c.value);b.bind("change",d);a(this).append(b);a(this).append(f);return this}}(jQuery));(function(a){a.fn.spacing=function(x,e){var A="Top",i="px",q="disabled",b="value",c="sProperties",f=this;var n=a(x);var u={Top:0,Bottom:0,Left:0,Right:0};var t;var z=false,w;var j={type:"margin",title:"",min:0,max:50};a.extend(j,e);w=a("<div></div>");w.append(a('<div class="ERFOptionHeader"><span class="ERFOptionTitle"></span><span class="ERFSpacingSameForAll"><label>Same for all <input type="checkbox" class="ERFSpacingSameCB" /></label></span></div>'));var k='<div class="ERFSliderLine"><div class="ERFSliderType"></div><div><input class="ERFSliderValue" type="text" size="2" maxlength="2" /></div><div class="ERFSpacingSlider"></div></div>';var v={};function r(B){var d=B.data.sliders;z=B.target.checked;var D,C,s;C=B.data.input.val();for(D in d){if(d.hasOwnProperty(D)){if(D!==A){s=d[D].slider;if(z){s.slider(b,C);s.slider("disable");d[D].input.val(C);d[D].input.attr(q,q);n.css(j.type+D,C+i)}else{s.slider("enable");d[D].input.removeAttr(q)}}}}}function m(s,C){var D,B=C.value+i;f.trigger("formatchange");var E=a.data(s.target,c);n.css(E.style,B);E.input.val(C.value);if(E.position===A&&z){var d=E.sliders;for(D in d){if(D===A){continue}if(d.hasOwnProperty(D)){d[D].input.val(C.value);d[D].slider.slider(b,C.value);n.css(j.type+D,B)}}}}function l(d){d.data.slider.slider(b,d.target.value);m({target:d.data.slider[0]},{value:d.target.value})}for(t in u){if(u.hasOwnProperty(t)){u[t]=parseInt(n.css(j.type+t),10);v[t]={};var o=a(k);v[t].input=o.find(".ERFSliderValue");v[t].input.val(u[t]);v[t].postion=t;o.find(".ERFSliderType").html(t);var g={style:j.type+t,input:v[t].input,position:t};v[t].slider=o.find(".ERFSpacingSlider").slider({min:j.min,max:j.max,value:u[t],slide:m}).data(c,g);v[t].input.change({slider:v[t].slider},l);w.append(o)}}var y=v[A].slider.data();a.extend(y.sProperties,{sliders:v});v[A].slider.data(y);w.find(".ERFSpacingSameCB").click(y.sProperties,r);this.append(w);this.find(".ERFOptionTitle").html(j.title);return this}}(jQuery));(function(C){var z,l,a,o=false,J=false,r=null,K,M,t,P="close",x,d="Format EasyRecipe";var c=".easyrecipe",F,v,e,w="option",n="zIndex",N="open",H="click";var Q=/\?family=([^&]+)/i,p=0,b=/(.*)\?style=(.*)/i,k={},u="",S,R,f;var g=[c];function s(){J=true}function q(){var T=window.location.href.split("?")[0]+"?style="+C("#lbERFStyles").val();window.location.replace(T)}function L(V){R.removeAttr("disabled");f.attr("disabled","disabled");var U=C("#ERFDSStyleSelect img");var T=e.styleThumbs[V.target.value];C(".ERFDSStyleSelect img").attr("src",e.styleThumbs[V.target.value])}function B(){if(u!==""){t.show().html("Saving...");C.ajax({url:e.ajaxURL+"?action=easyrecipeSaveStyle",type:"POST",data:{style:u},success:function(){window.location.replace(S)}})}}function I(){var T;var U=confirm("This will clear your custom formatting\nAre you sure you want to do this?");if(U){M.show().html("Resetting...");T="css="+JSON.stringify([]);if(e.isPrint){T+="&isPrint=1"}C.ajax({url:e.ajaxURL+"?action=easyrecipeCustomCSS",type:"POST",data:T,success:function(){window.location.reload()}})}}function D(){var X={};var U,V,W;M.show().html("Updating...");for(U=0;U<g.length;U++){var T=C(g[U]);V=C(g[U]).attr("style");if(V){X[g[U]]=V}}W="css="+JSON.stringify(X);if(e.isPrint){W+="&isPrint=1"}C.ajax({url:e.ajaxURL+"?action=easyrecipeCustomCSS",type:"POST",data:W,success:function(){J=false;M.hide();if(o){o=false;K.dialog(P)}}})}function y(U,V){var X=V.newHeader.height();if(!X){return}var W=(V.newHeader.position()).top;X+=V.newContent.height()+3;if(a-l>W+X){return}var T=W-(a-X)/2;K.animate({scrollTop:T},500)}function A(T,U){if(U.index!==0){x.hide()}else{x.show()}}function G(T){}function m(T){}function j(T){C(".easyrecipe").css("borderStyle",T.target.value)}function E(){z=C(".ERFormatDialog");a=z.height();l=z.find(".ui-dialog-titlebar").height();var T=C("#wpadminbar").height();if(T===undefined){T=0}if(a>(C(window).height()-T-10)){z.css("top",(T+5)+"px");z.css("position","absolute")}else{z.css("position","fixed")}}function i(){if(J){if(!r){r=C("<div></div>").dialog({resizable:false,width:375,autoOpen:false,title:"You have unsaved changes",modal:true,height:75,buttons:{Cancel:function(){r.dialog(P)},"Ignore Changes":function(){J=false;r.dialog(P);K.dialog(P);window.location.reload()},"Save Changes":function(){o=true;D();r.dialog(P)}},dialogClass:"ERFSaveAlert",close:function(){C(".ERFSaveAlert").filter(function(){if(C(this).text()===""){return true}return false}).remove()},open:function(T,U){C(".ui-widget-overlay").wrap('<div class="easyrecipeFormatUI" />')}});r.parent(".ui-dialog").wrap('<div class="easyrecipeFormatUI" />')}r.dialog(w,n,p+100);r.dialog(N);return false}return true}function O(){var W,V,aa,ab,T,Z;F=C(c);if(typeof EASYRECIPE==="undefined"){EASYRECIPE={}}e=EASYRECIPE;if(e.isPrint){C("#liERFPrint").remove();C("#ERFPrint").remove();d="Format EasyRecipe Print";C("#liERFDisplayTab a").text("Print Format");C("#liERFDisplayStyles a").text("Print Styles")}e.openFormat=function(){var ac;if(p===0){C("*").each(function(){ac=parseInt(C(this).css("z-Index"),10)||0;if(ac>p){p=ac}})}K.dialog(N);K.dialog(w,n,p+100);K.dialog(w,"position",[60,60])};K=C(".ERFDialogBox").dialog({resizable:false,autoOpen:false,width:350,height:635,title:d,position:[60,60],open:E,dialogClass:"ERFormatDialog",beforeClose:i});K.parent(".ui-dialog.ERFormatDialog").wrap('<div class="easyrecipeFormatUI" />');M=C("#divERFWait");t=C("#divERFWaitStyle");x=C("#ERFButtons");e.fonts=["Arial, Verdana, sans-serif","Comic Sans MS, cursive","Tahoma, Verdana, sans-serif","'Trebuchet MS', Verdana, sans-serif","'Times New Roman', serif","Verdana, Arial, sans-serif"];T=C("link[rel='stylesheet'][href*='fonts.googleapis.com']");T.each(function(){var ac=decodeURIComponent(this.href);var ad=Q.exec(ac);if(ad===null){return}var ae=ad[1].split("|");for(W=0;W<ae.length;W++){e.fonts.push(ae[W].replace(/(.*?):.*/ig,"$1").replace(/\+/ig," "))}});e.fonts.sort();e.fonts.unshift("inherit");F.on(H,e.openFormat).addClass("ERPointer").attr("title","Click to open the formatting window");Z=JSON.parse(e.customCSS);for(V in Z){if(Z.hasOwnProperty(V)){if(Z&&Z[V]){C(V).attr("style",Z[V])}}}C("#ERFTabs").tabs({selected:0,select:A});C("#ERFAccordion").accordion({active:false,collapsible:true,clearStyle:true,change:y});C(".ERFDialogBox").bind("formatchange",s);try{v=C.parseJSON(e.formatting)}catch(Y){v=[]}for(W=0;W<v.length;W++){aa=v[W];switch(aa.type){case"recipe":ab=C("#ER_erf_"+aa.id).ERFontChange(aa.target,{showBorder:true});break;case"font":case"button":ab=C("#ER_erf_"+aa.id).ERFontChange(aa.target);break;case"list":ab=C("#ER_erf_"+aa.id).ERFontChange(aa.target,{showList:true,spacing:{min:-30}});break}if(ab===null){var U=1}else{g.push(aa.target)}}C("#btnERFReset").on(H,I);C("#btnERFUpdate").on(H,D);R=C("#btnERFTryStyle").on(H,q);C("#lbERFStyles").on("change",L);e.styleThumbs=C.parseJSON(e.styleThumbs);var X=b.exec(window.location.href);if(X!==null){u=X[2];S=X[1];f=C("#btnERFSaveStyle").on(H,B)}else{f=C("#btnERFSaveStyle").attr("disabled","disabled")}C(".ERSPrintBtn").on(H,function(ac){ac.stopPropagation()})}C(O)}(jQuery));if(jQuery){(function(a){a.extend(a.fn,{miniColors:function(q,x){var n=function(A,E,D){var y=i("#FFFFFF"),z="none",C=A.val();A.data("oldColor",C);if(C.charAt(0)==="#"){z=s(C);if(z){y=i(z)}A.data("color",z)}else{A.val("");A.data("color",C);z=""}var B=a('<a class="miniColors-trigger" style="background-color: #'+z+'" href="#"></a>');B.insertAfter(A);A.addClass("miniColors").attr("maxlength",7).attr("autocomplete","off");A.data("trigger",B);A.data("hsb",y);if(E.change){A.data("change",E.change)}if(E.cancel){A.data("cancel",E.cancel)}if(E.save){A.data("save",E.save)}if(E.onShow){A.data("onShow",E.onShow)}if(E.readonly){A.attr("readonly",true)}if(E.disabled){disable(A)}B.bind("click.miniColors",function(o){o.preventDefault();A.trigger("focus")});A.bind("focus.miniColors",function(o){v(A)});A.bind("blur.miniColors",function(F){var o=s(A.val());A.val(o?"#"+o:"")});A.bind("keydown.miniColors",function(o){if(o.keyCode===9){m(A)}});A.bind("keyup.miniColors",function(o){var F=A.val().replace(/[^A-F0-9#]/ig,"");A.val(F);if(!k(A)){A.data("trigger").css("backgroundColor","#FFF")}});A.bind("paste.miniColors",function(o){setTimeout(function(){A.trigger("keyup")},5)})};var w=function(o){m();o=a(o);o.data("trigger").remove();o.removeAttr("autocomplete");o.removeData("trigger");o.removeData("selector");o.removeData("hsb");o.removeData("huePicker");o.removeData("colorPicker");o.removeData("mousebutton");o.removeData("moving");o.unbind("click.miniColors");o.unbind("focus.miniColors");o.unbind("blur.miniColors");o.unbind("keyup.miniColors");o.unbind("keydown.miniColors");o.unbind("paste.miniColors");a(document).unbind("mousedown.miniColors");a(document).unbind("mousemove.miniColors")};var v=function(F){if(F.attr("disabled")){return false}m();var A=a('<div class="miniColors-selector"></div>');A.append('<div class="miniColors-colors" style="background-color: #FFF;"><div class="miniColors-colorPicker"></div></div>');A.append('<div class="miniColors-hues"><div class="miniColors-huePicker"></div></div>');A.append('<div class="cpButtons"><div class="miniColors-none" style="float:left"><label><input type="checkbox" /> None</label></div><div class="miniColors-X" style="float:left;padding-left:6px"><label><input type="checkbox" /> X</label></div><div class="cpCancel"><a></a></div><div class="cpSave"><a></a></div></div>');A.css({top:F.is(":visible")?F.offset().top+F.outerHeight():F.data("trigger").offset().top+F.data("trigger").outerHeight(),left:F.is(":visible")?F.offset().left:F.data("trigger").offset().left,display:"none"}).addClass(F.attr("class"));var C=F.data("hsb");var B=F.data("color");if(B==="none"){A.find(".miniColors-colors").addClass("miniColors-nocolor");A.find(".miniColors-none input").attr("checked",true);A.find(".miniColors-colorPicker").hide();A.find(".miniColors-huePicker").hide();A.find(".miniColors-hues").css("opacity",0.3)}else{if(B==="transparent"){A.find(".miniColors-colors").addClass("miniColors-transparent");A.find(".miniColors-X input").attr("checked",true);A.find(".miniColors-colorPicker").hide();A.find(".miniColors-huePicker").hide();A.find(".miniColors-hues").css("opacity",0.3)}else{A.find(".miniColors-colors").css("backgroundColor","#"+g({h:C.h,s:100,b:100}))}}var o=F.data("colorPosition");if(!o){o=d(C)}A.find(".miniColors-colorPicker").css("top",o.y+"px").css("left",o.x+"px");var E=F.data("huePosition");if(!E){E=p(C)}A.find(".miniColors-huePicker").css("top",E.y+"px");F.data("selector",A);F.data("huePicker",A.find(".miniColors-huePicker"));F.data("colorPicker",A.find(".miniColors-colorPicker"));F.data("mousebutton",0);a("BODY").append(A);var y=function(H){var G;if(!H.target.checked){A.find(".miniColors-colors").removeClass("miniColors-nocolor");A.find(".miniColors-colorPicker").show();A.find(".miniColors-huePicker").show();A.find(".miniColors-hues").css("opacity",1);G="#"+g({h:C.h,s:100,b:100});F.data("color",G);A.find(".miniColors-colors").css("backgroundColor",G);if(F.data("change")){G="#"+g({h:C.h,s:C.s,b:C.b});F.data("change").call(F,G)}}else{A.find(".miniColors-X input").attr("checked",false);A.find(".miniColors-colors").removeClass("miniColors-transparent");A.find(".miniColors-colors").addClass("miniColors-nocolor");A.find(".miniColors-colorPicker").hide();A.find(".miniColors-huePicker").hide();A.find(".miniColors-hues").css("opacity",0.3);F.data("color","none");if(F.data("change")){F.data("change").call(F,"none")}}};var z=function(H){var G;if(!H.target.checked){A.find(".miniColors-colors").removeClass("miniColors-transparent");A.find(".miniColors-colorPicker").show();A.find(".miniColors-huePicker").show();A.find(".miniColors-hues").css("opacity",1);G="#"+g({h:C.h,s:100,b:100});F.data("color",G);A.find(".miniColors-colors").css("backgroundColor",G);if(F.data("change")){G="#"+g({h:C.h,s:C.s,b:C.b});F.data("change").call(F,G)}}else{A.find(".miniColors-none input").attr("checked",false);A.find(".miniColors-colors").removeClass("miniColors-nocolor");A.find(".miniColors-colors").addClass("miniColors-transparent");A.find(".miniColors-colorPicker").hide();A.find(".miniColors-huePicker").hide();A.find(".miniColors-hues").css("opacity",0.3);F.data("color","transparent");if(F.data("change")){F.data("change").call(F,"transparent")}}};a(".miniColors-none input").bind("click",y);a(".miniColors-X input").bind("click",z);a(".cpCancel").bind("click",{input:F},f);a(".cpSave").bind("click",{input:F},t);A.fadeIn(100);A.bind("selectstart",function(){return false});a(document).bind("mousedown.miniColors",function(G){if(F.data("color")==="none"||F.data("color")==="transparent"){return}F.data("mousebutton",1);if(a(G.target).parents().andSelf().hasClass("miniColors-colors")){G.preventDefault();F.data("moving","colors");c(F,G)}if(a(G.target).parents().andSelf().hasClass("miniColors-hues")){G.preventDefault();F.data("moving","hues");l(F,G)}if(a(G.target).parents().andSelf().hasClass("miniColors-selector")){G.preventDefault();return}if(a(G.target).parents().andSelf().hasClass("miniColors")){return}f({data:{input:F}})});a(document).bind("mouseup.miniColors",function(G){if(F.data("color")==="none"){return}F.data("mousebutton",0);F.removeData("moving")});a(document).bind("mousemove.miniColors",function(G){if(F.data("color")==="none"){return}if(F.data("mousebutton")===1){if(F.data("moving")==="colors"){c(F,G)}if(F.data("moving")==="hues"){l(F,G)}}});var D=F.data("onShow");if(D){D.call(F,"#"+g(C))}};function f(y){var o,z;o=y.data.input;m(o);z=o.data("cancel");if(z){z.call(o)}}function t(z){var y,o;y=z.data.input;m(y);o=y.data("save");if(o){o.call(y)}}var m=function(o){if(!o){o=".miniColors"}a(o).each(function(){var y=a(this).data("selector");a(this).removeData("selector");a(y).fadeOut(100,function(){a(this).remove()})});a(document).unbind("mousedown.miniColors");a(document).unbind("mousemove.miniColors")};var c=function(B,D){var A=B.data("colorPicker");A.hide();var y={x:D.clientX-B.data("selector").find(".miniColors-colors").offset().left+a(document).scrollLeft()-5,y:D.clientY-B.data("selector").find(".miniColors-colors").offset().top+a(document).scrollTop()-5};if(y.x<=-5){y.x=-5}if(y.x>=144){y.x=144}if(y.y<=-5){y.y=-5}if(y.y>=144){y.y=144}B.data("colorPosition",y);A.css("left",y.x).css("top",y.y).show();var C=Math.round((y.x+5)*0.67);if(C<0){C=0}if(C>100){C=100}var o=100-Math.round((y.y+5)*0.67);if(o<0){o=0}if(o>100){o=100}var z=B.data("hsb");z.s=C;z.b=o;e(B,z,true)};var l=function(z,B){var C=z.data("huePicker");C.hide();var o={y:B.clientY-z.data("selector").find(".miniColors-colors").offset().top+a(document).scrollTop()-1};if(o.y<=-1){o.y=-1}if(o.y>=149){o.y=149}z.data("huePosition",o);C.css("top",o.y).show();var A=Math.round((150-o.y-1)*2.4);if(A<0){A=0}if(A>360){A=360}var y=z.data("hsb");y.h=A;e(z,y,true)};var e=function(y,o,z){y.data("hsb",o);var A=g(o);if(z){y.val("#"+A)}y.data("trigger").css("backgroundColor","#"+A);y.data("color","#"+A);if(y.data("selector")){y.data("selector").find(".miniColors-colors").css("backgroundColor","#"+g({h:o.h,s:100,b:100}))}if(y.data("change")){y.data("change").call(y,"#"+A,u(o))}};var k=function(A){var B=s(A.val());if(!B){return false}var z=i(B);var D=A.data("hsb");if(z.h===D.h&&z.s===D.s&&z.b===D.b){return true}var y=d(z);var o=a(A.data("colorPicker"));o.css("top",y.y+"px").css("left",y.x+"px");var E=p(z);var C=a(A.data("huePicker"));C.css("top",E.y+"px");e(A,z,false);return true};var d=function(z){var o=Math.ceil(z.s/0.67);if(o<0){o=0}if(o>150){o=150}var A=150-Math.ceil(z.b/0.67);if(A<0){A=0}if(A>150){A=150}return{x:o-5,y:A-5}};var p=function(o){var z=150-(o.h/2.4);if(z<0){h=0}if(z>150){h=150}return{y:z-1}};var s=function(o){o=o.replace(/[^A-Fa-f0-9]/,"");if(o.length===3){o=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]}return o.length===6?o:null};var u=function(o){var z={};var D=Math.round(o.h);var C=Math.round(o.s*255/100);var y=Math.round(o.b*255/100);if(C===0){z.r=z.g=z.b=y}else{var E=y;var B=(255-C)*y/255;var A=(E-B)*(D%60)/60;if(D===360){D=0}if(D<60){z.r=E;z.b=B;z.g=B+A}else{if(D<120){z.g=E;z.b=B;z.r=E-A}else{if(D<180){z.g=E;z.r=B;z.b=B+A}else{if(D<240){z.b=E;z.r=B;z.g=E-A}else{if(D<300){z.b=E;z.g=B;z.r=B+A}else{if(D<360){z.r=E;z.g=B;z.b=E-A}else{z.r=0;z.g=0;z.b=0}}}}}}}return{r:Math.round(z.r),g:Math.round(z.g),b:Math.round(z.b)}};var b=function(o){var y=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];a.each(y,function(z,A){if(A.length===1){y[z]="0"+A}});return y.join("").toUpperCase()};var r=function(o){o=parseInt(((o.indexOf("#")>-1)?o.substring(1):o),16);return{r:o>>16,g:(o&65280)>>8,b:(o&255)}};var j=function(z){var y={h:0,s:0,b:0};var A=Math.min(z.r,z.g,z.b);var o=Math.max(z.r,z.g,z.b);var B=o-A;y.b=o;y.s=o!==0?255*B/o:0;if(y.s!==0){if(z.r===o){y.h=(z.g-z.b)/B}else{if(z.g===o){y.h=2+(z.b-z.r)/B}else{y.h=4+(z.r-z.g)/B}}}else{y.h=-1}y.h*=60;if(y.h<0){y.h+=360}y.s*=100/255;y.b*=100/255;return y};var i=function(y){var o=j(r(y));if(o.s===0){o.h=360}return o};var g=function(o){return b(u(o))};switch(q){case"readonly":a(this).each(function(){a(this).attr("readonly",x)});return a(this);case"disabled":a(this).each(function(){if(x){disable(a(this))}else{enable(a(this))}});return a(this);case"value":a(this).each(function(){a(this).val(x).trigger("keyup")});return a(this);case"destroy":a(this).each(function(){w(a(this))});return a(this);default:if(!q){q={}}a(this).each(function(){if(a(this)[0].tagName.toLowerCase()!=="input"){return}if(a(this).data("trigger")){return}n(a(this),q,x)});return a(this)}}})}(jQuery))};